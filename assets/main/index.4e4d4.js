window.__require=function e(t,n,a){function i(s,r){if(!n[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var h=n[s]={exports:{}};t[s][0].call(h.exports,function(e){return i(t[s][1][e]||e)},h,h.exports,e,t,n,a)}return n[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<a.length;s++)i(a[s]);return i}({1:[function(e,t){var n,a,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function r(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function c(e){if(a===clearTimeout)return clearTimeout(e);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{return a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(e){a=s}})();var l,h=[],u=!1,p=-1;function d(){u&&l&&(u=!1,l.length?h=l.concat(h):p=-1,h.length&&f())}function f(){if(!u){var e=r(d);u=!0;for(var t=h.length;t;){for(l=h,h=[];++p<t;)l&&l[p].run();p=-1,t=h.length}l=null,u=!1,c(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new m(e,t)),1!==h.length||u||r(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(){return[]},i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(e,t,n){(function(e){var a;a=function(t){"use strict";function n(e,...t){return(...n)=>e(...t,...n)}function a(e){return function(...t){var n=t.pop();return e.call(this,t,n)}}var i="function"==typeof queueMicrotask&&queueMicrotask,o="function"==typeof setImmediate&&setImmediate,s="object"==typeof e&&"function"==typeof e.nextTick;function r(e){setTimeout(e,0)}function c(e){return(t,...n)=>e(()=>t(...n))}var l=c(i?queueMicrotask:o?setImmediate:s?e.nextTick:r);function h(e){return d(e)?function(...t){const n=t.pop();return u(e.apply(this,t),n)}:a(function(t,n){var a;try{a=e.apply(this,t)}catch(i){return n(i)}if(a&&"function"==typeof a.then)return u(a,n);n(null,a)})}function u(e,t){return e.then(e=>{p(t,null,e)},e=>{p(t,e&&e.message?e:new Error(e))})}function p(e,t,n){try{e(t,n)}catch(a){l(e=>{throw e},a)}}function d(e){return"AsyncFunction"===e[Symbol.toStringTag]}function f(e){return"AsyncGenerator"===e[Symbol.toStringTag]}function m(e){return"function"==typeof e[Symbol.asyncIterator]}function g(e){if("function"!=typeof e)throw new Error("expected a function");return d(e)?h(e):e}function v(e,t=e.length){if(!t)throw new Error("arity is undefined");return function(...n){return"function"==typeof n[t-1]?e.apply(this,n):new Promise((a,i)=>{n[t-1]=(e,...t)=>{if(e)return i(e);a(t.length>1?t:t[0])},e.apply(this,n)})}}function b(e){return function(t,...n){return v(function(a){var i=this;return e(t,(e,t)=>{g(e).apply(i,n.concat(t))},a)})}}function C(e,t,n,a){t=t||[];var i=[],o=0,s=g(n);return e(t,(e,t,n)=>{var a=o++;s(e,(e,t)=>{i[a]=t,n(e)})},e=>{a(e,i)})}function y(e){return e&&"number"==typeof e.length&&e.length>=0&&e.length%1==0}const S={};function _(e){function t(...t){if(null!==e){var n=e;e=null,n.apply(this,t)}}return Object.assign(t,e),t}function w(e){return e[Symbol.iterator]&&e[Symbol.iterator]()}function P(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}function x(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}function k(e){if(y(e))return P(e);var t,n,a,i,o=w(e);return o?x(o):(n=(t=e)?Object.keys(t):[],a=-1,i=n.length,function(){var e=n[++a];return a<i?{value:t[e],key:e}:null})}function I(e){return function(...t){if(null===e)throw new Error("Callback was already called.");var n=e;e=null,n.apply(this,t)}}function A(e,t,n,a){let i=!1,o=!1,s=!1,r=0,c=0;function l(){r>=t||s||i||(s=!0,e.next().then(({value:e,done:t})=>{if(!o&&!i){if(s=!1,t)return i=!0,void(r<=0&&a(null));r++,n(e,c,h),c++,l()}}).catch(u))}function h(e,t){if(r-=1,!o)return e?u(e):!1===e?(i=!0,void(o=!0)):t===S||i&&r<=0?(i=!0,a(null)):void l()}function u(e){o||(s=!1,i=!0,a(e))}l()}var F=e=>(t,n,a)=>{if(a=_(a),e<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!t)return a(null);if(f(t))return A(t,e,n,a);if(m(t))return A(t[Symbol.asyncIterator](),e,n,a);var i=k(t),o=!1,s=!1,r=0,c=!1;function l(e,t){if(!s)if(r-=1,e)o=!0,a(e);else if(!1===e)o=!0,s=!0;else{if(t===S||o&&r<=0)return o=!0,a(null);c||h()}}function h(){for(c=!0;r<e&&!o;){var t=i();if(null===t)return o=!0,void(r<=0&&a(null));r+=1,n(t.value,t.key,I(l))}c=!1}h()},B=v(function(e,t,n,a){return F(t)(e,g(n),a)},4);function D(e,t,n){n=_(n);var a=0,i=0,{length:o}=e,s=!1;function r(e,t){!1===e&&(s=!0),!0!==s&&(e?n(e):++i!==o&&t!==S||n(null))}for(0===o&&n(null);a<o;a++)t(e[a],a,I(r))}function T(e,t,n){return B(e,1/0,t,n)}var R=v(function(e,t,n){return(y(e)?D:T)(e,g(t),n)},3),M=v(function(e,t,n){return C(R,e,t,n)},3),L=b(M),N=v(function(e,t,n){return B(e,1,t,n)},3),U=v(function(e,t,n){return C(N,e,t,n)},3),O=b(U);const E=Symbol("promiseCallback");function H(){let e,t;function n(n,...a){if(n)return t(n);e(a.length>1?a:a[0])}return n[E]=new Promise((n,a)=>{e=n,t=a}),n}function W(e,t,n){"number"!=typeof t&&(n=t,t=null),n=_(n||H());var a=Object.keys(e).length;if(!a)return n(null);t||(t=a);var i={},o=0,s=!1,r=!1,c=Object.create(null),l=[],h=[],u={};function p(e,t){l.push(()=>v(e,t))}function d(){if(!s){if(0===l.length&&0===o)return n(null,i);for(;l.length&&o<t;)l.shift()()}}function f(e,t){var n=c[e];n||(n=c[e]=[]),n.push(t)}function m(e){(c[e]||[]).forEach(e=>e()),d()}function v(e,t){if(!r){var a=I((t,...a)=>{if(o--,!1!==t)if(a.length<2&&([a]=a),t){var l={};if(Object.keys(i).forEach(e=>{l[e]=i[e]}),l[e]=a,r=!0,c=Object.create(null),s)return;n(t,l)}else i[e]=a,m(e);else s=!0});o++;var l=g(t[t.length-1]);t.length>1?l(i,a):l(a)}}function b(t){var n=[];return Object.keys(e).forEach(a=>{const i=e[a];Array.isArray(i)&&i.indexOf(t)>=0&&n.push(a)}),n}return Object.keys(e).forEach(t=>{var n=e[t];if(!Array.isArray(n))return p(t,[n]),void h.push(t);var a=n.slice(0,n.length-1),i=a.length;if(0===i)return p(t,n),void h.push(t);u[t]=i,a.forEach(o=>{if(!e[o])throw new Error("async.auto task `"+t+"` has a non-existent dependency `"+o+"` in "+a.join(", "));f(o,()=>{0==--i&&p(t,n)})})}),function(){for(var e=0;h.length;)e++,b(h.pop()).forEach(e=>{0==--u[e]&&h.push(e)});if(e!==a)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),d(),n[E]}var G=/^(?:async\s+)?(?:function)?\s*\w*\s*\(\s*([^)]+)\s*\)(?:\s*{)/,j=/^(?:async\s+)?\(?\s*([^)=]+)\s*\)?(?:\s*=>)/,J=/,/,z=/(=.+)?(\s*)$/,q=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function K(e){const t=e.toString().replace(q,"");let n=t.match(G);if(n||(n=t.match(j)),!n)throw new Error("could not parse args in autoInject\nSource:\n"+t);let[,a]=n;return a.replace(/\s/g,"").split(J).map(e=>e.replace(z,"").trim())}function V(e,t){var n={};return Object.keys(e).forEach(t=>{var a,i=e[t],o=d(i),s=!o&&1===i.length||o&&0===i.length;if(Array.isArray(i))a=[...i],i=a.pop(),n[t]=a.concat(a.length>0?r:i);else if(s)n[t]=i;else{if(a=K(i),0===i.length&&!o&&0===a.length)throw new Error("autoInject task functions require explicit parameters.");o||a.pop(),n[t]=a.concat(r)}function r(e,t){var n=a.map(t=>e[t]);n.push(t),g(i)(...n)}}),W(n,t)}class X{constructor(){this.head=this.tail=null,this.length=0}removeLink(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e}empty(){for(;this.head;)this.shift();return this}insertAfter(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1}insertBefore(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1}unshift(e){this.head?this.insertBefore(this.head,e):Q(this,e)}push(e){this.tail?this.insertAfter(this.tail,e):Q(this,e)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var e=this.head;e;)yield e.data,e=e.next}remove(e){for(var t=this.head;t;){var{next:n}=t;e(t)&&this.removeLink(t),t=n}return this}}function Q(e,t){e.length=1,e.head=e.tail=t}function Y(e,t,n){if(null==t)t=1;else if(0===t)throw new RangeError("Concurrency must not be zero");var a=g(e),i=0,o=[];const s={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function r(e,t){s[e].push(t)}function c(e,t){const n=(...a)=>{h(e,n),t(...a)};s[e].push(n)}function h(e,t){return e?t?void(s[e]=s[e].filter(e=>e!==t)):s[e]=[]:Object.keys(s).forEach(e=>s[e]=[])}function u(e,...t){s[e].forEach(e=>e(...t))}var p=!1;function d(e,t,n,a){if(null!=a&&"function"!=typeof a)throw new Error("task callback must be a function");var i,o;function s(e,...t){return e?n?o(e):i():t.length<=1?i(t[0]):void i(t)}C.started=!0;var r={data:e,callback:n?s:a||s};if(t?C._tasks.unshift(r):C._tasks.push(r),p||(p=!0,l(()=>{p=!1,C.process()})),n||!a)return new Promise((e,t)=>{i=e,o=t})}function f(e){return function(t,...n){i-=1;for(var a=0,s=e.length;a<s;a++){var r=e[a],c=o.indexOf(r);0===c?o.shift():c>0&&o.splice(c,1),r.callback(t,...n),null!=t&&u("error",t,r.data)}i<=C.concurrency-C.buffer&&u("unsaturated"),C.idle()&&u("drain"),C.process()}}function m(e){return!(0!==e.length||!C.idle()||(l(()=>u("drain")),0))}const v=e=>t=>{if(!t)return new Promise((t,n)=>{c(e,(e,a)=>{if(e)return n(e);t(a)})});h(e),r(e,t)};var b=!1,C={_tasks:new X,*[Symbol.iterator](){yield*C._tasks[Symbol.iterator]()},concurrency:t,payload:n,buffer:t/4,started:!1,paused:!1,push(e,t){if(Array.isArray(e)){if(m(e))return;return e.map(e=>d(e,!1,!1,t))}return d(e,!1,!1,t)},pushAsync(e,t){if(Array.isArray(e)){if(m(e))return;return e.map(e=>d(e,!1,!0,t))}return d(e,!1,!0,t)},kill(){h(),C._tasks.empty()},unshift(e,t){if(Array.isArray(e)){if(m(e))return;return e.map(e=>d(e,!0,!1,t))}return d(e,!0,!1,t)},unshiftAsync(e,t){if(Array.isArray(e)){if(m(e))return;return e.map(e=>d(e,!0,!0,t))}return d(e,!0,!0,t)},remove(e){C._tasks.remove(e)},process(){if(!b){for(b=!0;!C.paused&&i<C.concurrency&&C._tasks.length;){var e=[],t=[],n=C._tasks.length;C.payload&&(n=Math.min(n,C.payload));for(var s=0;s<n;s++){var r=C._tasks.shift();e.push(r),o.push(r),t.push(r.data)}i+=1,0===C._tasks.length&&u("empty"),i===C.concurrency&&u("saturated");var c=I(f(e));a(t,c)}b=!1}},length:()=>C._tasks.length,running:()=>i,workersList:()=>o,idle:()=>C._tasks.length+i===0,pause(){C.paused=!0},resume(){!1!==C.paused&&(C.paused=!1,l(C.process))}};return Object.defineProperties(C,{saturated:{writable:!1,value:v("saturated")},unsaturated:{writable:!1,value:v("unsaturated")},empty:{writable:!1,value:v("empty")},drain:{writable:!1,value:v("drain")},error:{writable:!1,value:v("error")}}),C}function Z(e,t){return Y(e,1,t)}function $(e,t,n){return Y(e,t,n)}var ee=v(function(e,t,n,a){a=_(a);var i=g(n);return N(e,(e,n,a)=>{i(t,e,(e,n)=>{t=n,a(e)})},e=>a(e,t))},4);function te(...e){var t=e.map(g);return function(...e){var n=this,a=e[e.length-1];return"function"==typeof a?e.pop():a=H(),ee(t,e,(e,t,a)=>{t.apply(n,e.concat((e,...t)=>{a(e,t)}))},(e,t)=>a(e,...t)),a[E]}}function ne(...e){return te(...e.reverse())}var ae=v(function(e,t,n,a){return C(F(t),e,n,a)},4),ie=v(function(e,t,n,a){var i=g(n);return ae(e,t,(e,t)=>{i(e,(e,...n)=>e?t(e):t(e,n))},(e,t)=>{for(var n=[],i=0;i<t.length;i++)t[i]&&(n=n.concat(...t[i]));return a(e,n)})},4),oe=v(function(e,t,n){return ie(e,1/0,t,n)},3),se=v(function(e,t,n){return ie(e,1,t,n)},3);function re(...e){return function(...t){return t.pop()(null,...e)}}function ce(e,t){return(n,a,i,o)=>{var s,r=!1;const c=g(i);n(a,(n,a,i)=>{c(n,(a,o)=>a||!1===a?i(a):e(o)&&!s?(r=!0,s=t(!0,n),i(null,S)):void i())},e=>{if(e)return o(e);o(null,r?s:t(!1))})}}var le=v(function(e,t,n){return ce(e=>e,(e,t)=>t)(R,e,t,n)},3),he=v(function(e,t,n,a){return ce(e=>e,(e,t)=>t)(F(t),e,n,a)},4),ue=v(function(e,t,n){return ce(e=>e,(e,t)=>t)(F(1),e,t,n)},3);function pe(e){return(t,...n)=>g(t)(...n,(t,...n)=>{"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&n.forEach(t=>console[e](t)))})}var de=pe("dir"),fe=v(function(e,t,n){n=I(n);var a,i=g(e),o=g(t);function s(e,...t){if(e)return n(e);!1!==e&&(a=t,o(...t,r))}function r(e,t){return e?n(e):!1!==e?t?void i(s):n(null,...a):void 0}return r(null,!0)},3);function me(e,t,n){const a=g(t);return fe(e,(...e)=>{const t=e.pop();a(...e,(e,n)=>t(e,!n))},n)}function ge(e){return(t,n,a)=>e(t,a)}var ve=v(function(e,t,n){return R(e,ge(g(t)),n)},3),be=v(function(e,t,n,a){return F(t)(e,ge(g(n)),a)},4),Ce=v(function(e,t,n){return be(e,1,t,n)},3);function ye(e){return d(e)?e:function(...t){var n=t.pop(),a=!0;t.push((...e)=>{a?l(()=>n(...e)):n(...e)}),e.apply(this,t),a=!1}}var Se=v(function(e,t,n){return ce(e=>!e,e=>!e)(R,e,t,n)},3),_e=v(function(e,t,n,a){return ce(e=>!e,e=>!e)(F(t),e,n,a)},4),we=v(function(e,t,n){return ce(e=>!e,e=>!e)(N,e,t,n)},3);function Pe(e,t,n,a){var i=new Array(t.length);e(t,(e,t,a)=>{n(e,(e,n)=>{i[t]=!!n,a(e)})},e=>{if(e)return a(e);for(var n=[],o=0;o<t.length;o++)i[o]&&n.push(t[o]);a(null,n)})}function xe(e,t,n,a){var i=[];e(t,(e,t,a)=>{n(e,(n,o)=>{if(n)return a(n);o&&i.push({index:t,value:e}),a(n)})},e=>{if(e)return a(e);a(null,i.sort((e,t)=>e.index-t.index).map(e=>e.value))})}function ke(e,t,n,a){return(y(t)?Pe:xe)(e,t,g(n),a)}var Ie=v(function(e,t,n){return ke(R,e,t,n)},3),Ae=v(function(e,t,n,a){return ke(F(t),e,n,a)},4),Fe=v(function(e,t,n){return ke(N,e,t,n)},3),Be=v(function(e,t){var n=I(t),a=g(ye(e));return function e(t){if(t)return n(t);!1!==t&&a(e)}()},2),De=v(function(e,t,n,a){var i=g(n);return ae(e,t,(e,t)=>{i(e,(n,a)=>n?t(n):t(n,{key:a,val:e}))},(e,t)=>{for(var n={},{hasOwnProperty:i}=Object.prototype,o=0;o<t.length;o++)if(t[o]){var{key:s}=t[o],{val:r}=t[o];i.call(n,s)?n[s].push(r):n[s]=[r]}return a(e,n)})},4);function Te(e,t,n){return De(e,1/0,t,n)}function Re(e,t,n){return De(e,1,t,n)}var Me=pe("log"),Le=v(function(e,t,n,a){a=_(a);var i={},o=g(n);return F(t)(e,(e,t,n)=>{o(e,t,(e,a)=>{if(e)return n(e);i[t]=a,n(e)})},e=>a(e,i))},4);function Ne(e,t,n){return Le(e,1/0,t,n)}function Ue(e,t,n){return Le(e,1,t,n)}function Oe(e,t=(e=>e)){var n=Object.create(null),i=Object.create(null),o=g(e),s=a((e,a)=>{var s=t(...e);s in n?l(()=>a(null,...n[s])):s in i?i[s].push(a):(i[s]=[a],o(...e,(e,...t)=>{e||(n[s]=t);var a=i[s];delete i[s];for(var o=0,r=a.length;o<r;o++)a[o](e,...t)}))});return s.memo=n,s.unmemoized=e,s}var Ee=c(s?e.nextTick:o?setImmediate:r),He=v((e,t,n)=>{var a=y(t)?[]:{};e(t,(e,t,n)=>{g(e)((e,...i)=>{i.length<2&&([i]=i),a[t]=i,n(e)})},e=>n(e,a))},3);function We(e,t){return He(R,e,t)}function Ge(e,t,n){return He(F(t),e,n)}function je(e,t){var n=g(e);return Y((e,t)=>{n(e[0],t)},t,1)}class Je{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(e){let t;for(;e>0&&qe(this.heap[e],this.heap[t=ze(e)]);){let n=this.heap[e];this.heap[e]=this.heap[t],this.heap[t]=n,e=t}}percDown(e){let t;for(;(t=1+(e<<1))<this.heap.length&&(t+1<this.heap.length&&qe(this.heap[t+1],this.heap[t])&&(t+=1),!qe(this.heap[e],this.heap[t]));){let n=this.heap[e];this.heap[e]=this.heap[t],this.heap[t]=n,e=t}}push(e){e.pushCount=++this.pushCount,this.heap.push(e),this.percUp(this.heap.length-1)}unshift(e){return this.heap.push(e)}shift(){let[e]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),e}toArray(){return[...this]}*[Symbol.iterator](){for(let e=0;e<this.heap.length;e++)yield this.heap[e].data}remove(e){let t=0;for(let n=0;n<this.heap.length;n++)e(this.heap[n])||(this.heap[t]=this.heap[n],t++);this.heap.splice(t);for(let n=ze(this.heap.length-1);n>=0;n--)this.percDown(n);return this}}function ze(e){return(e+1>>1)-1}function qe(e,t){return e.priority!==t.priority?e.priority<t.priority:e.pushCount<t.pushCount}function Ke(e,t){var n=je(e,t),a=!1;return n._tasks=new Je,n.push=function(e,t=0,i=(()=>{})){if("function"!=typeof i)throw new Error("task callback must be a function");if(n.started=!0,Array.isArray(e)||(e=[e]),0===e.length&&n.idle())return l(()=>n.drain());for(var o=0,s=e.length;o<s;o++){var r={data:e[o],priority:t,callback:i};n._tasks.push(r)}a||(a=!0,l(()=>{a=!1,n.process()}))},delete n.unshift,n}var Ve=v(function(e,t){if(t=_(t),!Array.isArray(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var n=0,a=e.length;n<a;n++)g(e[n])(t)},2);function Xe(e,t,n,a){var i=[...e].reverse();return ee(i,t,n,a)}function Qe(e){var t=g(e);return a(function(e,n){return e.push((e,...t)=>{let a={};if(e&&(a.error=e),t.length>0){var i=t;t.length<=1&&([i]=t),a.value=i}n(null,a)}),t.apply(this,e)})}function Ye(e){var t;return Array.isArray(e)?t=e.map(Qe):(t={},Object.keys(e).forEach(n=>{t[n]=Qe.call(this,e[n])})),t}function Ze(e,t,n,a){const i=g(n);return ke(e,t,(e,t)=>{i(e,(e,n)=>{t(e,!n)})},a)}var $e=v(function(e,t,n){return Ze(R,e,t,n)},3),et=v(function(e,t,n,a){return Ze(F(t),e,n,a)},4),tt=v(function(e,t,n){return Ze(N,e,t,n)},3);function nt(e){return function(){return e}}const at=5,it=0;function ot(e,t,n){var a={times:at,intervalFunc:nt(it)};if(arguments.length<3&&"function"==typeof e?(n=t||H(),t=e):(st(a,e),n=n||H()),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var i=g(t),o=1;return function e(){i((t,...i)=>{!1!==t&&(t&&o++<a.times&&("function"!=typeof a.errorFilter||a.errorFilter(t))?setTimeout(e,a.intervalFunc(o-1)):n(t,...i))})}(),n[E]}function st(e,t){if("object"==typeof t)e.times=+t.times||at,e.intervalFunc="function"==typeof t.interval?t.interval:nt(+t.interval||it),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||at}}function rt(e,t){t||(t=e,e=null);let n=e&&e.arity||t.length;d(t)&&(n+=1);var i=g(t);return a((t,a)=>{function o(e){i(...t,e)}return(t.length<n-1||null==a)&&(t.push(a),a=H()),e?ot(e,o,a):ot(o,a),a[E]})}function ct(e,t){return He(N,e,t)}var lt=v(function(e,t,n){return ce(Boolean,e=>e)(R,e,t,n)},3),ht=v(function(e,t,n,a){return ce(Boolean,e=>e)(F(t),e,n,a)},4),ut=v(function(e,t,n){return ce(Boolean,e=>e)(N,e,t,n)},3),pt=v(function(e,t,n){var a=g(t);return M(e,(e,t)=>{a(e,(n,a)=>{if(n)return t(n);t(n,{value:e,criteria:a})})},(e,t)=>{if(e)return n(e);n(null,t.sort(i).map(e=>e.value))});function i(e,t){var n=e.criteria,a=t.criteria;return n<a?-1:n>a?1:0}},3);function dt(e,t,n){var i=g(e);return a((a,o)=>{var s,r=!1;a.push((...e)=>{r||(o(...e),clearTimeout(s))}),s=setTimeout(function(){var t=e.name||"anonymous",a=new Error('Callback function "'+t+'" timed out.');a.code="ETIMEDOUT",n&&(a.info=n),r=!0,o(a)},t),i(...a)})}function ft(e){for(var t=Array(e);e--;)t[e]=e;return t}function mt(e,t,n,a){var i=g(n);return ae(ft(e),t,i,a)}function gt(e,t,n){return mt(e,1/0,t,n)}function vt(e,t,n){return mt(e,1,t,n)}function bt(e,t,n,a){arguments.length<=3&&"function"==typeof t&&(a=n,n=t,t=Array.isArray(e)?[]:{}),a=_(a||H());var i=g(n);return R(e,(e,n,a)=>{i(t,e,n,a)},e=>a(e,t)),a[E]}var Ct=v(function(e,t){var n,a=null;return Ce(e,(e,t)=>{g(e)((e,...i)=>{if(!1===e)return t(e);i.length<2?[n]=i:n=i,a=e,t(e?null:{})})},()=>t(a,n))});function yt(e){return(...t)=>(e.unmemoized||e)(...t)}var St=v(function(e,t,n){n=I(n);var a=g(t),i=g(e),o=[];function s(e,...t){if(e)return n(e);o=t,!1!==e&&i(r)}function r(e,t){return e?n(e):!1!==e?t?void a(s):n(null,...o):void 0}return i(r)},3);function _t(e,t,n){const a=g(e);return St(e=>a((t,n)=>e(t,!n)),t,n)}var wt=v(function(e,t){if(t=_(t),!Array.isArray(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;function a(t){g(e[n++])(...t,I(i))}function i(i,...o){if(!1!==i)return i||n===e.length?t(i,...o):void a(o)}a([])}),Pt={apply:n,applyEach:L,applyEachSeries:O,asyncify:h,auto:W,autoInject:V,cargo:Z,cargoQueue:$,compose:ne,concat:oe,concatLimit:ie,concatSeries:se,constant:re,detect:le,detectLimit:he,detectSeries:ue,dir:de,doUntil:me,doWhilst:fe,each:ve,eachLimit:be,eachOf:R,eachOfLimit:B,eachOfSeries:N,eachSeries:Ce,ensureAsync:ye,every:Se,everyLimit:_e,everySeries:we,filter:Ie,filterLimit:Ae,filterSeries:Fe,forever:Be,groupBy:Te,groupByLimit:De,groupBySeries:Re,log:Me,map:M,mapLimit:ae,mapSeries:U,mapValues:Ne,mapValuesLimit:Le,mapValuesSeries:Ue,memoize:Oe,nextTick:Ee,parallel:We,parallelLimit:Ge,priorityQueue:Ke,queue:je,race:Ve,reduce:ee,reduceRight:Xe,reflect:Qe,reflectAll:Ye,reject:$e,rejectLimit:et,rejectSeries:tt,retry:ot,retryable:rt,seq:te,series:ct,setImmediate:l,some:lt,someLimit:ht,someSeries:ut,sortBy:pt,timeout:dt,times:gt,timesLimit:mt,timesSeries:vt,transform:bt,tryEach:Ct,unmemoize:yt,until:_t,waterfall:wt,whilst:St,all:Se,allLimit:_e,allSeries:we,any:lt,anyLimit:ht,anySeries:ut,find:le,findLimit:he,findSeries:ue,flatMap:oe,flatMapLimit:ie,flatMapSeries:se,forEach:ve,forEachSeries:Ce,forEachLimit:be,forEachOf:R,forEachOfSeries:N,forEachOfLimit:B,inject:ee,foldl:ee,foldr:Xe,select:Ie,selectLimit:Ae,selectSeries:Fe,wrapSync:h,during:St,doDuring:fe};t.default=Pt,t.apply=n,t.applyEach=L,t.applyEachSeries=O,t.asyncify=h,t.auto=W,t.autoInject=V,t.cargo=Z,t.cargoQueue=$,t.compose=ne,t.concat=oe,t.concatLimit=ie,t.concatSeries=se,t.constant=re,t.detect=le,t.detectLimit=he,t.detectSeries=ue,t.dir=de,t.doUntil=me,t.doWhilst=fe,t.each=ve,t.eachLimit=be,t.eachOf=R,t.eachOfLimit=B,t.eachOfSeries=N,t.eachSeries=Ce,t.ensureAsync=ye,t.every=Se,t.everyLimit=_e,t.everySeries=we,t.filter=Ie,t.filterLimit=Ae,t.filterSeries=Fe,t.forever=Be,t.groupBy=Te,t.groupByLimit=De,t.groupBySeries=Re,t.log=Me,t.map=M,t.mapLimit=ae,t.mapSeries=U,t.mapValues=Ne,t.mapValuesLimit=Le,t.mapValuesSeries=Ue,t.memoize=Oe,t.nextTick=Ee,t.parallel=We,t.parallelLimit=Ge,t.priorityQueue=Ke,t.queue=je,t.race=Ve,t.reduce=ee,t.reduceRight=Xe,t.reflect=Qe,t.reflectAll=Ye,t.reject=$e,t.rejectLimit=et,t.rejectSeries=tt,t.retry=ot,t.retryable=rt,t.seq=te,t.series=ct,t.setImmediate=l,t.some=lt,t.someLimit=ht,t.someSeries=ut,t.sortBy=pt,t.timeout=dt,t.times=gt,t.timesLimit=mt,t.timesSeries=vt,t.transform=bt,t.tryEach=Ct,t.unmemoize=yt,t.until=_t,t.waterfall=wt,t.whilst=St,t.all=Se,t.allLimit=_e,t.allSeries=we,t.any=lt,t.anyLimit=ht,t.anySeries=ut,t.find=le,t.findLimit=he,t.findSeries=ue,t.flatMap=oe,t.flatMapLimit=ie,t.flatMapSeries=se,t.forEach=ve,t.forEachSeries=Ce,t.forEachLimit=be,t.forEachOf=R,t.forEachOfSeries=N,t.forEachOfLimit=B,t.inject=ee,t.foldl=ee,t.foldr=Xe,t.select=Ie,t.selectLimit=Ae,t.selectSeries=Fe,t.wrapSync=h,t.during=St,t.doDuring=fe,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?a(n):"function"==typeof define&&define.amd?define(["exports"],a):a(this.async={})}).call(this,e("_process"))},{_process:1}],AnimHelper:[function(e,t){"use strict";cc._RF.push(t,"d6ff4kVMSdOh7u6WwhErR6E","AnimHelper"),cc.Class({extends:cc.Component,properties:{particleToPlay:cc.ParticleSystem,finishHandler:cc.Component.EventHandler,fireHandler:cc.Component.EventHandler},playParticle:function(){this.particleToPlay&&this.particleToPlay.resetSystem()},fire:function(){cc.Component.EventHandler.emitEvents([this.fireHandler])},finish:function(){cc.Component.EventHandler.emitEvents([this.finishHandler])}}),cc._RF.pop()},{}],BGPool:[function(e,t){"use strict";cc._RF.push(t,"16ee7ZnsPBCT4NuNVNLJJz2","BGPool");var n=cc.Class({name:"BGPool",properties:{bg:cc.SpriteFrame,bgcolor:cc.Color},ctor:function(){this.idx=0,this.initList=[],this.list=[]},init:function(){var e=cc.find("Canvas/root/bg");e.getComponent("cc.Sprite").spriteFrame=this.bg,e.enabled=!1,e.enabled=!0,cc.find("Canvas/Main Camera").getComponent("cc.Camera").backgroundColor=this.bgcolor,cc.log("bgc:"+this.bgcolor)}});t.exports=n,cc._RF.pop()},{}],BackPackUI:[function(e,t){"use strict";cc._RF.push(t,"96a192UeP9FDZ6jqVOqcUAs","BackPackUI");var n,a,i=[],o=[],s=[],r=999,c=999,l=[],h=[],u=[],p="hero";cc.Class({extends:cc.Component,properties:{slotPrefab:{default:null,type:cc.Prefab},slotPrefabWeap:{default:null,type:cc.Prefab},scrollView:{default:null,type:cc.ScrollView},btnPre:cc.Node,btnNext:cc.Node},init:function(e){this.home=e},addHeroSlot:function(e){var t=cc.instantiate(this.slotPrefab);this.scrollView.content.addChild(t),t.getComponent("HeroSlot").updateHeroslot(i[e].genes),t.getComponent("HeroSlot").refresh(i[e]);var n=new cc.Component.EventHandler;return n.target=this.node,n.component="BackPackUI",n.handler="onClickItem",n.customEventData={index:e},t.getComponent("HeroSlot").dbbutton.clickEvents.push(n),t},onClickItem:function(e,t){e.target;var n=t.index,a=cc.find("Canvas/heroPanel");a.getChildByName("hero01").getComponent("hero").updateHero(i[n]),a.getComponent("heroPanelUI").updatePanelDate(i[n]),a.getComponent("PanelUI").show(),a.getChildByName("btnPanDefi").active=!1,a.getChildByName("btnPanSwap").active=!1,a.getChildByName("btnPanMine").active=!0,cc.find("Canvas/heroPanel/info/nftprice").active=!0},addWeapSlot:function(e){var t=cc.instantiate(this.slotPrefabWeap);this.scrollView.content.addChild(t),t.getComponent("WeapSlot").updateWeapslot(l[e].genes),t.getComponent("WeapSlot").refresh(l[e]);var n=new cc.Component.EventHandler;return n.target=this.node,n.component="BackPackUI",n.handler="onClickWeap",n.customEventData={index:e},t.getComponent("WeapSlot").dbbutton.clickEvents.push(n),t},onClickWeap:function(e,t){e.target;var n=t.index,a=cc.find("Canvas/weapPanel");a.getChildByName("swordMax").getComponent("swordMax").updateWeap(l[n]),a.getComponent("weapPanelUI").updatePanelDate(l[n]),a.getComponent("PanelUI").show(),a.getChildByName("btnPanDefi").active=!1,a.getChildByName("btnPanSwap").active=!1,a.getChildByName("btnPanMine").active=!0,cc.find("Canvas/weapPanel/info/nftprice").active=!0},show:function(){if(cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/weapPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/Shop").getComponent("ShopUI").hide(),cc.find("Canvas/defiPanel").getComponent("DefiUI").hide(),cc.find("Canvas/riskPanel").getComponent("RiskUI").hide(),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").hide(),cc.find("Canvas/backPack/tab/tab_hero").active=!0,cc.find("Canvas/backPack/tab/tab_weap").active=!0,cc.find("Canvas/weapPanel/btnPanMine/btn_equip").active=!1,cc.find("Canvas/backPack/tab/tab_hero/btn_herotype_on").active=!0,cc.find("Canvas/backPack/tab/tab_hero/btn_herotype_off").active=!1,cc.find("Canvas/backPack/tab/tab_weap/btn_weaptype_on").active=!1,cc.find("Canvas/backPack/tab/tab_weap/btn_weaptype_off").active=!0,p="hero",this.myheroSlots)for(var e=0;e<this.myheroSlots.length;++e)this.myheroSlots[e].destroy();var t=cc.sys.localStorage.getItem("HeroData");t&&(o=JSON.parse(t),s=o),n=1,a=parseInt(s.length/36)+1,999!=r&&this.selectCate(this,r),i=s.slice(0,36),this.checkPage(),this.myheroSlots=[];for(var c=0;c<i.length;++c)if(null!=i[c]){var l=this.addHeroSlot(c);this.myheroSlots.push(l)}this.node.active=!0,this.node.emit("fade-in"),this.home.toggleHomeBtns(!1)},turnType:function(e,t){if(cc.find("Canvas/backPack/catePan/all").getComponent(cc.Toggle).isChecked=!0,cc.find("Canvas/backPack/sortPan/nftup").getComponent(cc.Toggle).isChecked=!0,this.myheroSlots)for(var d=0;d<this.myheroSlots.length;++d)this.myheroSlots[d].destroy();var f;if(this.myheroSlots=[],r=999,c=999,"weap"==t){cc.find("Canvas/backPack/tab/tab_hero/btn_herotype_on").active=!1,cc.find("Canvas/backPack/tab/tab_hero/btn_herotype_off").active=!0,cc.find("Canvas/backPack/tab/tab_weap/btn_weaptype_on").active=!0,cc.find("Canvas/backPack/tab/tab_weap/btn_weaptype_off").active=!1,p="weap",(f=cc.sys.localStorage.getItem("WeapData"))&&(h=JSON.parse(f),u=h),n=1,a=parseInt(u.length/36)+1,999!=r&&this.selectCate(this,r),l=u.slice(0,36),this.checkPage();for(var m=0;m<l.length;++m)if(null!=l[m]){var g=this.addWeapSlot(m);this.myheroSlots.push(g)}}else{cc.find("Canvas/backPack/tab/tab_hero/btn_herotype_on").active=!0,cc.find("Canvas/backPack/tab/tab_hero/btn_herotype_off").active=!1,cc.find("Canvas/backPack/tab/tab_weap/btn_weaptype_on").active=!1,cc.find("Canvas/backPack/tab/tab_weap/btn_weaptype_off").active=!0,p="hero",(f=cc.sys.localStorage.getItem("HeroData"))&&(o=JSON.parse(f),s=o),n=1,a=parseInt(s.length/36)+1,999!=r&&this.selectCate(this,r),i=s.slice(0,36),this.checkPage();for(var v=0;v<i.length;++v)if(null!=i[v]){var b=this.addHeroSlot(v);this.myheroSlots.push(b)}}this.node.active=!0,this.node.emit("fade-in"),this.home.toggleHomeBtns(!1)},hide:function(){if(cc.find("Canvas/backPack/catePan/all").getComponent(cc.Toggle).isChecked=!0,cc.find("Canvas/backPack/sortPan/nftup").getComponent(cc.Toggle).isChecked=!0,this.myheroSlots)for(var e=0;e<this.myheroSlots.length;++e)this.myheroSlots[e].destroy();this.node.emit("fade-out"),this.home.toggleHomeBtns(!0)},checkPage:function(){this.btnPre.active=n>1,this.btnNext.active=a>n},goToNext:function(){for(var e=0;e<this.myheroSlots.length;++e)this.myheroSlots[e].destroy();if(n+=1,this.checkPage(),this.myheroSlots=[],"hero"==p){i=s.slice(36*(n-1),36*n);for(var t=0;t<i.length;++t){var a=this.addHeroSlot(t);this.myheroSlots.push(a)}}else if("weap"==p){l=u.slice(36*(n-1),36*n);for(var o=0;o<l.length;++o){var r=this.addWeapSlot(o);this.myheroSlots.push(r)}}},goToPre:function(){for(var e=0;e<this.myheroSlots.length;++e)this.myheroSlots[e].destroy();if(n-=1,this.checkPage(),this.myheroSlots=[],"hero"==p){i=s.slice(36*(n-1),36*n);for(var t=0;t<i.length;++t){var a=this.addHeroSlot(t);this.myheroSlots.push(a)}}else if("weap"==p){l=u.slice(36*(n-1),36*n);for(var o=0;o<l.length;++o){var r=this.addWeapSlot(o);this.myheroSlots.push(r)}}},selectCate:function(e,t){if(r!=t){r=t;for(var d=0;d<this.myheroSlots.length;++d)this.myheroSlots[d].destroy();if(n=1,this.myheroSlots=[],"hero"==p){s=999==t?o:o.filter(function(e){return e.category==t}),999!=c&&this.sortDate(this,c),a=parseInt(s.length/36)+1,i=s.slice(0,36);for(var f=0;f<i.length;++f){var m=this.addHeroSlot(f);this.myheroSlots.push(m)}}else{u=999==t?h:h.filter(function(e){return e.category==t}),999!=c&&this.sortDate(this,c),a=parseInt(u.length/36)+1,l=u.slice(0,36);for(var g=0;g<l.length;++g){var v=this.addWeapSlot(g);this.myheroSlots.push(v)}}this.checkPage()}},sortDate:function(e,t){if(c!=t){c=t;for(var a=0;a<this.myheroSlots.length;++a)this.myheroSlots[a].destroy();if(n=1,this.myheroSlots=[],"hero"==p){s=1==t?s.sort(function(e,t){return parseFloat(e.nft_value)-parseFloat(t.nft_value)}):s.sort(function(e,t){return parseFloat(e.nft_value)-parseFloat(t.nft_value)}).reverse(),i=s.slice(0,36);for(var o=0;o<i.length;++o){var r=this.addHeroSlot(o);this.myheroSlots.push(r)}}else{u=1==t?u.sort(function(e,t){return parseFloat(e.nft_value)-parseFloat(t.nft_value)}):u.sort(function(e,t){return parseFloat(e.nft_value)-parseFloat(t.nft_value)}).reverse(),l=u.slice(0,36);for(var h=0;h<l.length;++h){var d=this.addWeapSlot(h);this.myheroSlots.push(d)}}this.checkPage()}}}),cc._RF.pop()},{}],BossMng:[function(e,t){"use strict";cc._RF.push(t,"af14cbY2OJFKb7mH92ncVxo","BossMng");var n=e("Types").BossType,a=e("Spawn");cc.Class({extends:cc.Component,properties:{demonSpawn:a},init:function(e){this.game=e,this.waveMng=e.waveMng,this.bossIdx=0},startBoss:function(){this.bossIdx===n.Demon&&this.waveMng.startBossSpawn(this.demonSpawn)},endBoss:function(){this.bossIdx++}}),cc._RF.pop()},{Spawn:"Spawn",Types:"Types"}],BossProgress:[function(e,t){"use strict";cc._RF.push(t,"178aaufFWBMjKEMUnBNqyHl","BossProgress"),cc.Class({extends:cc.Component,properties:{fxParticle:cc.ParticleSystem,anim:cc.Animation},init:function(e){this.waveMng=e},show:function(){this.node.active=!0,this.anim.play("turn-red")},hide:function(){this.node.active=!1},showParticle:function(){this.fxParticle.resetSystem()}}),cc._RF.pop()},{}],BoxUI:[function(e,t){"use strict";cc._RF.push(t,"76f1exaIYhOronEFJ+o5VaQ","BoxUI");var n=[],a=[],i="hero";e("ChargeUI"),cc.Class({extends:cc.Component,properties:{anim:cc.Animation,figure:cc.Sprite,btnsNode:cc.Node,boxPrefab:{default:null,type:cc.Prefab},scrollView:{default:null,type:cc.ScrollView}},init:function(e,t){this.home=e,this.node.active=!1,this.panelType=t,this.figure.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1,1,.96),cc.scaleTo(1,1,1))))},addHeroBox:function(e){var t=cc.instantiate(this.boxPrefab);this.scrollView.content.addChild(t),t.getChildByName("id").getComponent(cc.Label).string=n[e].bid;var a=Math.round((new Date).getTime()/1e3);n[e].buytime+8>a&&(t.color=cc.color(60,60,60));var i=new cc.Component.EventHandler;return i.target=this.node,i.component="BoxUI",i.handler="onClickItem",i.customEventData={type:"hero",index:e},t.getChildByName("btn_box").getComponent(cc.Button).clickEvents.push(i),t},addWeapBox:function(e){var t=cc.instantiate(this.boxPrefab);this.scrollView.content.addChild(t),t.getChildByName("id").getComponent(cc.Label).string=a[e].bid;var n=Math.round((new Date).getTime()/1e3);a[e].buytime+8>n&&(t.color=cc.color(60,60,60));var i=new cc.Component.EventHandler;return i.target=this.node,i.component="BoxUI",i.handler="onClickItem",i.customEventData={type:"weap",index:e},t.getChildByName("btn_box").getComponent(cc.Button).clickEvents.push(i),t},onClickItem:function(e,t){e.target,this.anim.play("box_open");var n=t.type,a=t.index;cc.find("CCC").getComponent("CCCManager").openbox(this,n,a)},show:function(){cc.find("Canvas/Box/bot_frame/tab/btn_herotype_on").active=!0,cc.find("Canvas/Box/bot_frame/tab/btn_herotype_off").active=!1,cc.find("Canvas/Box/bot_frame/tab/btn_weaptype_on").active=!1,cc.find("Canvas/Box/bot_frame/tab/btn_weaptype_off").active=!0,i="hero";var e=cc.sys.localStorage.getItem("HeroBoxData");e&&(n=JSON.parse(e)),this.heroBoxs=[];for(var t=0;t<n.length;++t){var a=this.addHeroBox(t);this.heroBoxs.push(a)}this.node.active=!0,this.anim.play("box_intro"),this.home.toggleHomeBtns(!1),this.onFinishShow()},turnType:function(e,t){for(var o=0;o<this.heroBoxs.length;++o)this.heroBoxs[o].destroy();var s;if(this.heroBoxs=[],"weap"==t){cc.find("Canvas/Box/bot_frame/tab/btn_herotype_on").active=!1,cc.find("Canvas/Box/bot_frame/tab/btn_herotype_off").active=!0,cc.find("Canvas/Box/bot_frame/tab/btn_weaptype_on").active=!0,cc.find("Canvas/Box/bot_frame/tab/btn_weaptype_off").active=!1,cc.find("Canvas/Box/bot_frame/tab/tip").active=!1,i="weap",(s=cc.sys.localStorage.getItem("WeapBoxData"))&&(a=JSON.parse(s));for(var r=0;r<a.length;++r){var c=this.addWeapBox(r);this.heroBoxs.push(c)}}else{cc.find("Canvas/Box/bot_frame/tab/btn_herotype_on").active=!0,cc.find("Canvas/Box/bot_frame/tab/btn_herotype_off").active=!1,cc.find("Canvas/Box/bot_frame/tab/btn_weaptype_on").active=!1,cc.find("Canvas/Box/bot_frame/tab/btn_weaptype_off").active=!0,i="hero",(s=cc.sys.localStorage.getItem("HeroBoxData"))&&(n=JSON.parse(s));for(var l=0;l<n.length;++l){var h=this.addHeroBox(l);this.heroBoxs.push(h)}}this.node.active=!0,this.anim.play("box_intro"),this.home.toggleHomeBtns(!1),this.onFinishShow()},onpenAll:function(){cc.find("CCC").getComponent("CCCManager").openbox(this,i,999)},hide:function(){for(var e=0;e<this.heroBoxs.length;++e)this.heroBoxs[e].destroy();this.anim.play("box_outro"),this.scheduleOnce(function(){this.anim.play("box_reset"),this.onFinishHide()}.bind(this),.6),this.home.toggleHomeBtns(!0)},onFinishShow:function(){this.home.curPanel=this.panelType},onFinishHide:function(){this.node.active=!1}}),cc._RF.pop()},{ChargeUI:"ChargeUI"}],BulletScreen:[function(e,t){"use strict";var n;cc._RF.push(t,"358e7ZmVohJALgMv/z2A8Ro","BulletScreen");var a=[];cc.Class(((n={extends:cc.Component,properties:{bulletPrefab:cc.Prefab},onLoad:function(){this.node.width=cc.Canvas.instance.node.width,this.node.height=cc.Canvas.instance.node.height;var e=cc.sys.localStorage.getItem("Bullets");e&&(a=JSON.parse(e)),this.bulletsArray=[]},start:function(){var e=parseInt(cc.sys.localStorage.getItem("curStage"))+1;cc.find("CCC").getComponent("CCCManager").schedule(function(){cc.find("CCC").getComponent("CCCManager").handleGetComments(e);var t=cc.sys.localStorage.getItem("Bullets");t&&(a=JSON.parse(t))},17)},spawnBullets:function(){for(var e=Math.round(4*Math.random()),t=0;t<e;t++){var n=cc.instantiate(this.bulletPrefab);this.bulletsArray.push(n),this.node.addChild(n),n.x=1.5*this.node.width,n.getComponent(cc.Label).string=this.randomContent(),n.color=this.randomColor(),n.speed=this.randomSpeed(),n.y=this.randomStartPosY()}},randomColor:function(){var e=Math.round(255*Math.random()),t=Math.round(255*Math.random()),n=Math.round(255*Math.random());return new cc.Color(e,t,n)},randomContent:function(){var e=Math.round(Math.random()*(a.length-1));return a[e].comment},randomSpeed:function(){return Math.round(100*Math.random())+50},randomStartPosY:function(){var e=this.node.height;return Math.round(Math.random()*e*.2)+.7*e}}).start=function(){var e=parseInt(cc.sys.localStorage.getItem("curStage"))+1;cc.find("CCC").getComponent("CCCManager").schedule(function(){cc.find("CCC").getComponent("CCCManager").handleGetComments(e);var t=cc.sys.localStorage.getItem("Bullets");t&&(a=JSON.parse(t))},17)},n.update=function(e){for(var t=[],n=0;n<this.bulletsArray.length;n++)this.bulletsArray[n].x-=e*this.bulletsArray[n].speed,this.bulletsArray[n].x<=-(this.node.width/2+this.bulletsArray[n].width)&&(this.bulletsArray[n].removeFromParent(),t.push(n));for(var a=0;a<t.length;a++)this.bulletsArray.splice(t[a],1);0==this.bulletsArray.length&&Math.random()>.99&&this.spawnBullets()},n)),cc._RF.pop()},{}],ButtonScaler1:[function(e,t){"use strict";cc._RF.push(t,"d7564Cn9+NOM6YfHHX7zsyO","ButtonScaler1"),cc.Class({extends:cc.Component,properties:{pressedScale:1,transDuration:0},onLoad:function(){var e=this;function t(){this.stopAllActions(),this.runAction(e.scaleUpAction)}e.initScale=this.node.scale,e.button=e.getComponent(cc.Button),e.scaleDownAction=cc.scaleTo(e.transDuration,e.pressedScale),e.scaleUpAction=cc.scaleTo(e.transDuration,e.initScale),this.node.on("touchstart",function(){this.stopAllActions(),this.runAction(e.scaleDownAction)},this.node),this.node.on("touchend",t,this.node),this.node.on("touchcancel",t,this.node)}}),cc._RF.pop()},{}],ButtonScaler:[function(e,t){"use strict";cc._RF.push(t,"f5d10E3oQ9G/LlvNZly0S2Y","ButtonScaler"),cc.Class({extends:cc.Component,properties:{pressedScale:1,transDuration:0},onLoad:function(){var e=this;function t(){this.stopAllActions(),this.runAction(e.scaleUpAction)}e.initScale=this.node.scale,e.button=e.getComponent(cc.Button),e.scaleDownAction=cc.scaleTo(e.transDuration,e.pressedScale),e.scaleUpAction=cc.scaleTo(e.transDuration,e.initScale),this.node.on("touchstart",function(){this.stopAllActions(),this.runAction(e.scaleDownAction)},this.node),this.node.on("touchend",t,this.node),this.node.on("touchcancel",t,this.node)}}),cc._RF.pop()},{}],CCCManager:[function(e,t){"use strict";function n(e,t,n,a,i,o,s){try{var r=e[o](s),c=r.value}catch(l){return void n(l)}r.done?t(c):Promise.resolve(c).then(a,i)}function a(e){return function(){var t=this,a=arguments;return new Promise(function(i,o){var s=e.apply(t,a);function r(e){n(s,i,o,r,c,"next",e)}function c(e){n(s,i,o,r,c,"throw",e)}r(void 0)})}}cc._RF.push(t,"72e40WwrEpCnp9JEcfhaHos","CCCManager"),ScatterJS.plugins(new ScatterEOS),e("async");var i,o,s,r,c,l,h,u,p,d,f,m={blockchain:"eos",protocol:"https",host:"eos.greymass.com",port:"443",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},g=null,v={name:"eosio.null",eosToken:"0.0000 EOS",cccToken:"0.0000 CCC"},b={poolToken:"0.0001",defiToken:"0.0001",configs:null,userList:null,poolConfig:null,wh_ratio:null,drtotalpower2:null,userpower2:null,bal_ratio:null,ccc_price:null,players:null},C=["eospush.tokenpocket.pro","api.eosflare.io","eos.greymass.com","api-mainnet.starteos.io","api.eosn.io","api.eossweden.se"],y=null,S=[],_=[],w=[],P=[],x=[];cc.Class({extends:cc.Component,properties:{upperNode:cc.Node,setPanelNode:cc.Node},onLoad:function(){},start:function(){var e=cc.sys.localStorage.getItem("network");if(e){m=JSON.parse(e);var t="toggle"+(C.indexOf(m.host)+1).toString();this.setPanelNode.getChildByName("content").getChildByName("item2").getChildByName("ToggleContainer").getChildByName(t).getComponent(cc.Toggle).isChecked=!0}var n=cc.sys.localStorage.getItem("userData");n&&(v=JSON.parse(n)),this.setUserData(v);var a=cc.sys.localStorage.getItem("poolData");a&&(b=JSON.parse(a));var i=cc.sys.localStorage.getItem("MsgData");i&&(f=JSON.parse(i),cc.find("CCC/upper/message").getComponent("message").setMsg(f)),this.login(),this.getChainData(),this.getChainData2(),this.getChainData3(),this.getComponent("CCCManager").schedule(function(){this.getChainData()},17),this.getComponent("CCCManager").schedule(function(){this.getChainData2()},27),this.getComponent("CCCManager").schedule(function(){this.getChainData3()},37);var o=0;this.getComponent("CCCManager").schedule(function(){o%3==0?this.getChainData():o%3==1?this.getChainData2():o%3==2&&this.getChainData3(),o++},8),this.getComponent("CCCManager").schedule(function(){cc.sys.localStorage.setItem("userData",JSON.stringify(v)),cc.sys.localStorage.setItem("poolData",JSON.stringify(b))},25),this.getComponent("CCCManager").schedule(function(){0==this.PlayGame&&this.setUserData(v)},8);var s=Math.round((new Date).getTime()/1e3),r=cc.find("Canvas/tipPanel");1638363600-s>0&&r.getComponent("TipPanelUI").show(this,10)},getRequest:function(){var e=location.search,t=new Object;if(-1!=e.indexOf("?"))for(var n=e.substr(1).split("&"),a=0;a<n.length;a++)t[n[a].split("=")[0]]=unescape(n[a].split("=")[1]);return t},setPlayGame:function(e){this.PlayGame=e},setUserData:function(e){if(this.upperNode.getChildByName("status_name").getChildByName("userName").getComponent(cc.Label).string=e.name,this.upperNode.getChildByName("status_eos").getChildByName("num").getComponent(cc.Label).string=e.eosToken,this.upperNode.getChildByName("status_ccc").getChildByName("num").getComponent(cc.Label).string=e.cccToken,y){var t=cc.find("Canvas/tipPanel");0==y.status&&0==t.active&&t.getComponent("TipPanelUI").show(this,3),cc.find("Canvas/Home/btn_buybox1/title").getComponent(cc.Label).string=S[0],cc.find("Canvas/Home/btn_buybox5/title").getComponent(cc.Label).string=S[5],cc.find("Canvas/Home/home_box/id").getComponent(cc.Label).string=y.currentbid}},login:function(){ScatterJS.scatter.connect("cryptocycle").then(function(e){e?(console.log("connected to scatter."),o=ScatterJS.scatter,s={accounts:[m]},o.getIdentity(s).then(function(){i=o.identity.accounts[0],v.name=i.name,r={expireInSeconds:60},g=o.eos(m,Eos,r)}).catch(function(e){console.log("connect to scatter failed."),console.log(e)})):console.log("connect to scatter failed.")})},getChainData:function(){this.handleGetBalance(),this.handleGetBox(),this.handleGetHero(),this.scheduleOnce(function(){this.handleGetSwapHero(),this.handleGetSwapPair()}.bind(this),1)},getChainData2:function(){this.handleGetDefiData(),this.handleGetDefiNFT(),this.handleGetPlayers()},getChainData3:function(){this.handleGetPoolBalance(),this.handleGetPoolData(),this.handleGetMsg()},getCurrencyBalance:function(e,t){var n=this;return a(regeneratorRuntime.mark(function a(){var i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(i={code:e.code,symbol:e.coin,account:e.account||v.name},g){a.next=4;break}return a.next=4,n.login();case 4:g.getCurrencyBalance(i).then(function(e){e&&t(e[0])}).catch(function(){});case 5:case"end":return a.stop()}},a)}))()},handleGetBalance:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=4;break}return t.next=3,e.login();case 3:return t.abrupt("return");case 4:return t.prev=5,t.next=8,g.getCurrencyBalance("eosio.token",v.name,"EOS");case 8:return n=t.sent,v.eosToken=n[0]?parseFloat(n[0]):0,t.next=12,g.getCurrencyBalance("eoscccdotcom",v.name,"CCC");case 12:return a=t.sent,v.cccToken=a[0]?parseFloat(a[0]):0,t.next=16,g.getTableRows({json:!0,code:"herobox.ccc",scope:"herobox.ccc",table:"sys",limit:1});case 16:i=t.sent,y=i.rows[0],e.calBoxPrice(),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(5),console.log(t.t0);case 24:case"end":return t.stop()}},t,null,[[5,21]])}))()},handleGetPoolBalance:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=4;break}return t.next=3,e.login();case 3:return t.abrupt("return");case 4:return t.prev=5,t.next=8,g.getCurrencyBalance("eoscccdotcom","cccdefi.ccc","CCC");case 8:return n=t.sent,b.defiToken=n[0]?parseFloat(n[0]):0,t.next=12,g.getCurrencyBalance("eoscccdotcom","cccpool.ccc","CCC");case 12:a=t.sent,b.poolToken=a[0]?parseFloat(a[0]):0,t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),console.log(t.t0);case 19:case"end":return t.stop()}},t,null,[[5,16]])}))()},handleGetPoolData:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,a,i,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=4;break}return t.next=3,e.login();case 3:return t.abrupt("return");case 4:return t.prev=5,t.next=8,g.getTableRows({json:!0,code:"cccdefi.ccc",scope:"cccdefi.ccc",table:"configs",limit:1});case 8:return n=t.sent,b.configs=n.rows[0],0==(a=b.configs.weaponspower)&&(a=1),b.configs&&(b.wh_ratio=b.configs.herospower/(5*a),b.drtotalpower2=b.configs.herospower+b.configs.weaponspower*b.wh_ratio),t.next=17,g.getTableRows({json:!0,code:"cccdefi.ccc",scope:"cccdefi.ccc",table:"lists",lower_bound:v.name,upper_bound:v.name,limit:1});case 17:return i=t.sent,b.userList=i.rows[0],b.userList&&b.wh_ratio&&(b.userpower2=b.userList.herospower+b.userList.weaponspower*b.wh_ratio,b.bal_ratio=b.userpower2/b.drtotalpower2),t.next=23,g.getTableRows({json:!0,code:"cccpool.ccc",scope:"cccpool.ccc",table:"config",limit:1});case 23:return o=t.sent,b.poolConfig=o.rows[0],t.next=27,g.getTableRows({json:!0,code:"swap.ccc",scope:"swap.ccc",table:"pairs",limit:1});case 27:s=t.sent,b.ccc_price=parseFloat(s.rows[0].reserve0)/parseFloat(s.rows[0].reserve1),t.next=34;break;case 31:t.prev=31,t.t0=t.catch(5),console.log(t.t0);case 34:case"end":return t.stop()}},t,null,[[5,31]])}))()},handleGetBox:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=4;break}return t.next=3,e.login();case 3:return t.abrupt("return");case 4:return t.prev=5,t.next=8,g.getTableRows({json:!0,code:"herobox.ccc",scope:v.name,table:"boxs",limit:100});case 8:return n=t.sent,t.next=11,g.getTableRows({json:!0,code:"weapbox.ccc",scope:v.name,table:"boxs",limit:100});case 11:a=t.sent,_=n.rows,w=a.rows,cc.sys.localStorage.setItem("HeroBoxData",JSON.stringify(_)),cc.sys.localStorage.setItem("WeapBoxData",JSON.stringify(w)),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(5),console.log(t.t0);case 21:case"end":return t.stop()}},t,null,[[5,18]])}))()},handleGetNewHero:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,a,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=4;break}return t.next=3,e.login();case 3:return t.abrupt("return");case 4:return t.prev=5,t.next=8,g.getTableRows({json:!0,code:"htoken.ccc",scope:"htoken.ccc",table:"tokens",index_position:"3",key_type:"i64",lower_bound:v.name,upper_bound:v.name,limit:1,reverse:!0,scopeToUint:!1});case 8:n=t.sent,a=n.rows[0],i=cc.sys.localStorage.getItem("swapPairData"),null!=(c=JSON.parse(i))[0].reserve0&&(a.price=e.calSellHeroPrice("hero",a.nft_value)),(o=cc.find("Canvas/heroPanel")).getChildByName("hero01").getComponent("hero").updateHero(a),o.getComponent("heroPanelUI").updatePanelDate(a),o.getComponent("PanelUI").show(),o.getChildByName("btnPanSwap").active=!1,o.getChildByName("btnPanMine").active=!0,t.next=24;break;case 21:t.prev=21,t.t0=t.catch(5),console.log(t.t0);case 24:case"end":return t.stop()}},t,null,[[5,21]])}))()},handleGetNewWeap:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,a,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=4;break}return t.next=3,e.login();case 3:return t.abrupt("return");case 4:return t.prev=5,t.next=8,g.getTableRows({json:!0,code:"wtoken.ccc",scope:"wtoken.ccc",table:"tokens",index_position:"3",key_type:"i64",lower_bound:v.name,upper_bound:v.name,limit:1,reverse:!0,scopeToUint:!1});case 8:n=t.sent,a=n.rows[0],i=cc.sys.localStorage.getItem("swapPairData"),null!=(c=JSON.parse(i))[1].reserve0&&(a.price=e.calSellHeroPrice("weap",a.nft_value)),(o=cc.find("Canvas/weapPanel")).getChildByName("swordMax").getComponent("swordMax").updateWeap(a),o.getComponent("weapPanelUI").updatePanelDate(a),o.getComponent("PanelUI").show(),o.getChildByName("btnPanSwap").active=!1,o.getChildByName("btnPanMine").active=!0,t.next=24;break;case 21:t.prev=21,t.t0=t.catch(5),console.log(t.t0);case 24:case"end":return t.stop()}},t,null,[[5,21]])}))()},handleGetIDHero:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var a,i,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(g){n.next=4;break}return n.next=3,t.login();case 3:return n.abrupt("return");case 4:return n.prev=5,n.next=8,g.getTableRows({json:!0,code:"htoken.ccc",scope:"htoken.ccc",table:"tokens",index_position:"1",lower_bound:e,upper_bound:e,limit:1,reverse:!0,scopeToUint:!1});case 8:a=n.sent,i=a.rows[0],o=cc.sys.localStorage.getItem("swapPairData"),null!=(c=JSON.parse(o))[0].reserve0&&(i.price=t.calSellHeroPrice("hero",i.nft_value)),(s=cc.find("Canvas/heroPanel")).getChildByName("hero01").getComponent("hero").updateHero(i),s.getComponent("heroPanelUI").updatePanelDate(i),s.getComponent("PanelUI").show(),n.next=22;break;case 19:n.prev=19,n.t0=n.catch(5),console.log(n.t0);case 22:case"end":return n.stop()}},n,null,[[5,19]])}))()},handleGetIDWeap:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var a,i,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(g){n.next=4;break}return n.next=3,t.login();case 3:return n.abrupt("return");case 4:return n.prev=5,n.next=8,g.getTableRows({json:!0,code:"wtoken.ccc",scope:"wtoken.ccc",table:"tokens",index_position:"1",lower_bound:e,upper_bound:e,limit:1,reverse:!0,scopeToUint:!1});case 8:a=n.sent,i=a.rows[0],o=cc.sys.localStorage.getItem("swapPairData"),null!=(c=JSON.parse(o))[1].reserve0&&(i.price=t.calSellHeroPrice("weap",i.nft_value)),(s=cc.find("Canvas/weapPanel")).getChildByName("swordMax").getComponent("swordMax").updateWeap(i),s.getComponent("weapPanelUI").updatePanelDate(i),s.getComponent("PanelUI").show(),n.next=22;break;case 19:n.prev=19,n.t0=n.catch(5),console.log(n.t0);case 22:case"end":return n.stop()}},n,null,[[5,19]])}))()},handleGetID:function(e,t){var n=this;return a(regeneratorRuntime.mark(function a(){var i,o,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(g){a.next=4;break}return a.next=3,n.login();case 3:return a.abrupt("return");case 4:return i="htoken.ccc","weapon"==e&&(i="wtoken.ccc"),a.prev=7,a.next=10,g.getTableRows({json:!0,code:i,scope:i,table:"tokens",index_position:"1",lower_bound:t,upper_bound:t,limit:1,reverse:!0,scopeToUint:!1});case 10:return o=a.sent,s=o.rows[0],a.abrupt("return",s);case 15:a.prev=15,a.t0=a.catch(7),console.log(a.t0);case 18:case"end":return a.stop()}},a,null,[[7,15]])}))()},handleGetHero:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=4;break}return t.next=3,e.login();case 3:return t.abrupt("return");case 4:return t.prev=5,t.next=8,g.getTableRows({json:!0,code:"htoken.ccc",scope:"htoken.ccc",table:"tokens",index_position:"3",key_type:"i64",lower_bound:v.name,upper_bound:v.name,limit:1e3,reverse:!1,scopeToUint:!1});case 8:return n=t.sent,P=n.rows,t.next=12,g.getTableRows({json:!0,code:"wtoken.ccc",scope:"wtoken.ccc",table:"tokens",index_position:"3",key_type:"i64",lower_bound:v.name,upper_bound:v.name,limit:1e3,reverse:!1,scopeToUint:!1});case 12:a=t.sent,x=a.rows,i=cc.sys.localStorage.getItem("swapPairData"),null!=(c=JSON.parse(i))[0].reserve0&&P.forEach(function(t){t.price=e.calSellHeroPrice("hero",t.nft_value)}),null!=c[1].reserve0&&x.forEach(function(t){t.price=e.calSellHeroPrice("weap",t.nft_value)}),cc.sys.localStorage.setItem("HeroData",JSON.stringify(P)),cc.sys.localStorage.setItem("WeapData",JSON.stringify(x)),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(5),console.log(t.t0);case 27:case"end":return t.stop()}},t,null,[[5,24]])}))()},handleGetSwapHero:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=4;break}return t.next=3,e.login();case 3:return t.abrupt("return");case 4:return t.prev=5,t.next=8,g.getTableRows({json:!0,code:"htoken.ccc",scope:"htoken.ccc",table:"tokens",index_position:"3",key_type:"i64",lower_bound:"nftswap.ccc",upper_bound:"nftswap.ccc",limit:1e3,reverse:!1,scopeToUint:!1});case 8:return n=t.sent,l=n.rows,t.next=12,g.getTableRows({json:!0,code:"wtoken.ccc",scope:"wtoken.ccc",table:"tokens",index_position:"3",key_type:"i64",lower_bound:"nftswap.ccc",upper_bound:"nftswap.ccc",limit:1e3,reverse:!1,scopeToUint:!1});case 12:a=t.sent,h=a.rows,i=cc.sys.localStorage.getItem("swapPairData"),null!=(c=JSON.parse(i))[0].reserve0&&l.forEach(function(t){t.price=e.calHeroPrice("hero",t.nft_value)}),null!=c[1].reserve0&&h.forEach(function(t){t.price=e.calHeroPrice("weap",t.nft_value)}),cc.sys.localStorage.setItem("swapHeroData",JSON.stringify(l)),cc.sys.localStorage.setItem("swapWeapData",JSON.stringify(h)),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(5),console.log(t.t0);case 27:case"end":return t.stop()}},t,null,[[5,24]])}))()},handleGetSwapPair:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=4;break}return t.next=3,e.login();case 3:return t.abrupt("return");case 4:return t.prev=5,t.next=8,g.getTableRows({json:!0,code:"nftswap.ccc",scope:"nftswap.ccc",table:"pairs",lower_bound:1,upper_bound:2,limit:2});case 8:n=t.sent,c=n.rows,cc.sys.localStorage.setItem("swapPairData",JSON.stringify(c)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),console.log(t.t0);case 16:case"end":return t.stop()}},t,null,[[5,13]])}))()},handleGetDefiData:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=4;break}return t.next=3,e.login();case 3:return t.abrupt("return");case 4:return t.prev=5,t.next=8,g.getTableRows({json:!0,code:"cccdefi.ccc",scope:v.name,table:"stakes",limit:3,reverse:!1});case 8:n=t.sent,u=n.rows,a=cc.sys.localStorage.getItem("cccDefiHero"),i=cc.sys.localStorage.getItem("cccDefiWeap"),p=JSON.parse(a),d=JSON.parse(i),u.forEach(function(e){if(null!=e.hid&&0!=e.hid){var t=p.filter(function(t){return t.id==e.hid});null!=t&&(e.hero=t)}if(null!=e.wid&&0!=e.wid){var n=d.filter(function(t){return t.id==e.wid});null!=n&&(e.weapon=n)}}),cc.sys.localStorage.setItem("userDefiData",JSON.stringify(u)),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(5),console.log(t.t0);case 21:case"end":return t.stop()}},t,null,[[5,18]])}))()},handleGetDefiNFT:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=4;break}return t.next=3,e.login();case 3:return t.abrupt("return");case 4:return t.prev=5,t.next=8,g.getTableRows({json:!0,code:"htoken.ccc",scope:"htoken.ccc",table:"tokens",index_position:"3",key_type:"i64",lower_bound:"cccdefi.ccc",upper_bound:"cccdefi.ccc",limit:1e3,reverse:!1,scopeToUint:!1});case 8:return n=t.sent,t.next=11,g.getTableRows({json:!0,code:"wtoken.ccc",scope:"wtoken.ccc",table:"tokens",index_position:"3",key_type:"i64",lower_bound:"cccdefi.ccc",upper_bound:"cccdefi.ccc",limit:1e3,reverse:!1,scopeToUint:!1});case 11:a=t.sent,p=n.rows,d=a.rows,null!=c[0].reserve0&&p.forEach(function(t){t.price=e.calSellHeroPrice("hero",t.nft_value)}),null!=c[1].reserve0&&d.forEach(function(t){t.price=e.calSellHeroPrice("weap",t.nft_value)}),cc.sys.localStorage.setItem("cccDefiHero",JSON.stringify(p)),cc.sys.localStorage.setItem("cccDefiWeap",JSON.stringify(d)),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(5),console.log(t.t0);case 27:case"end":return t.stop()}},t,null,[[5,24]])}))()},handleGetPlayers:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=4;break}return t.next=3,e.login();case 3:return t.abrupt("return");case 4:return t.prev=5,t.next=8,g.getTableRows({json:!0,code:"weapbox.ccc",scope:"weapbox.ccc",table:"players",lower_bound:v.name,upper_bound:v.name,limit:1});case 8:n=t.sent,b.players=n.rows,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),console.log(t.t0);case 15:case"end":return t.stop()}},t,null,[[5,12]])}))()},handleGetMsg:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,a,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=4;break}return t.next=3,e.login();case 3:return t.abrupt("return");case 4:return t.prev=5,t.next=8,g.getTableRows({json:!0,code:"cccdefi.ccc",scope:"cccdefi.ccc",table:"messages",limit:10,reverse:!0});case 8:n=t.sent,a=n.rows,i=[],a.forEach(function(e){i.push(e.message)}),o=cc.sys.localStorage.getItem("MsgData"),f=JSON.parse(o),i.length>=2&&i!=f&&(f=i,cc.find("CCC/upper/message").getComponent("message").setMsg(f),cc.sys.localStorage.setItem("MsgData",JSON.stringify(f))),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(5),console.log(t.t0);case 20:case"end":return t.stop()}},t,null,[[5,17]])}))()},handleGetComments:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var a,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(g){n.next=4;break}return n.next=3,t.login();case 3:return n.abrupt("return");case 4:return n.prev=5,n.next=8,g.getTableRows({json:!0,code:"weapbox.ccc",scope:e,table:"comments",limit:200});case 8:a=n.sent,i=a.rows,cc.sys.localStorage.setItem("Bullets",JSON.stringify(i)),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(5),console.log(n.t0);case 16:case"end":return n.stop()}},n,null,[[5,13]])}))()},calHeroPrice:function(e,t){var n,a;"hero"==e?(n=c[0].reserve1,a=c[0].reserve0):(n=c[1].reserve1,a=c[1].reserve0);var i=cc.sys.localStorage.getItem("swapPairData");c=JSON.parse(i);var o=parseFloat(a)*Math.pow(10,4),s=parseFloat(n)*Math.pow(10,4),r=parseFloat(t)*Math.pow(10,4);return(o*r/(s-r)*1e4/9910*1e4/9990/Math.pow(10,4)).toFixed(4)+" EOS"},calSellHeroPrice:function(e,t){var n,a;"hero"==e?(n=c[0].reserve1,a=c[0].reserve0):(n=c[1].reserve1,a=c[1].reserve0);var i=cc.sys.localStorage.getItem("swapPairData");c=JSON.parse(i);var o=parseFloat(n)*Math.pow(10,4),s=parseFloat(a)*Math.pow(10,4),r=parseFloat(t)*Math.pow(10,4);return(r*s/(o+r)*9910/1e4*9990/1e4/Math.pow(10,4)).toFixed(4)+" EOS"},calBoxPrice:function(){if(y)if(S=[],y.currentbid<5e3)S=["5.0000 EOS","5.0000 EOS","5.0000 EOS","5.0000 EOS","5.0000 EOS","25.0000 EOS"];else{for(var e=Math.round((new Date).getTime()/1e3),t=parseInt((e-y.lasttime)/y.attime),n=parseFloat(y.price)-y.increase*t/1e4,a=n<5?5:n,i=0,o=0;o<5;o++){i+=a;var s=this.formatnumber(a,4)+" EOS";if(S.push(s),console.log("bps:"+s),a+=.100001,4==o){var r=this.formatnumber(i,4)+" EOS";console.log("bpa:"+r),S.push(r)}}console.log("BoxPrice:"+S)}},buybox:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var a,i,o,s,r,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(0!=S.length){n.next=2;break}return n.abrupt("return");case 2:if(a="",i=t.getRequest(),(o=i.referral)&&(a=o),s=[],1==e)s=[{account:"eosio.token",name:"transfer",authorization:[{actor:v.name,permission:"active"}],data:{from:v.name,to:"herobox.ccc",quantity:S[0],memo:a}}];else for(r=0;r<5;r++)c={account:"eosio.token",name:"transfer",authorization:[{actor:v.name,permission:"active"}],data:{from:v.name,to:"herobox.ccc",quantity:S[r],memo:a}},s.push(c);return n.prev=10,n.next=13,g.transaction({actions:s});case 13:n.sent,t.handleGetBox(),t.scheduleOnce(function(){1==e?cc.find("Canvas/Home").getComponent("HomeUI").buyboxAnim.play("home_buybox1"):cc.find("Canvas/Home").getComponent("HomeUI").buyboxAnim.play("home_buybox5")}.bind(t),.5),t.scheduleOnce(function(){cc.find("Canvas/Home").getComponent("HomeUI").menuAnim.play("menu_intro"),cc.find("Canvas/Home").getComponent("HomeUI").boxtipNode=cc.find("Canvas/lower/main_btns/layout/btn_box/tip"),cc.find("Canvas/Home").getComponent("HomeUI").boxtipNode.active=!0}.bind(t),5.5),n.next=25;break;case 19:n.prev=19,n.t0=n.catch(10),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(t,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=n.t0,t.scheduleOnce(function(){cc.find("Canvas/Home").getComponent("HomeUI").menuAnim.play("menu_intro"),cc.find("Canvas/Home/buybox/glow").active=!1}.bind(t),3.5);case 25:case"end":return n.stop()}},n,null,[[10,19]])}))()},openbox:function(e,t,n){var i=this;return a(regeneratorRuntime.mark(function e(){var a,o,s,r,c,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("hero"==t?(a="herobox.ccc",o=_):"weap"==t&&(a="weapbox.ccc",o=w),0!=o.length){e.next=4;break}return e.abrupt("return");case 4:if(s=[],999==n)for(cc.find("Canvas/Box").getComponent("BoxUI").anim.play("box_open"),r=0;r<o.length;r++)c={account:a,name:"openbox",authorization:[{actor:v.name,permission:"active"}],data:{owner:v.name,id:o[r].bid}},s.push(c);else s=[{account:a,name:"openbox",authorization:[{actor:v.name,permission:"active"}],data:{owner:v.name,id:o[n].bid}}];return e.prev=7,e.next=10,g.transaction({actions:s});case 10:if(e.sent,cc.find("Canvas/lower/main_btns/layout/btn_box/tip").active=!1,i.handleGetBox(),i.scheduleOnce(function(){"hero"==t?this.handleGetNewHero():this.handleGetNewWeap()}.bind(i),6.5),l=cc.find("Canvas/Box").getComponent("BoxUI"),999==n)for(h=0;h<l.heroBoxs.length;++h)l.heroBoxs[h].destroy();else l.heroBoxs[n].destroy();i.scheduleOnce(function(){cc.find("Canvas/Box").getComponent("BoxUI").anim.play("box_intro")}.bind(i),12.5),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(7),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(i,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=e.t0,i.scheduleOnce(function(){cc.find("Canvas/Box").getComponent("BoxUI").anim.play("box_intro"),cc.find("Canvas/Box/fx/fx1").active=!1,cc.find("Canvas/Box/fx/fx2").active=!1}.bind(i),3.5);case 25:case"end":return e.stop()}},e,null,[[7,19]])}))()},buyHero:function(e,t,n){var i=this;return a(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=[{account:"eosio.token",name:"transfer",authorization:[{actor:v.name,permission:"active"}],data:{from:v.name,to:"nftswap.ccc",quantity:n,memo:"buy:"+e+":"+t}}],a.prev=1,a.next=4,g.transaction({actions:o});case 4:a.sent,i.handleGetSwapPair(),i.scheduleOnce(function(){cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/Shop").getComponent("ShopUI").hide(),cc.find("Canvas/heroPanel/fx/bg_eff3").active=!0,cc.find("Canvas/heroPanel/success").active=!0,cc.find("Canvas/heroPanel/info/nftprice").active=!0;var e=cc.find("Canvas/heroPanel");e.getChildByName("btnPanDefi").active=!1,e.getChildByName("btnPanSwap").active=!1,e.getChildByName("btnPanMine").active=!0,this.handleGetIDHero(t)}.bind(i),3.5),a.next=15;break;case 9:a.prev=9,a.t0=a.catch(1),console.log(a.t0),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(i,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=a.t0;case 15:case"end":return a.stop()}},a,null,[[1,9]])}))()},buyWeap:function(e,t,n){var i=this;return a(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=[{account:"eosio.token",name:"transfer",authorization:[{actor:v.name,permission:"active"}],data:{from:v.name,to:"nftswap.ccc",quantity:n,memo:"buy:"+e+":"+t}}],a.prev=1,a.next=4,g.transaction({actions:o});case 4:a.sent,i.handleGetSwapPair(),i.scheduleOnce(function(){cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/Shop").getComponent("ShopUI").hide(),cc.find("Canvas/weapPanel/fx/bg_eff3").active=!0,cc.find("Canvas/weapPanel/success").active=!0,cc.find("Canvas/weapPanel/info/nftprice").active=!0;var e=cc.find("Canvas/weapPanel");e.getChildByName("btnPanDefi").active=!1,e.getChildByName("btnPanSwap").active=!1,e.getChildByName("btnPanMine").active=!0,this.handleGetIDWeap(t)}.bind(i),3.5),a.next=15;break;case 9:a.prev=9,a.t0=a.catch(1),console.log(a.t0),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(i,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=a.t0;case 15:case"end":return a.stop()}},a,null,[[1,9]])}))()},sellHero:function(e,t,n){var i=this;return a(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=[{account:"htoken.ccc",name:"transfer",authorization:[{actor:v.name,permission:"active"}],data:{id:t,from:v.name,to:"nftswap.ccc",memo:"sell:"+e+":"+n}}],a.prev=1,a.next=4,g.transaction({actions:o});case 4:a.sent,i.handleGetSwapPair(),cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/Shop").getComponent("ShopUI").hide(),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(i,5),a.next=20;break;case 14:a.prev=14,a.t0=a.catch(1),console.log(a.t0),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(i,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=a.t0;case 20:case"end":return a.stop()}},a,null,[[1,14]])}))()},sellWeap:function(e,t,n){var i=this;return a(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=[{account:"wtoken.ccc",name:"transfer",authorization:[{actor:v.name,permission:"active"}],data:{id:t,from:v.name,to:"nftswap.ccc",memo:"sell:"+e+":"+n}}],a.prev=1,a.next=4,g.transaction({actions:o});case 4:a.sent,i.handleGetSwapPair(),cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),cc.find("Canvas/weapPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/Shop").getComponent("ShopUI").hide(),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(i,5),a.next=20;break;case 14:a.prev=14,a.t0=a.catch(1),console.log(a.t0),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(i,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=a.t0;case 20:case"end":return a.stop()}},a,null,[[1,14]])}))()},upgrade:function(e,t,n){var i=this;return a(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=[{account:e,name:"upgrade",authorization:[{actor:v.name,permission:"active"}],data:{user:v.name,mid:t,ids:n}}],a.prev=1,a.next=4,g.transaction({actions:o});case 4:a.sent,cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),"herobox.ccc"==e?(cc.find("Canvas/heroPanel/fx/bg_eff1").active=!0,cc.find("Canvas/heroPanel/success").active=!0,cc.find("Canvas/heroPanel/info/nftprice").active=!0,i.scheduleOnce(function(){this.handleGetIDHero(t)}.bind(i),.5)):"weapbox.ccc"==e&&(cc.find("Canvas/weapPanel/fx/bg_eff1").active=!0,cc.find("Canvas/weapPanel/success").active=!0,cc.find("Canvas/weapPanel/info/nftprice").active=!0,i.scheduleOnce(function(){this.handleGetIDWeap(t)}.bind(i),1.5)),a.next=17;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(i,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=a.t0;case 17:case"end":return a.stop()}},a,null,[[1,11]])}))()},merge:function(e,t){var n=this;return a(regeneratorRuntime.mark(function a(){var i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=[{account:e,name:"merge",authorization:[{actor:v.name,permission:"active"}],data:{user:v.name,ids:t}}],a.prev=1,a.next=4,g.transaction({actions:i});case 4:a.sent,n.handleGetBox(),n.scheduleOnce(function(){cc.find("Canvas/Home").getComponent("HomeUI").buyboxAnim.play("home_buybox1")}.bind(n),.5),n.scheduleOnce(function(){cc.find("Canvas/Home").getComponent("HomeUI").menuAnim.play("menu_intro"),cc.find("Canvas/Home").getComponent("HomeUI").boxtipNode=cc.find("Canvas/lower/main_btns/layout/btn_box/tip"),cc.find("Canvas/Home").getComponent("HomeUI").boxtipNode.active=!0}.bind(n),5.5),a.next=16;break;case 10:a.prev=10,a.t0=a.catch(1),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(n,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=a.t0,n.scheduleOnce(function(){cc.find("Canvas/Home").getComponent("HomeUI").menuAnim.play("menu_intro"),cc.find("Canvas/Home/buybox/glow").active=!1}.bind(n),3.5);case 16:case"end":return a.stop()}},a,null,[[1,10]])}))()},claimDefi:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[{account:"cccpool.ccc",name:"mine",authorization:[{actor:v.name,permission:"active"}],data:{user:v.name}},{account:"cccdefi.ccc",name:"claim",authorization:[{actor:v.name,permission:"active"}],data:{user:v.name}}],t.prev=1,t.next=4,g.transaction({actions:n});case 4:t.sent,a=Date.parse(new Date)/1e3,b.userList.lasttime&&(b.userList.lasttime=a),cc.sys.localStorage.setItem("poolData",JSON.stringify(b)),cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/Shop").getComponent("ShopUI").hide(),cc.find("Canvas/defiPanel").getComponent("DefiUI").hide(),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(e,6),t.next=24;break;case 18:t.prev=18,t.t0=t.catch(1),console.log(t.t0),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(e,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=t.t0;case 24:case"end":return t.stop()}},t,null,[[1,18]])}))()},play:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=[{account:"eoscccdotcom",name:"transfer",authorization:[{actor:v.name,permission:"active"}],data:{from:v.name,to:"weapbox.ccc",quantity:"2000.0000 CCC",memo:""}}],t.prev=1,t.next=4,g.transaction({actions:n});case 4:t.sent,b.players.onplay=1,cc.sys.localStorage.setItem("poolData",JSON.stringify(b)),cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/Shop").getComponent("ShopUI").hide(),cc.find("Canvas/defiPanel").getComponent("DefiUI").hide(),cc.find("Canvas/riskPanel").getComponent("RiskUI").onPlay(),t.next=21;break;case 15:t.prev=15,t.t0=t.catch(1),console.log(t.t0),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(e,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=t.t0;case 21:case"end":return t.stop()}},t,null,[[1,15]])}))()},stakeHero:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var a,i,o,s,r,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=cc.sys.localStorage.getItem("curSlot"),i=[{account:"htoken.ccc",name:"transfer",authorization:[{actor:v.name,permission:"active"}],data:{id:e,from:v.name,to:"cccdefi.ccc",memo:"stake:"+a}}],n.prev=2,n.next=5,g.transaction({actions:i});case 5:n.sent,o=Date.parse(new Date)/1e3,b.userList&&b.userList.lasttime&&(b.userList.lasttime=o),cc.sys.localStorage.setItem("poolData",JSON.stringify(b)),s=P.findIndex(function(t){return t.id===e}),r=P.splice(s,1),p.push(r),c={slot:a,hid:e,wid:0,hero:r,weapon:null},u.push(c),cc.sys.localStorage.setItem("HeroData",JSON.stringify(P)),cc.sys.localStorage.setItem("userDefiData",JSON.stringify(u)),cc.sys.localStorage.setItem("cccDefiHero",JSON.stringify(p)),cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/Shop").getComponent("ShopUI").hide(),cc.find("Canvas/defiPanel").getComponent("DefiUI").hide(),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(t,8),n.next=33;break;case 27:n.prev=27,n.t0=n.catch(2),console.log(n.t0),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(t,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=n.t0;case 33:case"end":return n.stop()}},n,null,[[2,27]])}))()},unstakeHero:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var a,i,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=[{account:"cccdefi.ccc",name:"unstake",authorization:[{actor:v.name,permission:"active"}],data:{user:v.name,slot:e}}],n.prev=1,n.next=4,g.transaction({actions:a});case 4:n.sent,i=Date.parse(new Date)/1e3,b.userList&&b.userList.lasttime&&(b.userList.lasttime=i),cc.sys.localStorage.setItem("poolData",JSON.stringify(b)),o=u.findIndex(function(t){return t.slot===e}),s=u.splice(o,1),P.push(s.hero),cc.sys.localStorage.setItem("HeroData",JSON.stringify(P)),cc.sys.localStorage.setItem("userDefiData",JSON.stringify(u)),cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/Shop").getComponent("ShopUI").hide(),cc.find("Canvas/defiPanel").getComponent("DefiUI").hide(),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(t,7),n.next=29;break;case 23:n.prev=23,n.t0=n.catch(1),console.log(n.t0),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(t,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=n.t0;case 29:case"end":return n.stop()}},n,null,[[1,23]])}))()},equipWeap:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var a,i,o,s,r,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=cc.sys.localStorage.getItem("curSlot"),i=[{account:"wtoken.ccc",name:"transfer",authorization:[{actor:v.name,permission:"active"}],data:{id:e,from:v.name,to:"cccdefi.ccc",memo:"equip:"+a}}],n.prev=2,n.next=5,g.transaction({actions:i});case 5:n.sent,o=Date.parse(new Date)/1e3,b.userList&&b.userList.lasttime&&(b.userList.lasttime=o),cc.sys.localStorage.setItem("poolData",JSON.stringify(b)),s=x.findIndex(function(t){return t.id===e}),r=x.splice(s,1),d.push(r),c=u.findIndex(function(e){return e.slot===a}),null!=u[c]&&(u[c].wid=e,u[c].weapon=r),cc.sys.localStorage.setItem("WeapData",JSON.stringify(x)),cc.sys.localStorage.setItem("userDefiData",JSON.stringify(u)),cc.sys.localStorage.setItem("cccDefiWeap",JSON.stringify(d)),0==a?cc.find("Canvas/defiPanel/slot/slot00/weapon").active=!0:1==a?cc.find("Canvas/defiPanel/slot/slot01/weapon").active=!0:2==a&&(cc.find("Canvas/defiPanel/slot/slot02/weapon").active=!0),cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/weapPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/Shop").getComponent("ShopUI").hide(),cc.find("Canvas/defiPanel").getComponent("DefiUI").hide(),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(t,8),n.next=36;break;case 30:n.prev=30,n.t0=n.catch(2),console.log(n.t0),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(t,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=n.t0;case 36:case"end":return n.stop()}},n,null,[[2,30]])}))()},removeWeap:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var a,i,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=[{account:"cccdefi.ccc",name:"remove",authorization:[{actor:v.name,permission:"active"}],data:{user:v.name,slot:e}}],n.prev=1,n.next=4,g.transaction({actions:a});case 4:n.sent,i=Date.parse(new Date)/1e3,b.userList&&b.userList.lasttime&&(b.userList.lasttime=i),cc.sys.localStorage.setItem("poolData",JSON.stringify(b)),o=u.findIndex(function(t){return t.slot===e}),s=u.splice(o,0),u[o].wid="",u[o].weapon="",x.push(s.weapon),cc.sys.localStorage.setItem("WeapData",JSON.stringify(x)),cc.sys.localStorage.setItem("userDefiData",JSON.stringify(u)),cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/Shop").getComponent("ShopUI").hide(),cc.find("Canvas/defiPanel").getComponent("DefiUI").hide(),0==e?cc.find("Canvas/defiPanel/slot/slot00/weapon").active=!1:1==e?cc.find("Canvas/defiPanel/slot/slot01/weapon").active=!1:2==e&&(cc.find("Canvas/defiPanel/slot/slot02/weapon").active=!1),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(t,7),n.next=33;break;case 27:n.prev=27,n.t0=n.catch(1),console.log(n.t0),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(t,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=n.t0;case 33:case"end":return n.stop()}},n,null,[[1,27]])}))()},risk:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,a,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=parseInt(cc.sys.localStorage.getItem("score")),a=parseInt(cc.sys.localStorage.getItem("curStage"))+1,i=[{account:"weapbox.ccc",name:"risk",authorization:[{actor:v.name,permission:"active"}],data:{user:v.name,round:a,score:n}}],t.prev=3,t.next=6,g.transaction({actions:i});case 6:t.sent,cc.sys.localStorage.setItem("RiskBox",1),o=Date.parse(new Date)/1e3,b.players[0].lasttime=Math.floor(o),b.players[0].onplay=0,cc.sys.localStorage.setItem("poolData",JSON.stringify(b)),cc.director.loadScene("home"),t.next=21;break;case 15:t.prev=15,t.t0=t.catch(3),console.log(t.t0),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(e,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=t.t0;case 21:case"end":return t.stop()}},t,null,[[3,15]])}))()},sendCom:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var a,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=parseInt(cc.sys.localStorage.getItem("curStage"))+1,i=[{account:"weapbox.ccc",name:"comment",authorization:[{actor:v.name,permission:"active"}],data:{player:v.name,round:a,comment:e}}],n.prev=2,n.next=5,g.transaction({actions:i});case 5:n.sent,b.players[0].comtimes=parseInt(b.players[0].comtimes)-1,b.players[0].comtimes<0&&(b.players[0].comtimes=0),cc.sys.localStorage.setItem("poolData",JSON.stringify(b)),cc.find("Canvas/comPanel").getComponent("comPanelUI").hide(),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(t,12),n.next=20;break;case 14:n.prev=14,n.t0=n.catch(2),console.log(n.t0),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").show(t,4),cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string=n.t0;case 20:case"end":return n.stop()}},n,null,[[2,14]])}))()},changeNode:function(e,t){m.host!==C[parseInt(t)]&&(m.host=C[parseInt(t)],cc.sys.localStorage.setItem("network",JSON.stringify(m)))},formatnumber:function(e,t){var n,a,i,o;if(a=(n=e.toString()).indexOf("."),i=n.length,0==t)-1!=a&&(n=n.substring(0,a));else if(-1==a)for(n+=".",o=1;o<=t;o++)n+="0";else for(n=n.substring(0,a+t+1),o=i;o<=a+t;o++)n+="0";return n},update:function(){}}),cc._RF.pop()},{async:2}],ChargeUI:[function(e,t){"use strict";cc._RF.push(t,"11f1epEd5FProshh8dSXgPW","ChargeUI"),cc.Class({extends:cc.Component,properties:{},init:function(e,t){this.home=e,this.parentBtns=t},show:function(){this.node.active=!0,this.node.emit("fade-in"),this.home.toggleHomeBtns(!1),cc.director.getScheduler().pauseTarget(this.parentBtns)},hide:function(){this.node.emit("fade-out"),this.home.toggleHomeBtns(!0),cc.director.getScheduler().resumeTarget(this.parentBtns)}}),cc._RF.pop()},{}],ComboDisplay:[function(e,t){"use strict";cc._RF.push(t,"8eb3c3ywppFI6IWH3Np7yc9","ComboDisplay"),cc.Class({extends:cc.Component,properties:{labelCombo:cc.Label,spFlare:cc.Sprite,anim:cc.Animation,comboColors:[cc.Color],showDuration:0},init:function(){this.comboCount=0,this.node.active=!1,this.showTimer=0},playCombo:function(){this.comboCount++,this.node.active=!0;var e=Math.min(Math.floor(this.comboCount/10),this.comboColors.length-1);this.spFlare.node.color=this.comboColors[e],this.labelCombo.node.color=this.comboColors[e],this.labelCombo.string=this.comboCount,this.anim.play("combo-pop"),this.showTimer=0},hide:function(){this.comboCount=0,this.node.active=!1},update:function(e){this.node.active&&(this.showTimer+=e,this.showTimer>=this.showDuration&&this.hide())}}),cc._RF.pop()},{}],DeathUI:[function(e,t){"use strict";cc._RF.push(t,"0966f3/svtKzIRd+HwG3Kyd","DeathUI"),cc.Class({extends:cc.Component,properties:{},init:function(e){this.game=e,this.hide()},show:function(){this.node.setPosition(0,0)},hide:function(){this.node.x=3e3},revive:function(){this.game.revive()},gameover:function(){this.game.gameOver()}}),cc._RF.pop()},{}],DefiUI:[function(e,t){"use strict";cc._RF.push(t,"8a2ce8nNyRLKJ17XT6M4WcP","DefiUI");var n,a=[],i=0,o=0;cc.Class({extends:cc.Component,properties:{slotPrefab:{default:null,type:cc.Prefab},slot00:cc.Node,slot01:cc.Node,slot02:cc.Node},init:function(e){this.home=e},addHeroSlot:function(e){var t=cc.instantiate(this.slotPrefab),n=a[e].slot;0==n?this.slot00.addChild(t):1==n?this.slot01.addChild(t):2==n&&this.slot02.addChild(t),t.getComponent("HeroSlot").updateHeroslot(a[e].hero[0].genes),t.getComponent("HeroSlot").refresh(a[e].hero[0]),null!=a[e].weapon&&null!=a[e].weapon&&(0==n?cc.find("Canvas/defiPanel/slot/slot00/weapon").active=!0:1==n?cc.find("Canvas/defiPanel/slot/slot01/weapon").active=!0:2==n&&(cc.find("Canvas/defiPanel/slot/slot02/weapon").active=!0));var i=new cc.Component.EventHandler;return i.target=this.node,i.component="DefiUI",i.handler="onClickItem",i.customEventData={index:e,slot:n},t.getComponent("HeroSlot").dbbutton.clickEvents.push(i),t},onClickItem:function(e,t){e.target;var n=t.index,i=(t.slot,cc.find("Canvas/heroPanel"));i.getChildByName("hero01").getComponent("hero").updateHero(a[n].hero[0]),i.getComponent("heroPanelUI").setSlot(a[n].slot),i.getComponent("heroPanelUI").updatePanelDate(a[n].hero[0]),i.getComponent("PanelUI").show(),cc.find("Canvas/heroPanel/btnPanDefi/btn_remove").active=!1,cc.find("Canvas/heroPanel/btnPanDefi/btn_equip").active=!0,null!=a[n].weapon&&null!=a[n].weapon[0]&&(i.getChildByName("hero01").getComponent("hero").updateWep(a[n].weapon[0]),cc.find("Canvas/heroPanel/btnPanDefi/btn_remove").active=!0,cc.find("Canvas/heroPanel/btnPanDefi/btn_equip").active=!1),i.getChildByName("btnPanDefi").active=!0,i.getChildByName("btnPanSwap").active=!1,i.getChildByName("btnPanMine").active=!1},addSlot:function(e,t){cc.sys.localStorage.setItem("curSlot",t),cc.find("Canvas/backPack").getComponent("BackPackUI").show(),cc.find("Canvas/backPack/tab/tab_weap").active=!1,cc.find("Canvas/heroPanel/btnPanMine/btn_stake").active=!0},showWeap:function(e,t){cc.sys.localStorage.setItem("curSlot",t);var n=a.findIndex(function(e){return e.slot==t});if(null!=a[n]&&null!=a[n].weapon&&null!=a[n].weapon[0]){var i=cc.find("Canvas/weapPanel");i.getChildByName("swordMax").getComponent("swordMax").updateWeap(a[n].weapon[0]),i.getComponent("weapPanelUI").updatePanelDate(a[n].weapon[0]),i.getComponent("weapPanelUI").setSlot(parseInt(t)),i.getComponent("PanelUI").show(),i.getChildByName("btnPanDefi").active=!0,i.getChildByName("btnPanSwap").active=!1,i.getChildByName("btnPanMine").active=!1,cc.find("Canvas/weapPanel/info/nftprice").active=!0}},setDefiData:function(){var e=Date.parse(new Date)/1e3,t=cc.sys.localStorage.getItem("poolData");if(t&&(n=JSON.parse(t)),n.configs&&n.poolConfig){var a=e-n.poolConfig.last_mine,s=parseFloat(n.poolToken*a/(86400*n.poolConfig.rate));n.poolToken=(n.poolToken-s).toFixed(4),n.defiToken=(n.defiToken+s).toFixed(4)}n.userList&&n.userList.lasttime&&(o=e-n.userList.lasttime,i=(n.defiToken-n.defiToken*Math.pow(.999996,o*n.bal_ratio)).toFixed(4)),cc.find("Canvas/defiPanel/pan_pool/num_pool").getComponent(cc.Label).string=n.poolToken,cc.find("Canvas/defiPanel/pan_pool/num_defi").getComponent(cc.Label).string=n.defiToken,cc.find("Canvas/defiPanel/num_earnings").getComponent(cc.Label).string=i;var r=this.calAPY();cc.find("Canvas/defiPanel/num_apy").getComponent(cc.Label).string=r},calAPY:function(){for(var e=0,t=0,s=0;s<a.length;++s)null!=a[s].hero[0]&&null!=a[s].hero[0].price&&(t+=parseFloat(a[s].hero[0].price));return 0!=t&&0!=o&&(e=i*n.ccc_price*31536e5/(t*o)),e.toFixed(2)+" %"},show:function(){cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/weapPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),cc.find("Canvas/Shop").getComponent("ShopUI").hide(),cc.find("Canvas/riskPanel").getComponent("RiskUI").hide(),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").hide(),cc.find("Canvas/defiPanel/slot/slot00/weapon").active=!1,cc.find("Canvas/defiPanel/slot/slot01/weapon").active=!1,cc.find("Canvas/defiPanel/slot/slot02/weapon").active=!1;var e=cc.sys.localStorage.getItem("poolData");if(e&&(n=JSON.parse(e)),this.heroSlots)for(var t=0;t<this.heroSlots.length;++t)this.heroSlots[t].destroy();this.heroSlots=[];var i=cc.sys.localStorage.getItem("userDefiData");if(i){a=JSON.parse(i);for(var o=0;o<a.length;++o)if(null!=a[o].hero[0]){var s=this.addHeroSlot(o);s&&this.heroSlots.push(s)}}this.node.active=!0,this.node.emit("fade-in"),this.home.toggleHomeBtns(!1)},hide:function(){if(this.heroSlots)for(var e=0;e<this.heroSlots.length;++e)this.heroSlots[e].destroy();cc.find("Canvas/heroPanel/btnPanMine/btn_stake").active=!1,cc.find("Canvas/backPack/tab/tab_weap").active=!0,this.node.emit("fade-out"),this.home.toggleHomeBtns(!0)},update:function(){this.setDefiData()}}),cc._RF.pop()},{}],DyLabel:[function(e,t,n){"use strict";cc._RF.push(t,"ecc7cWEhQNLoJKX/2jTih8Y","DyLabel"),Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,o=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_labels=[],t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.children.forEach(function(t){e.m_labels.push(t.getComponent(cc.Label))})},t.prototype.start=function(){},t.prototype.setText=function(e){this.setString(e)},t.prototype.setString=function(e){this.m_labels.forEach(function(t){t.string=e}),this.doAnimate()},t.prototype.doAnimate=function(){this.getComponent(cc.Animation).playAdditive("douyingAni")},__decorate([i],t)}(cc.Component));n.default=o,cc._RF.pop()},{}],EnergyCounter:[function(e,t){"use strict";cc._RF.push(t,"70152iIQt1AkKnsFXGgadR8","EnergyCounter"),cc.Class({extends:cc.Component,properties:{timeToRecover:0,totalCount:0,currentCount:0,labelTimer:{default:null,type:cc.Label},labelCount:{default:null,type:cc.Label},progressBar:{default:null,type:cc.ProgressBar}},onLoad:function(){this.timer=0},update:function(e){var t=this.timer/this.timeToRecover;this.progressBar.progress=t,this.currentCount>this.totalCount&&(this.currentCount=this.totalCount);var n=Math.floor(this.timeToRecover-this.timer);this.labelCount.string=this.currentCount+"/"+this.totalCount,this.labelTimer.string=Math.floor(n/60).toString()+":"+(n%60<10?"0":"")+n%60,this.timer+=e,this.timer>=this.timeToRecover&&(this.timer=0,this.currentCount++)}}),cc._RF.pop()},{}],Foe:[function(e,t){"use strict";cc._RF.push(t,"d887bx46FZAa4lxVyJ37BSp","Foe"),e("Move").MoveState;var n=e("Types").FoeType,a=e("Types").ProjectileType,i=cc.Enum({Melee:-1,Range:-1});cc.Class({extends:cc.Component,properties:{foeType:{default:n.Foe0,type:n},atkType:{default:i.Melee,type:i},projectileType:{default:a.Arrow,type:a},hitPoint:0,atk:0,cate:0,hurtRadius:0,atkRange:0,atkDist:0,atkDuration:0,atkStun:0,atkPrepTime:0,corpseDuration:0,sfAtkDirs:[cc.SpriteFrame],fxSmoke:cc.ParticleSystem,fxBlood:cc.Animation,fxBlade:cc.Animation,hpBar:cc.Node},init:function(e){this.waveMng=e,this.player=e.player,this.isAttacking=!1,this.isAlive=!1,this.isInvincible=!1,this.isMoving=!1,this.hp=this.hitPoint,this.move=this.getComponent("Move"),this.anim=this.move.anim,this.spFoe=this.anim.getComponent(cc.Sprite),this.bloodDuration=this.fxBlood.getAnimationState("blood").clip.duration,this.fxBlood.node.active=!1,this.fxBlade.node.active=!1,this.hpBar.width=this.hp/this.hitPoint*60,this.anim.getAnimationState("born")?this.anim.play("born"):this.readyToMove()},update:function(){if(!1!==this.isAlive){var e=this.player.node.position.sub(this.node.position).mag();if(this.player.isAttacking&&!1===this.isInvincible&&e<this.hurtRadius)this.dead();else if(this.isAttacking&&this.player.isAlive&&e<this.player.hurtRadius)this.player.dead2(this.atk,this.cate);else if(this.player&&this.isMoving){var t=this.player.node.position.sub(this.node.position),n=Math.atan2(t.y,t.x);if(cc.misc.radiansToDegrees(n),e<this.atkRange)return void this.prepAttack(t);this.node.emit("update-dir",{dir:t.normalize()})}}},readyToMove:function(){this.isAlive=!0,this.isMoving=!0,this.fxSmoke.resetSystem()},prepAttack:function(e){var t;t=Math.abs(e.x)>=Math.abs(e.y)?"pre_atk_right":e.y>0?"pre_atk_up":"pre_atk_down",this.node.emit("freeze"),this.anim.play(t),this.isMoving=!1,this.scheduleOnce(this.attack,this.atkPrepTime)},attack:function(){if(!1!==this.isAlive){this.anim.stop();var e=this.player.node.position.sub(this.node.position),t=null;this.atkType===i.Melee&&(t=this.node.position.add(e.normalize().mul(this.atkDist))),this.attackOnTarget(e,t)}},attackOnTarget:function(e,t){var n=cc.misc.radiansToDegrees(cc.v2(0,1).signAngle(e)),o=[0,45,135,180];function s(e,t){for(var n=null,a=1;a<o.length;++a){var i=o[a-1];if(e<=o[a]&&e>i)return t[a-1]}if(null===n)return cc.error("cannot find correct attack pose sprite frame! mag: "+e),null}var r=Math.abs(n);n<=0?(this.anim.node.scaleX=1,this.spFoe.spriteFrame=s(r,this.sfAtkDirs)):(this.anim.node.scaleX=-1,this.spFoe.spriteFrame=s(r,this.sfAtkDirs));var c=cc.delayTime(this.atkStun),l=cc.callFunc(this.onAtkFinished,this);if(this.atkType===i.Melee){var h=cc.moveTo(this.atkDuration,t).easing(cc.easeQuinticActionOut());this.node.runAction(cc.sequence(h,c,l)),this.isAttacking=!0}else{if(this.projectileType===a.None)return;this.waveMng.spawnProjectile(this.projectileType,this.node.position,e),this.node.runAction(cc.sequence(c,l))}},onAtkFinished:function(){this.isAttacking=!1,this.isAlive&&(this.isMoving=!0)},dead:function(){this.move.stop(),this.isMoving=!1,this.isAttacking=!1,this.anim.play("dead"),this.fxBlood.node.active=!0,this.fxBlood.node.scaleX=this.anim.node.scaleX,this.fxBlood.play("blood"),this.fxBlade.node.active=!0,this.fxBlade.node.rotation=80*(Math.random()-.5),this.fxBlade.play("blade"),this.unscheduleAllCallbacks(),this.node.stopAllActions(),this.waveMng.hitFoe(),this.player.addKills();var e=this.player.calAtk(this.cate);this.hp=this.hp-e,this.hp>0?(this.hpBar.width=this.hp/this.hitPoint*60,this.isInvincible=!0,this.scheduleOnce(this.invincible,this.bloodDuration)):(this.hpBar.width=0,this.isAlive=!1,this.scheduleOnce(this.corpse,this.bloodDuration),this.waveMng.killFoe())},invincible:function(){this.fxBlood.node.active=!1,this.isMoving=!0;var e=cc.blink(1,6),t=cc.callFunc(this.onInvincibleEnd,this);this.anim.node.runAction(cc.sequence(e,t))},onInvincibleEnd:function(){this.isInvincible=!1},corpse:function(){this.anim.play("corpse"),this.fxBlood.node.active=!1,this.scheduleOnce(this.recycle,this.corpseDuration)},recycle:function(){this.waveMng.despawnFoe(this)}}),cc._RF.pop()},{Move:"Move",Types:"Types"}],GameOverUI:[function(e,t){"use strict";function n(e,t,n,a,i,o,s){try{var r=e[o](s),c=r.value}catch(l){return void n(l)}r.done?t(c):Promise.resolve(c).then(a,i)}cc._RF.push(t,"c3ee4ElVWtB2Lzir0h5v/ow","GameOverUI"),ScatterJS.plugins(new ScatterEOS),e("async");var a,i,o,s,r={blockchain:"eos",protocol:"https",host:"eos.greymass.com",port:"443",chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},c=null,l={name:"eosio.null",eosToken:"0.0000 EOS",cccToken:"0.0000 CCC"};cc.Class({extends:cc.Component,properties:{num_score:cc.Node,num_kill:cc.Node,num_time:cc.Node},init:function(e){this.game=e,this.hide();var t=cc.sys.localStorage.getItem("network");t&&(r=JSON.parse(t));var n=cc.sys.localStorage.getItem("userData");n&&(l=JSON.parse(n)),this.login()},login:function(){ScatterJS.scatter.connect("cryptocycle").then(function(e){e?(console.log("connected to scatter."),i=ScatterJS.scatter,o={accounts:[r]},i.getIdentity(o).then(function(){a=i.identity.accounts[0],l.name=a.name,s={expireInSeconds:60},c=i.eos(r,Eos,s)}).catch(function(e){console.log("connect to scatter failed."),console.log(e)})):console.log("connect to scatter failed.")})},show:function(){this.node.setPosition(0,0)},hide:function(){this.node.x=3e3},restart:function(){this.game.restart()},confirm:function(){cc.find("CCC").getComponent("CCCManager").risk()},risk:function(){return(e=regeneratorRuntime.mark(function e(){var t,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(cc.sys.localStorage.getItem("score")),n=parseInt(cc.sys.localStorage.getItem("curStage"))+1,a=[{account:"weapbox.ccc",name:"risk",authorization:[{actor:l.name,permission:"active"}],data:{user:l.name,round:n,score:t}}],e.prev=3,e.next=6,c.transaction({actions:a});case 6:i=e.sent,console.log(i),cc.director.loadScene("home"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[3,11]])}),function(){var t=this,a=arguments;return new Promise(function(i,o){var s=e.apply(t,a);function r(e){n(s,i,o,r,c,"next",e)}function c(e){n(s,i,o,r,c,"throw",e)}r(void 0)})})();var e}}),cc._RF.pop()},{async:2}],Game:[function(e,t){"use strict";cc._RF.push(t,"f8d83fBpLZCEqij5BvvBhRZ","Game");var n=[];cc.Class({extends:cc.Component,properties:{player:cc.Node,inGameUI:cc.Node,playerFX:cc.Node,waveMng:cc.Node,bossMng:cc.Node,poolMng:cc.Node,foeGroup:cc.Node,gameOverUI:cc.Node,cameraRoot:cc.Animation},onLoad:function(){this.playerFX=this.playerFX.getComponent("PlayerFX"),this.playerFX.init(this),this.player=this.player.getComponent("Player"),this.player.init(this),this.player.node.active=!1,this.poolMng=this.poolMng.getComponent("PoolMng"),this.poolMng.init(),this.waveMng=this.waveMng.getComponent("WaveMng"),this.waveMng.init(this),this.bossMng=this.bossMng.getComponent("BossMng"),this.bossMng.init(this),this.sortMng=this.foeGroup.getComponent("SortMng"),this.sortMng.init(),this.starttime=0;var e=cc.sys.localStorage.getItem("userDefiData");e&&(cc.sys.localStorage.setItem("userRiskData",e),n=JSON.parse(e)),cc.find("Canvas/root/InGameUI/txt_life").getComponent(cc.Label).string=n.length},start:function(){this.playerFX.playIntro(),this.inGameUI=this.inGameUI.getComponent("InGameUI"),this.inGameUI.init(this),this.gameOverUI=this.gameOverUI.getComponent("GameOverUI"),this.gameOverUI.init(this),this.starttime=Math.round((new Date).getTime()/1e3),this.newHero()},newHero:function(){null!=n[0].hero[0]?this.player.updateHero(n[0]):cc.director.loadScene("home")},pause:function(){cc.director.getScheduler().pauseTarget(this.waveMng),this.sortMng.enabled=!1},resume:function(){cc.director.getScheduler().resumeTarget(this.waveMng),this.sortMng.enabled=!0},cameraShake:function(){this.cameraRoot.play("camera-shake")},death:function(){n.shift(),cc.sys.localStorage.setItem("userRiskData",JSON.stringify(n)),cc.find("Canvas/root/InGameUI/txt_life").getComponent(cc.Label).string=n.length,null!=n[0]?(this.player.updateHero(n[0]),this.revive()):this.gameOver()},revive:function(){this.playerFX.playRevive(),this.player.revive()},clearAllFoes:function(){for(var e=this.foeGroup.children,t=0;t<e.length;++t){var n=e[t].getComponent("Foe");if(n)n.dead();else{var a=e[t].getComponent("Projectile");a&&a.broke()}}},playerReady:function(){this.resume(),this.waveMng.startWave(),this.player.node.active=!0,this.player.ready()},gameOver:function(){var e=Math.round((new Date).getTime()/1e3)-this.starttime,t=cc.sys.localStorage.getItem("kills"),n=parseInt(t)+Math.floor(e/3);n>65500&&(n=65500),cc.sys.localStorage.setItem("score",n),this.gameOverUI.num_score.getComponent(cc.Label).string=n,this.gameOverUI.num_kill.getComponent(cc.Label).string=t,this.gameOverUI.num_time.getComponent(cc.Label).string=Math.floor(e/60).toString()+"'"+(e%60<10?"0":"")+e%60,this.gameOverUI.show(),this.pause()},restart:function(){cc.director.loadScene("PlayGame")}}),cc._RF.pop()},{}],HeroSlot:[function(e,t){"use strict";cc._RF.push(t,"648ecAs4bREAJsQ6IycZbX7","HeroSlot"),cc.Class({extends:cc.Component,properties:{sfAttributes:{default:[],type:cc.SpriteFrame},sfBorders:{default:[],type:cc.SpriteFrame},labelLevel:{default:null,type:cc.Label},spAttribute:{default:null,type:cc.Sprite},spBorder:{default:null,type:cc.Sprite},dbhead:{default:[],type:cc.Node},dbbutton:{default:null,type:cc.Button},title:cc.Label,nftvalue:cc.Label},onLoad:function(){this.dbDisplay=this.dbhead.getComponent(dragonBones.ArmatureDisplay),this.dbArmature=this.dbDisplay.armature(),this.eyeDisplay=cc.find("eyes").getComponent(dragonBones.ArmatureDisplay)},refresh:function(e){var t=e.level-1;t>=7&&(t=6);var n=e.category,a=e.level;this.labelLevel.string="LV."+a,this.spBorder.spriteFrame=this.sfBorders[t],this.spAttribute.spriteFrame=this.sfAttributes[n],this.title.string=e.token_name,this.nftvalue.string=e.nft_value},string_to_arr:function(e){for(var t=new Array,n=0;n<12;++n)t[n]=".12345abcdefghijklmnopqrstuvwxyz".indexOf(e.charAt(n));return t},updateHeroslot:function(e){var t=this.string_to_arr(e);this.dbArmature.getSlot("slot_hair").displayIndex=t[2],this.dbArmature.getSlot("slot_item").displayIndex=t[4],this.dbArmature.getSlot("skin_head").displayIndex=t[0],this.dbArmature.getSlot("skin_ear").displayIndex=t[0],this.dbArmature.getSlot("skin_neck").displayIndex=t[0],this.updateHat(t[1]),this.updateEye(t[3])},updateHat:function(e){this.dbArmature.getSlot("slot_hat").displayIndex=void 0,0!=e&&(this.dbArmature.getSlot("slot_hat").displayIndex=e-1,this.dbArmature.getSlot("slot_hair").displayIndex=void 0,this.dbArmature.getSlot("slot_item").displayIndex=void 0)},updateEye:function(e){var t=this.eyeDisplay.buildArmature("e_"+e);t.timeScale=(e+1)/3,this.dbArmature.getSlot("skin_eyes").childArmature=t.armature()}}),cc._RF.pop()},{}],HomeUI1:[function(e,t){"use strict";cc._RF.push(t,"aa77bcy1MlA3bRL8zpupFoD","HomeUI1"),cc.Class({extends:cc.Component,properties:{menuAnim:{default:null,type:cc.Animation},menuParticle:{default:null,type:cc.ParticleSystem},btnGroup:{default:null,type:cc.Node}},onLoad:function(){},start:function(){cc.eventManager.pauseTarget(this.btnGroup,!0),this.scheduleOnce(function(){this.menuAnim.play(),this.menuParticle.enabled=!1}.bind(this),2)},showParticle:function(){this.menuParticle.enabled=!0},enableButtons:function(){cc.eventManager.resumeTarget(this.btnGroup,!0)},playGame:function(){cc.eventManager.pauseTarget(this.btnGroup,!0),cc.director.loadScene("PlayGame")}}),cc._RF.pop()},{}],HomeUI:[function(e,t){"use strict";cc._RF.push(t,"80382PDGl1Jf4nvzaq1gyOV","HomeUI");var n=e("BackPackUI"),a=e("ShopUI"),i=e("BoxUI"),o=e("DefiUI"),s=e("RiskUI"),r=cc.Enum({Home:-1,Box:-1,NFT:-1,DeFi:-1,Shop:-1,Risk:-1});cc.Class({extends:cc.Component,properties:{menuAnim:{default:null,type:cc.Animation},buyboxAnim:{default:null,type:cc.Animation},homeBtnGroups:{default:[],type:cc.Node},backPackUI:{default:null,type:n},shopUI:a,DefiUI:o,boxUI:i,RiskUI:s},onLoad:function(){this.curPanel=r.Home,this.menuAnim.play("menu_reset")},start:function(){this.backPackUI.init(this),this.shopUI.init(this),this.DefiUI.init(this),this.RiskUI.init(this),this.boxUI.init(this,r.Box),cc.find("CCC").getComponent("CCCManager").setPlayGame(0),this.scheduleOnce(function(){this.menuAnim.play("menu_intro")}.bind(this),.5),this.scheduleOnce(function(){1==cc.sys.localStorage.getItem("RiskBox")&&(cc.find("Canvas/Home").getComponent("HomeUI").boxtipNode=cc.find("Canvas/lower/main_btns/layout/btn_box/tip"),cc.find("Canvas/Home").getComponent("HomeUI").boxtipNode.active=!0,cc.find("Canvas/Box/bot_frame/tab/tip").active=!0,cc.sys.localStorage.setItem("RiskBox",0))}.bind(this),5.5),cc.director.preloadScene("PlayGame",function(){cc.log("Next scene preloaded")})},toggleHomeBtns:function(e){for(var t=0;t<this.homeBtnGroups.length;++t){var n=this.homeBtnGroups[t];e?cc.director.getScheduler().resumeTarget(n):cc.director.getScheduler().pauseTarget(n)}},gotoShop:function(){this.curPanel!==r.Shop&&(this.menuAnim.play("menu_back"),this.scheduleOnce(function(){this.shopUI.show()}.bind(this),.5))},gotoDefi:function(){this.curPanel!==r.DeFi&&this.scheduleOnce(function(){this.DefiUI.show()}.bind(this),.5)},gotoRisk:function(){this.curPanel!==r.Risk&&this.scheduleOnce(function(){this.RiskUI.show()}.bind(this),.5)},gotoBox:function(){cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/weapPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/Shop").getComponent("ShopUI").hide(),cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").hide(),cc.find("Canvas/defiPanel").getComponent("DefiUI").hide(),cc.find("Canvas/riskPanel").getComponent("RiskUI").hide(),this.curPanel!==r.Box&&(this.menuAnim.play("menu_back"),this.scheduleOnce(function(){this.boxUI.show()}.bind(this),.4))},gotoHome:function(){cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/weapPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/Shop").getComponent("ShopUI").hide(),cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").hide(),cc.find("Canvas/defiPanel").getComponent("DefiUI").hide(),cc.find("Canvas/riskPanel").getComponent("RiskUI").hide(),this.curPanel!==r.Home&&(this.curPanel===r.Shop?(this.shopUI.hide(),this.curPanel=r.Home,this.scheduleOnce(function(){this.menuAnim.play("menu_intro")}.bind(this),1.5)):this.curPanel===r.Box&&(this.boxUI.hide(),this.curPanel=r.Home,this.scheduleOnce(function(){this.menuAnim.play("menu_intro")}.bind(this),1.5)))},gotoKill:function(){cc.director.loadScene("PlayGame")},buyBox1:function(){this.buyboxAnim.play("home_buybox"),cc.find("CCC").getComponent("CCCManager").buybox(1)},buyBox5:function(){this.buyboxAnim.play("home_buybox"),cc.find("CCC").getComponent("CCCManager").buybox(5)}}),cc._RF.pop()},{BackPackUI:"BackPackUI",BoxUI:"BoxUI",DefiUI:"DefiUI",RiskUI:"RiskUI",ShopUI:"ShopUI"}],InGameUI:[function(e,t){"use strict";cc._RF.push(t,"8df10iIWI5JgrcFs/5AlGtD","InGameUI"),cc.Class({extends:cc.Component,properties:{waveUI:cc.Node,killDisplay:cc.Node,comboDisplay:cc.Node},init:function(){this.waveUI=this.waveUI.getComponent("WaveUI"),this.waveUI.node.active=!1,this.killDisplay=this.killDisplay.getComponent("KillDisplay"),this.killDisplay.node.active=!1,this.comboDisplay=this.comboDisplay.getComponent("ComboDisplay"),this.comboDisplay.init()},showWave:function(e){this.waveUI.node.active=!0,this.waveUI.show(e)},showKills:function(e){this.killDisplay.playKill(e)},addCombo:function(){this.comboDisplay.playCombo()}}),cc._RF.pop()},{}],ItemList:[function(e,t){"use strict";cc._RF.push(t,"17835Y2g5RH1YfRoE2gXjcq","ItemList");var n=cc.Class({name:"Item",properties:{id:0,itemName:"",itemPrice:0,iconSF:cc.SpriteFrame}});cc.Class({extends:cc.Component,properties:{items:{default:[],type:n},itemPrefab:cc.Prefab},onLoad:function(){for(var e=0;e<this.items.length;++e){var t=cc.instantiate(this.itemPrefab),n=this.items[e];this.node.addChild(t),t.getComponent("ItemTemplate").init({id:n.id,itemName:n.itemName,itemPrice:n.itemPrice,iconSF:n.iconSF})}}}),cc._RF.pop()},{}],ItemTemplate:[function(e,t){"use strict";cc._RF.push(t,"84c0a/TcQhJQ5lSYyY4gUa6","ItemTemplate"),cc.Class({extends:cc.Component,properties:{id:0,icon:cc.Sprite,itemName:cc.Label,itemPrice:cc.Label},init:function(e){this.id=e.id,this.icon.spriteFrame=e.iconSF,this.itemName.string=e.itemName,this.itemPrice.string=e.itemPrice}}),cc._RF.pop()},{}],KillDisplay:[function(e,t){"use strict";cc._RF.push(t,"592dd/u1/tEOJgCdwAZWLVG","KillDisplay"),cc.Class({extends:cc.Component,properties:{labelKills:cc.Label,anim:cc.Animation},playKill:function(e){this.node.active=!0,this.labelKills.string=e,this.anim.play("kill-pop")},hide:function(){this.node.active=!1}}),cc._RF.pop()},{}],LanguageData:[function(e,t){"use strict";cc._RF.push(t,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var n=e("polyglot.min"),a=cc._decorator,i=(a.ccclass,a.property,null);window.i18n||(window.i18n={languages:{zh:e("../i18n/zh"),en:e("../i18n/en")},curLang:""}),window.i18n.curLang="en";var o=cc.sys.localStorage.getItem("curLang");function s(e){return window.i18n.languages[e]}function r(e){e&&(i?i.replace(e):i=new n({phrases:e,allowMissing:!0}))}o&&(window.i18n.curLang=o),r(s(window.i18n.curLang)||{}),t.exports={init:function(e){if(e!==window.i18n.curLang){var t=s(e)||{};window.i18n.curLang=e,r(t),this.inst=i}},t:function(e,t){if(i)return i.t(e,t)},inst:i,updateSceneRenderers:function(){for(var e=cc.director.getScene().children,t=[],n=0;n<e.length;++n){var a=e[n].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(t,a)}for(var i=0;i<t.length;++i){var o=t[i];o.node.active&&o.updateLabel()}for(var s=[],r=0;r<e.length;++r){var c=e[r].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(s,c)}for(var l=0;l<s.length;++l){var h=s[l];h.node.active&&h.updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"../i18n/en":"en","../i18n/zh":"zh","polyglot.min":"polyglot.min"}],LocalizedLabel:[function(e,t){"use strict";cc._RF.push(t,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var n=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:""},onLoad:function(){n.inst||n.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e)return this.label=e,void this.updateLabel()},updateLabel:function(){this.label?n.t(this.dataID)&&(this.label.string=n.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(e,t){"use strict";cc._RF.push(t,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var n=e("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:n}},onLoad:function(){this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(e){for(var t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame},updateSprite:function(e){if(this.sprite){var t=this.getSpriteFrameByLang(e);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=t}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],MainMenu:[function(e,t){"use strict";cc._RF.push(t,"1bc0eZACFdK24h0UsytreOq","MainMenu");var n=e("MenuSidebar");cc.Class({extends:cc.Component,properties:{sidebar:n,roller:cc.Node,panelWidth:0,tabSwitchDuration:0},onLoad:function(){this.sidebar.init(this),this.curPanelIdx=0,this.roller.x=this.curPanelIdx*-this.panelWidth},switchPanel:function(e){this.curPanelIdx=e;var t=this.curPanelIdx*-this.panelWidth,n=cc.moveTo(this.tabSwitchDuration,cc.v2(t,0)).easing(cc.easeQuinticActionInOut()),a=cc.callFunc(this.onSwitchPanelFinished,this);this.roller.stopAllActions(),cc.director.getScheduler().pauseTarget(this.roller),this.roller.runAction(cc.sequence(n,a))},onSwitchPanelFinished:function(){cc.director.getScheduler().resumeTarget(this.roller)}}),cc._RF.pop()},{MenuSidebar:"MenuSidebar"}],MenuSidebar:[function(e,t){"use strict";cc._RF.push(t,"95628GDDSZIYpJENqXlvcpc","MenuSidebar"),cc.Class({extends:cc.Component,properties:{tabIcons:{default:[],type:cc.SpriteFrame},tabPrefab:cc.Prefab,container:cc.Node,highlight:cc.Node,tabWidth:0},init:function(e){this.mainMenu=e,this.tabSwitchDuration=e.tabSwitchDuration,this.curTabIdx=0,this.tabs=[];for(var t=0;t<this.tabIcons.length;++t){var n=this.tabIcons[t],a=cc.instantiate(this.tabPrefab).getComponent("TabCtrl");this.container.addChild(a.node),a.init({sidebar:this,idx:t,iconSF:n}),this.tabs[t]=a}this.tabs[this.curTabIdx].turnBig(),this.highlight.x=this.curTabIdx*this.tabWidth},tabPressed:function(e){for(var t=0;t<this.tabs.length;++t){var n=this.tabs[t];n.idx===e?(n.turnBig(),cc.director.getScheduler().pauseTarget(n.node)):this.curTabIdx===n.idx&&(n.turnSmall(),cc.director.getScheduler().resumeTarget(n.node))}this.curTabIdx=e;var a=cc.moveTo(this.tabSwitchDuration,cc.v2(this.curTabIdx*this.tabWidth)).easing(cc.easeQuinticActionInOut());this.highlight.stopAllActions(),this.highlight.runAction(a),this.mainMenu.switchPanel(this.curTabIdx)}}),cc._RF.pop()},{}],Move:[function(e,t){"use strict";cc._RF.push(t,"03fecYvs+9L07SPviQLuLj3","Move");var n=cc.Enum({None:-1,Stand:-1,Up:-1,Right:-1,Down:-1,Left:-1});cc.Class({extends:cc.Component,properties:{moveSpeed:0,anim:{default:null,type:cc.Animation}},statics:{MoveState:n},onLoad:function(){this.moveState=n.Stand,this.node.on("stand",this.stand,this),this.node.on("freeze",this.stop,this),this.node.on("update-dir",this.updateDir,this)},stand:function(){this.moveState!==n.Stand&&(this.anim.play("stand"),this.moveState=n.Stand)},stop:function(){this.anim.stop(),this.moveState=n.None,this.moveDir=null},moveUp:function(){this.moveState!==n.Up&&(this.anim.play("run_up"),this.anim.node.scaleX=1,this.moveState=n.Up)},moveDown:function(){this.moveState!==n.Down&&(this.anim.play("run_down"),this.anim.node.scaleX=1,this.moveState=n.Down)},moveRight:function(){this.moveState!==n.Right&&(this.anim.play("run_right"),this.anim.node.scaleX=1,this.moveState=n.Right)},moveLeft:function(){this.moveState!==n.Left&&(this.anim.play("run_right"),this.anim.node.scaleX=-1,this.moveState=n.Left)},updateDir:function(e){this.moveDir=e.dir},update:function(e){if(this.moveDir){this.node.x+=this.moveSpeed*this.moveDir.x*e,this.node.y+=this.moveSpeed*this.moveDir.y*e;var t=cc.misc.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x));t>=45&&t<135?this.moveUp():t>=135||t<-135?this.moveLeft():t>=-45&&t<45?this.moveRight():this.moveDown()}else this.moveState!==n.None&&this.stand()}}),cc._RF.pop()},{}],NodePool:[function(e,t){"use strict";cc._RF.push(t,"4762cqE38NHn451+NhWnQ5U","NodePool");var n=cc.Class({name:"NodePool",properties:{prefab:cc.Prefab,size:0},ctor:function(){this.idx=0,this.initList=[],this.list=[]},init:function(){for(var e=0;e<this.size;++e){var t=cc.instantiate(this.prefab);this.initList[e]=t,this.list[e]=t}this.idx=this.size-1},reset:function(){for(var e=0;e<this.size;++e){var t=this.initList[e];this.list[e]=t,t.active&&(t.active=!1),t.parent&&t.removeFromParent()}this.idx=this.size-1},request:function(){if(this.idx<0)return cc.log("Error: the pool do not have enough free item."),null;var e=this.list[this.idx];return e&&(e.active=!0),--this.idx,e},return:function(e){++this.idx,e.active=!1,e.parent&&e.removeFromParent(),this.list[this.idx]=e}});t.exports=n,cc._RF.pop()},{}],PanelTransition:[function(e,t){"use strict";cc._RF.push(t,"e5284RIOh1C4Jyzfa64lV9l","PanelTransition"),cc.Class({extends:cc.Component,properties:{duration:0},onLoad:function(){this.outOfWorld=cc.v2(3e3,0),this.node.position=this.outOfWorld;var e=cc.callFunc(this.onFadeOutFinish,this),t=cc.callFunc(this.onFadeInFinish,this);this.actionFadeIn=cc.sequence(cc.spawn(cc.fadeTo(this.duration,255),cc.scaleTo(this.duration,1)),t),this.actionFadeOut=cc.sequence(cc.spawn(cc.fadeTo(this.duration,0),cc.scaleTo(this.duration,2)),e),this.node.on("fade-in",this.startFadeIn,this),this.node.on("fade-out",this.startFadeOut,this)},startFadeIn:function(){cc.director.getScheduler().pauseTarget(this.node),this.node.position=cc.v2(0,0),this.node.setScale(2),this.node.opacity=0,this.node.runAction(this.actionFadeIn)},startFadeOut:function(){cc.director.getScheduler().pauseTarget(this.node),this.node.runAction(this.actionFadeOut)},onFadeInFinish:function(){cc.director.getScheduler().resumeTarget(this.node)},onFadeOutFinish:function(){this.node.position=this.outOfWorld}}),cc._RF.pop()},{}],PanelUI:[function(e,t){"use strict";cc._RF.push(t,"7ce68dcvu9MRbNg+7MtDSGk","PanelUI"),cc.Class({extends:cc.Component,properties:{},init:function(){},show:function(){this.node.active=!0,this.node.emit("fade-in");var e=cc.find("Canvas/heroPanel/success");e&&e.active&&cc.tween(e).to(1,{scale:3}).by(1,{scale:1}).to(1,{scale:1}).start();var t=cc.find("Canvas/weapPanel/success");t&&t.active&&cc.tween(t).to(1,{scale:3}).by(1,{scale:1}).to(1,{scale:1}).start()},hide:function(){this.node.emit("fade-out"),cc.find("Canvas/heroPanel/fx/bg_eff1").active=!1,cc.find("Canvas/heroPanel/fx/bg_eff2").active=!1,cc.find("Canvas/heroPanel/fx/bg_eff3").active=!1,cc.find("Canvas/heroPanel/success").active=!1,cc.find("Canvas/weapPanel/fx/bg_eff1").active=!1,cc.find("Canvas/weapPanel/fx/bg_eff2").active=!0,cc.find("Canvas/weapPanel/fx/bg_eff3").active=!1,cc.find("Canvas/weapPanel/success").active=!1}}),cc._RF.pop()},{}],PlayerFX:[function(e,t){"use strict";cc._RF.push(t,"473ddOy0BlLraG4rFvYcoyb","PlayerFX"),cc.Class({extends:cc.Component,properties:{introAnim:cc.Animation,reviveAnim:cc.Animation},init:function(e){this.game=e,this.introAnim.node.active=!1,this.reviveAnim.node.active=!1},playIntro:function(){this.introAnim.node.active=!0,this.introAnim.play("start")},playRevive:function(){this.reviveAnim.node.active=!0,this.reviveAnim.node.setPosition(this.game.player.node.position),this.reviveAnim.play("revive")},introFinish:function(){this.game.playerReady(),this.introAnim.node.active=!1},reviveFinish:function(){this.game.playerReady(),this.reviveAnim.node.active=!1},reviveKill:function(){this.game.clearAllFoes()}}),cc._RF.pop()},{}],Player:[function(e,t){"use strict";cc._RF.push(t,"b7fe1Feo8hKMoqKLY3I4z0F","Player"),cc.Class({extends:cc.Component,properties:{fxTrail:cc.ParticleSystem,spArrow:cc.Node,ccchero:cc.Node,hpBar:cc.Node,sfAtkDirs:[cc.SpriteFrame],attachPoints:[cc.Vec2],sfPostAtks:[cc.SpriteFrame],spPlayer:cc.Sprite,spSlash:cc.Sprite,hurtRadius:0,touchThreshold:0,touchMoveThreshold:0,hitPoint:0,hp:0,attack:0,defense:0,speed:0,damage:0,heroCate:0,crit:0,accuracy:0,impale:0,weapCate:0,atkDist:0,atkDuration:0,atkStun:0,invincible:!1},init:function(e){this.game=e,this.anim=this.getComponent("Move").anim,this.inputEnabled=!1,this.isAttacking=!1,this.isAlive=!0,this.nextPoseSF=null,this.registerInput(),this.spArrow.active=!1,this.atkTargetPos=cc.v2(0,0),this.isAtkGoingOut=!1,this.validAtkRect=cc.rect(25,25,1.71*(this.node.parent.width-50),1.11*(this.node.parent.height-50)),this.oneSlashKills=0,this.kills=0,this.facedir=1},registerInput:function(){var e=this;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(t){if(!1===e.inputEnabled)return!0;var n=t.getLocation();return e.touchBeganLoc=n,e.moveToPos=e.node.parent.convertToNodeSpaceAR(n),e.touchStartTime=Date.now(),!0},onTouchMoved:function(t){if(!1!==e.inputEnabled){var n=t.getLocation();e.spArrow.active=!0,e.moveToPos=e.node.parent.convertToNodeSpaceAR(n),e.touchBeganLoc.sub(n).mag()>e.touchMoveThreshold&&(e.hasMoved=!0)}},onTouchEnded:function(t){if(!1!==e.inputEnabled){e.spArrow.active=!1,e.moveToPos=null,e.node.emit("update-dir",{dir:null});var n=e.isTouchHold();if(!e.hasMoved&&!n){var a=t.getLocation(),i=e.node.parent.convertToNodeSpaceAR(a),o=e.node.getComponent("camera").mainCamera.node.position,s=i.add(o).sub(e.node.position);e.atkTargetPos=e.node.position.add(s.normalize().mul(e.atkDist));var r=e.node.parent.convertToWorldSpaceAR(e.atkTargetPos);e.validAtkRect.contains(r)?e.isAtkGoingOut=!1:e.isAtkGoingOut=!0,e.node.emit("freeze"),e.oneSlashKills=0,e.attackOnTarget(s,e.atkTargetPos)}e.hasMoved=!1}}},e.node)},ready:function(){this.fxTrail.resetSystem(),this.node.emit("stand"),this.inputEnabled=!0,this.isAlive=!0},isTouchHold:function(){return Date.now()-this.touchStartTime>=this.touchThreshold},attackOnTarget:function(e,t){var n=this,a=cc.misc.radiansToDegrees(cc.v2(0,1).signAngle(e)),i=[0,12,35,56,79,101,124,146,168,180],o=null;function s(e,t){for(var a=null,s=1;s<i.length;++s){var r=i[s-1];if(e<=i[s]&&e>r)return a=t[s-1],n.nextPoseSF=n.sfPostAtks[Math.floor((s-1)/3)],o=n.attachPoints[s-1],a}if(null===a)return console.error("cannot find correct attack pose sprite frame! mag: "+e),null}var r=Math.abs(a);a<=0?(this.spPlayer.node.scaleX=1,this.spPlayer.spriteFrame=s(r,this.sfAtkDirs)):(this.spPlayer.node.scaleX=-1,this.spPlayer.spriteFrame=s(r,this.sfAtkDirs));var c=cc.moveTo(this.atkDuration,t).easing(cc.easeQuinticActionOut()),l=cc.delayTime(this.atkStun),h=cc.callFunc(this.onAtkFinished,this);this.node.runAction(cc.sequence(c,l,h)),this.spSlash.node.position=o,this.spSlash.node.rotation=r,this.spSlash.enabled=!0,this.spSlash.getComponent(cc.Animation).play("slash"),e.x<50&&e.x>-50?this.ccchero.getComponent("hero").attackAni2(0):e.y>=60?this.ccchero.getComponent("hero").attackAni2(1):e.y<60&&e.y>-60?this.ccchero.getComponent("hero").attackAni2(3):e.y<=-60&&this.ccchero.getComponent("hero").attackAni2(2),this.inputEnabled=!1,this.isAttacking=!0},onAtkFinished:function(){this.nextPoseSF&&(this.spPlayer.spriteFrame=this.nextPoseSF),this.spSlash.enabled=!1,this.inputEnabled=!0,this.isAttacking=!1,this.isAtkGoingOut=!1,this.oneSlashKills>=3&&(this.game.inGameUI.showKills(this.oneSlashKills),this.kills=this.kills+this.oneSlashKills)},addKills:function(){this.oneSlashKills++,this.kills++,this.game.inGameUI.addCombo()},revive:function(){var e=cc.callFunc(function(){this.node.active=!1}.bind(this));cc.sequence(cc.delayTime(.6),e)},dead:function(){this.invincible||(this.ccchero.getComponent("hero").damage(),--this.hp>0?(this.hpBar.width=this.hp/this.hitPoint*60,this.isInvincible=!0,this.scheduleOnce(this.onInvincibleEnd,2)):(this.hpBar.width=0,this.node.emit("freeze"),this.isAlive=!1,this.isAttacking=!1,this.inputEnabled=!1,this.scheduleOnce(this.corpse,2),this.anim.play("dead")))},dead2:function(e,t){if(!this.invincible){this.ccchero.getComponent("hero").damage();var n=this.calDamage(e,t);this.hp-=n,this.hp>0?(this.hpBar.width=this.hp/this.hitPoint*60,this.isInvincible=!0,this.scheduleOnce(this.onInvincibleEnd,2)):(this.hpBar.width=0,this.node.emit("freeze"),this.isAlive=!1,this.isAttacking=!1,this.inputEnabled=!1,this.scheduleOnce(this.corpse,2),this.anim.play("dead"))}},corpse:function(){this.anim.play("corpse"),this.scheduleOnce(this.death,.7),cc.sys.localStorage.setItem("kills",this.kills)},death:function(){this.game.death()},updateHero:function(e){this.ccchero.getComponent("hero").updateHero(e.hero[0]);var t=JSON.parse(e.hero[0].mdata.replace(/'/g,'"'));if(this.hitPoint=t.hp,this.hp=t.hp,this.attack=t.attack,this.defense=t.defense,this.speed=t.speed,this.heroCate=e.hero[0].category,this.hpBar.width=this.hp/this.hitPoint*60,this.atkDist=200+5*this.attack,this.atkDist>400&&(this.atkDist=400),this.atkStun=.3-.003*this.speed,this.atkStun<.05&&(this.atkStun=.05),null!=e.weapon&&null!=e.weapon[0]){this.ccchero.getComponent("hero").updateWep(e.weapon[0]);var n=JSON.parse(e.weapon[0].mdata.replace(/'/g,'"'));this.damage=n.damage,this.crit=n.crit,this.accuracy=n.accuracy,this.impale=n.impale,this.weapCate=e.weapon[0].category}else this.damage=0,this.crit=0,this.accuracy=0,this.impale=0,this.weapCate=0},calAtk:function(e){var t=this.attack+this.damage;return 0==this.heroCate?(0==e||1==this.weapCate&&2==e||2==this.weapCate&&5==e||3==this.weapCate&&4==e||4==this.weapCate&&1==e||5==this.weapCate&&3==e)&&(t=t+this.attack+this.damage):(1==this.heroCate&&2==e||2==this.heroCate&&5==e||3==this.heroCate&&4==e||4==this.heroCate&&1==e||5==this.heroCate&&3==e)&&(t=t+this.attack+this.damage),t},calDamage:function(e,t){var n=e-this.defense;return n<0&&(n=1),(0==this.heroCate&&0==t||1==this.heroCate&&4==t||2==this.heroCate&&1==t||3==this.heroCate&&5==t||4==this.heroCate&&3==t||5==this.heroCate&&2==t)&&(n+=e),n},shouldStopAttacking:function(){var e=this.node.parent.convertToWorldSpaceAR(this.node.position),t=this.node.parent.convertToWorldSpaceAR(this.atkTargetPos);return e.x<this.validAtkRect.xMin&&t.x<this.validAtkRect.xMin||e.x>this.validAtkRect.xMax&&t.x>this.validAtkRect.xMax||e.y<this.validAtkRect.yMin&&t.y<this.validAtkRect.yMin||e.y>this.validAtkRect.yMax&&t.y>this.validAtkRect.yMax},onInvincibleEnd:function(){this.isInvincible=!1},update:function(){if(!1!==this.isAlive){if(this.isAttacking&&this.isAtkGoingOut&&this.shouldStopAttacking()&&(this.node.stopAllActions(),this.onAtkFinished()),this.moveToPos){var e=this.moveToPos.sub(this.node.position);e.x<0&&-1==this.facedir?(this.facedir=1,this.ccchero.getComponent("hero").facedir(1)):e.x>0&&1==this.facedir&&(this.facedir=-1,this.ccchero.getComponent("hero").facedir(-1))}if(this.inputEnabled&&this.moveToPos&&this.isTouchHold()){var t=this.moveToPos.sub(this.node.position);this.ccchero.getComponent("hero").move();var n=Math.atan2(t.y,t.x),a=cc.misc.radiansToDegrees(n);this.spArrow.rotation=90-a,this.node.emit("update-dir",{dir:t.normalize()})}cc.find("Canvas/root/InGameUI/txt_kills").getComponent(cc.Label).string=this.kills}}}),cc._RF.pop()},{}],PoolMng:[function(e,t){"use strict";cc._RF.push(t,"15ae69NDTlDzprf2vQCDLLb","PoolMng");var n=e("NodePool"),a=(e("Types").FoeType,e("Types").ProjectileType,e("BGPool"));e("Types").BGs,cc.Class({extends:cc.Component,properties:{foePools:{default:[],type:n},projectilePools:{default:[],type:n},BGPools:{default:[],type:a}},init:function(){for(var e=0;e<this.foePools.length;++e)this.foePools[e].init();for(var t=0;t<this.projectilePools.length;++t)this.projectilePools[t].init();var n=0,a=cc.sys.localStorage.getItem("curStage");a&&(n=a),this.BGPools[n].init()},requestFoe:function(e){var t=this.foePools[e];return t.idx>=0?t.request():null},returnFoe:function(e,t){var n=this.foePools[e];n.idx<n.size?n.return(t):cc.log("Return obj to a full pool, something has gone wrong")},requestProjectile:function(e){var t=this.projectilePools[e];return t.idx>=0?t.request():null},returnProjectile:function(e,t){var n=this.projectilePools[e];n.idx<n.size?n.return(t):cc.log("Return obj to a full pool, something has gone wrong")}}),cc._RF.pop()},{BGPool:"BGPool",NodePool:"NodePool",Types:"Types"}],Projectile:[function(e,t){"use strict";cc._RF.push(t,"bd907OrsYVGJpMAP56xffaF","Projectile");var n=e("Types").ProjectileType;cc.Class({extends:cc.Component,properties:{projectileType:{default:n.Arrow,type:n},sprite:cc.Sprite,fxBroken:cc.Animation,moveSpeed:0,canBreak:!0},init:function(e,t){this.waveMng=e,this.player=e.player;var n=Math.atan2(t.y,t.x),a=90-cc.misc.radiansToDegrees(n);this.sprite.node.rotation=a,this.sprite.enabled=!0,this.direction=t.normalize(),this.isMoving=!0},broke:function(){this.isMoving=!1,this.sprite.enabled=!1,this.fxBroken.node.active=!0,this.fxBroken.play("arrow-break")},hit:function(){this.isMoving=!1,this.onBrokenFXFinished()},onBrokenFXFinished:function(){this.fxBroken.node.active=!1,this.waveMng.despawnProjectile(this)},update:function(e){if(!1!==this.isMoving){if(this.player.node.position.sub(this.node.position).mag()<this.player.hurtRadius&&this.player.isAlive)return this.canBreak&&this.player.isAttacking?void this.broke():(this.player.dead2(150,0),void this.hit());this.isMoving&&(this.node.x+=this.moveSpeed*this.direction.x*e,this.node.y+=this.moveSpeed*this.direction.y*e,(Math.abs(this.node.x)>this.waveMng.foeGroup.width/2||Math.abs(this.node.y)>this.waveMng.foeGroup.height/2)&&this.onBrokenFXFinished())}}}),cc._RF.pop()},{Types:"Types"}],RiskUI:[function(e,t){"use strict";var n;cc._RF.push(t,"9c9f1zu9ItI/IvwkeXw3/u9","RiskUI"),cc.Class({extends:cc.Component,properties:{stagePrefab:{default:null,type:cc.Prefab},scrollView:{default:null,type:cc.ScrollView}},init:function(e){this.home=e},addStageSlot:function(e){var t=cc.instantiate(this.stagePrefab);t.getChildByName("mask").active=!0,t.getChildByName("btn").active=!1,this.scrollView.content.addChild(t),t.getComponent("stage").updateStage(e);var n=new cc.Component.EventHandler;return n.target=this.node,n.component="RiskUI",n.handler="onClickItem",n.customEventData={index:e},t.getComponent("stage").dbbutton.clickEvents.push(n),t},onClickItem:function(e,t){e.target;var n=t.index;cc.sys.localStorage.setItem("curStage",n),cc.find("CCC").getComponent("CCCManager").setPlayGame(1),cc.director.loadScene("PlayGame")},setRiskData:function(){var e=Date.parse(new Date)/1e3,t=0,a=1,i=cc.sys.localStorage.getItem("poolData");if(i&&(n=JSON.parse(i)),n.userList&&(t=n.userList.tpower),n.players&&n.players[0].lasttime&&(a=Math.floor(n.players[0].lasttime+14400-e)),a<0&&(a=0),cc.find("Canvas/riskPanel/num_tpower").getComponent(cc.Label).string=t,cc.find("Canvas/riskPanel/num_time").getComponent(cc.Label).string=Math.floor(a/3600).toString()+":"+Math.floor(a%3600/60).toString()+":"+(a%60<10?"0":"")+a%60,t>1e5&&(cc.find("Canvas/riskPanel/limit/lab_tpower/false").active=!1),1==n.players[0].onplay&&(cc.find("Canvas/riskPanel/limit/lab_ccc/false").active=!1),0==a&&(cc.find("Canvas/riskPanel/limit/lab_time/false").active=!1),1==n.players[0].onplay&&0==a&&this.stageSlots)for(var o=0;o<this.stageSlots.length;++o)this.stageSlots[o].getChildByName("mask").active=!1,this.stageSlots[o].getChildByName("btn").active=!0},onPlay:function(){n.players[0].onplay=1,cc.find("Canvas/riskPanel/limit/lab_ccc/false").active=!1},show:function(){cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/weapPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),cc.find("Canvas/defiPanel").getComponent("DefiUI").hide(),cc.find("Canvas/Shop").getComponent("ShopUI").hide(),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").hide(),cc.find("Canvas/riskPanel/limit/lab_tpower/false").active=!0,cc.find("Canvas/riskPanel/limit/lab_time/false").active=!0,cc.find("Canvas/riskPanel/limit/lab_ccc/false").active=!0;var e=cc.sys.localStorage.getItem("poolData");if(e&&(n=JSON.parse(e)),this.stageSlots)for(var t=0;t<this.stageSlots.length;++t)this.stageSlots[t].destroy();this.stageSlots=[];var a=cc.instantiate(this.stagePrefab);this.stageSlots.push(a);for(var i=0;i<a.getComponent("stage").bgs.length;++i){var o=this.addStageSlot(i);o&&this.stageSlots.push(o)}this.node.active=!0,this.node.emit("fade-in"),this.home.toggleHomeBtns(!1)},hide:function(){if(this.stageSlots)for(var e=0;e<this.stageSlots.length;++e)this.stageSlots[e].destroy();cc.find("Canvas/riskPanel/limit/lab_tpower/false").active=!0,cc.find("Canvas/riskPanel/limit/lab_time/false").active=!0,cc.find("Canvas/riskPanel/limit/lab_ccc/false").active=!0,this.node.emit("fade-out"),this.home.toggleHomeBtns(!0)},update:function(){this.setRiskData()}}),cc._RF.pop()},{}],ShopUI:[function(e,t){"use strict";cc._RF.push(t,"9fbcf0UiNFEvZYPQa9crk/y","ShopUI");var n,a,i=[],o=[],s=[],r=999,c=999,l=[],h=[],u=[],p="hero";cc.Class({extends:cc.Component,properties:{slotPrefab:{default:null,type:cc.Prefab},slotPrefabWeap:{default:null,type:cc.Prefab},scrollView:{default:null,type:cc.ScrollView},btnPre:cc.Node,btnNext:cc.Node},init:function(e){this.home=e},addHeroSlot:function(e){var t=cc.instantiate(this.slotPrefab);this.scrollView.content.addChild(t),t.getComponent("HeroSlot").updateHeroslot(i[e].genes),t.getComponent("HeroSlot").refresh(i[e]),t.getChildByName("tit").getComponent(cc.Label).string=i[e].price;var n=new cc.Component.EventHandler;return n.target=this.node,n.component="ShopUI",n.handler="onClickItem",n.customEventData={index:e},t.getComponent("HeroSlot").dbbutton.clickEvents.push(n),t},onClickItem:function(e,t){e.target;var n=t.index,a=cc.find("Canvas/heroPanel");a.getChildByName("hero01").getComponent("hero").updateHero(i[n]),a.getComponent("heroPanelUI").updatePanelDate(i[n]),a.getComponent("PanelUI").show(),a.getChildByName("btnPanDefi").active=!1,a.getChildByName("btnPanSwap").active=!0,a.getChildByName("btnPanMine").active=!1,cc.find("Canvas/heroPanel/info/nftprice").active=!0},addWeapSlot:function(e){var t=cc.instantiate(this.slotPrefabWeap);this.scrollView.content.addChild(t),t.getComponent("WeapSlot").updateWeapslot(l[e].genes),t.getComponent("WeapSlot").refresh(l[e]),t.getChildByName("tit").getComponent(cc.Label).string=l[e].price;var n=new cc.Component.EventHandler;return n.target=this.node,n.component="ShopUI",n.handler="onClickWeap",n.customEventData={index:e},t.getComponent("WeapSlot").dbbutton.clickEvents.push(n),t},onClickWeap:function(e,t){e.target;var n=t.index,a=cc.find("Canvas/weapPanel");a.getChildByName("swordMax").getComponent("swordMax").updateWeap(l[n]),a.getComponent("weapPanelUI").updatePanelDate(l[n]),a.getComponent("PanelUI").show(),a.getChildByName("btnPanDefi").active=!1,a.getChildByName("btnPanSwap").active=!0,a.getChildByName("btnPanMine").active=!1,cc.find("Canvas/weapPanel/info/nftprice").active=!0},show:function(){if(cc.find("Canvas/heroPanel").getComponent("PanelUI").hide(),cc.find("Canvas/weapPanel").getComponent("PanelUI").hide(),cc.find("Canvas/upgradePanel").getComponent("upgradePanel").hide(),cc.find("Canvas/backPack").getComponent("BackPackUI").hide(),cc.find("Canvas/defiPanel").getComponent("DefiUI").hide(),cc.find("Canvas/tipPanel").getComponent("TipPanelUI").hide(),cc.find("Canvas/riskPanel").getComponent("RiskUI").hide(),cc.find("Canvas/Shop/tab/tab_hero/btn_herotype_on").active=!0,cc.find("Canvas/Shop/tab/tab_hero/btn_herotype_off").active=!1,cc.find("Canvas/Shop/tab/tab_weap/btn_weaptype_on").active=!1,cc.find("Canvas/Shop/tab/tab_weap/btn_weaptype_off").active=!0,p="hero",this.heroSlots)for(var e=0;e<this.heroSlots.length;++e)this.heroSlots[e].destroy();var t=cc.sys.localStorage.getItem("swapHeroData");t&&(o=JSON.parse(t),s=o),n=1,a=parseInt(s.length/36)+1,999!=r&&this.selectCate(this,r),i=s.slice(0,36),this.checkPage(),this.heroSlots=[];for(var c=0;c<i.length;++c){var l=this.addHeroSlot(c);this.heroSlots.push(l)}this.node.active=!0,this.node.emit("fade-in"),this.home.toggleHomeBtns(!1)},turnType:function(e,t){if(cc.find("Canvas/Shop/catePan/all").getComponent(cc.Toggle).isChecked=!0,cc.find("Canvas/Shop/sortPan/nftup").getComponent(cc.Toggle).isChecked=!0,this.heroSlots)for(var d=0;d<this.heroSlots.length;++d)this.heroSlots[d].destroy();var f;if(this.heroSlots=[],r=999,c=999,"weap"==t){cc.find("Canvas/Shop/tab/tab_hero/btn_herotype_on").active=!1,cc.find("Canvas/Shop/tab/tab_hero/btn_herotype_off").active=!0,cc.find("Canvas/Shop/tab/tab_weap/btn_weaptype_on").active=!0,cc.find("Canvas/Shop/tab/tab_weap/btn_weaptype_off").active=!1,p="weap",(f=cc.sys.localStorage.getItem("swapWeapData"))&&(h=JSON.parse(f),u=h),n=1,a=parseInt(u.length/36)+1,999!=r&&this.selectCate(this,r),l=u.slice(0,36),this.checkPage();for(var m=0;m<l.length;++m)if(null!=l[m]){var g=this.addWeapSlot(m);this.heroSlots.push(g)}}else{cc.find("Canvas/Shop/tab/tab_hero/btn_herotype_on").active=!0,cc.find("Canvas/Shop/tab/tab_hero/btn_herotype_off").active=!1,cc.find("Canvas/Shop/tab/tab_weap/btn_weaptype_on").active=!1,cc.find("Canvas/Shop/tab/tab_weap/btn_weaptype_off").active=!0,p="hero",(f=cc.sys.localStorage.getItem("swapHeroData"))&&(o=JSON.parse(f),s=o),n=1,a=parseInt(s.length/36)+1,999!=r&&this.selectCate(this,r),i=s.slice(0,36),this.checkPage();for(var v=0;v<i.length;++v)if(null!=i[v]){var b=this.addHeroSlot(v);this.heroSlots.push(b)}}this.node.active=!0,this.node.emit("fade-in"),this.home.toggleHomeBtns(!1)},hide:function(){if(cc.find("Canvas/Shop/catePan/all").getComponent(cc.Toggle).isChecked=!0,cc.find("Canvas/Shop/sortPan/nftup").getComponent(cc.Toggle).isChecked=!0,this.heroSlots)for(var e=0;e<this.heroSlots.length;++e)this.heroSlots[e].destroy();this.node.emit("fade-out"),this.home.toggleHomeBtns(!0)},checkPage:function(){this.btnPre.active=n>1,this.btnNext.active=a>n},goToNext:function(){for(var e=0;e<this.heroSlots.length;++e)this.heroSlots[e].destroy();if(n+=1,this.checkPage(),this.heroSlots=[],"hero"==p){i=s.slice(36*(n-1),36*n);for(var t=0;t<i.length;++t){var a=this.addHeroSlot(t);this.heroSlots.push(a)}}else if("weap"==p){l=u.slice(36*(n-1),36*n);for(var o=0;o<l.length;++o){var r=this.addWeapSlot(o);this.heroSlots.push(r)}}},goToPre:function(){for(var e=0;e<this.heroSlots.length;++e)this.heroSlots[e].destroy();if(n-=1,this.checkPage(),this.heroSlots=[],"hero"==p){i=s.slice(36*(n-1),36*n);for(var t=0;t<i.length;++t){var a=this.addHeroSlot(t);this.heroSlots.push(a)}}else if("weap"==p){l=u.slice(36*(n-1),36*n);for(var o=0;o<l.length;++o){var r=this.addWeapSlot(o);this.heroSlots.push(r)}}},selectCate:function(e,t){if(r!=t){r=t;for(var d=0;d<this.heroSlots.length;++d)this.heroSlots[d].destroy();if(n=1,this.heroSlots=[],"hero"==p){s=999==t?o:o.filter(function(e){return e.category==t}),999!=c&&this.sortDate(this,c),a=parseInt(s.length/36)+1,i=s.slice(0,36);for(var f=0;f<i.length;++f){var m=this.addHeroSlot(f);this.heroSlots.push(m)}}else{u=999==t?h:h.filter(function(e){return e.category==t}),999!=c&&this.sortDate(this,c),a=parseInt(u.length/36)+1,l=u.slice(0,36);for(var g=0;g<l.length;++g){var v=this.addWeapSlot(g);this.heroSlots.push(v)}}this.checkPage()}},sortDate:function(e,t){if(c!=t){c=t;for(var a=0;a<this.heroSlots.length;++a)this.heroSlots[a].destroy();if(n=1,this.heroSlots=[],"hero"==p){s=1==t?s.sort(function(e,t){return parseFloat(e.nft_value)-parseFloat(t.nft_value)}):s.sort(function(e,t){return parseFloat(e.nft_value)-parseFloat(t.nft_value)}).reverse(),i=s.slice(0,36);for(var o=0;o<i.length;++o){var r=this.addHeroSlot(o);this.heroSlots.push(r)}}else{u=1==t?u.sort(function(e,t){return parseFloat(e.nft_value)-parseFloat(t.nft_value)}):u.sort(function(e,t){return parseFloat(e.nft_value)-parseFloat(t.nft_value)}).reverse(),l=u.slice(0,36);for(var h=0;h<l.length;++h){var d=this.addWeapSlot(h);this.heroSlots.push(d)}}this.checkPage()}}}),cc._RF.pop()},{}],ShowMask:[function(e,t){"use strict";cc._RF.push(t,"78c7dPnl5JF/p5GDHEQRYOC","ShowMask"),cc.Class({extends:cc.Component,start:function(){this.getComponent(cc.Sprite).enabled=!0}}),cc._RF.pop()},{}],SortMng:[function(e,t){"use strict";cc._RF.push(t,"61165e1leJB+4dbkFmx1myT","SortMng"),cc.Class({extends:cc.Component,properties:{},init:function(){this.frameCount=0},update:function(){++this.frameCount%6==0&&this.sortChildrenByY()},sortChildrenByY:function(){var e=this.node.children.slice();e.sort(function(e,t){return t.y-e.y});for(var t=0;t<e.length;++t){var n=e[t];n.active&&n.setSiblingIndex(t)}}}),cc._RF.pop()},{}],Spawn:[function(e,t){"use strict";cc._RF.push(t,"ff6d6lonApC6or/lKfhLG/z","Spawn");var n=e("Types").FoeType,a=cc.Class({name:"Spawn",properties:{foeType:{default:n.Foe0,type:n},total:0,spawnInterval:0,isCompany:!1},ctor:function(){this.spawned=0,this.finished=!1},spawn:function(e){if(!(this.spawned>=this.total)){var t=e.requestFoe(this.foeType);return t?(this.spawned++,this.spawned===this.total&&(this.finished=!0),t):(cc.log("max foe count reached, will delay spawn"),null)}}});t.exports=a,cc._RF.pop()},{Types:"Types"}],SpriteFrameSet:[function(e,t){"use strict";cc._RF.push(t,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var n=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});t.exports=n,cc._RF.pop()},{}],SubBtnsUI:[function(e,t){"use strict";cc._RF.push(t,"6907fq75H1EIrLmj/AFBg+B","SubBtnsUI"),cc.Class({extends:cc.Component,properties:{subBtnsAnim:cc.Animation,btnShowSub:cc.Button,btnHideSub:cc.Button,btnContainer:cc.Node},onLoad:function(){this.btnShowSub.node.active=!0,this.btnHideSub.node.active=!1},showSubBtns:function(){this.btnContainer.active=!0,this.subBtnsAnim.play("sub_pop")},hideSubBtns:function(){this.subBtnsAnim.play("sub_fold")},onFinishAnim:function(e){this.btnShowSub.node.active=e,this.btnHideSub.node.active=!e}}),cc._RF.pop()},{}],TabCtrl:[function(e,t){"use strict";cc._RF.push(t,"62208XJq9ZC2oNDeQGcbCab","TabCtrl"),cc.Class({extends:cc.Component,properties:{idx:0,icon:cc.Sprite,arrow:cc.Node,anim:cc.Animation},init:function(e){this.sidebar=e.sidebar,this.idx=e.idx,this.icon.spriteFrame=e.iconSF,this.node.on("touchstart",this.onPressed.bind(this),this.node),this.arrow.scale=cc.v2(0,0)},onPressed:function(){this.sidebar.tabPressed(this.idx)},turnBig:function(){this.anim.play("tab_turn_big")},turnSmall:function(){this.anim.play("tab_turn_small")}}),cc._RF.pop()},{}],TipPanelUI:[function(e,t){"use strict";cc._RF.push(t,"fe2fbXLQTFPxKiH8TBYh+Rt","TipPanelUI");var n=[{tit:"tip_nonetit",des:"tip_none"},{tit:"info_pricetit",des:"info_price"},{tit:"nav_store",des:"nav_risk"},{tit:"tip_systoptit",des:"tip_systop"},{tit:"tip_failtit",des:"tip_fail"},{tit:"tip_selltit",des:"tip_sell"},{tit:"tip_claimtit",des:"tip_claim"},{tit:"tip_unstaketit",des:"tip_unstake"},{tit:"tip_staketit",des:"tip_stake"},{tit:"tip_pooltit",des:"tip_pool"},{tit:"tip_pomelotit",des:"tip_pomelo"},{tit:"tip_risktit",des:"tip_risk"},{tit:"tip_comtit",des:"tip_com"}];cc.Class({extends:cc.Component,properties:{labelTitle:{default:null,type:cc.Label},labelDes:{default:null,type:cc.Label}},init:function(){},show:function(e,t){this.labelTitle.getComponent("LocalizedLabel").dataID=n[parseInt(t)].tit,this.labelDes.getComponent("LocalizedLabel").dataID=n[parseInt(t)].des,this.node.active=!0,this.node.emit("fade-in")},hide:function(){cc.find("Canvas/tipPanel/error").getComponent(cc.Label).string="",this.node.emit("fade-out")}}),cc._RF.pop()},{}],Types:[function(e,t){"use strict";cc._RF.push(t,"5693aA1l/JEiq6SPSIEPrEp","Types");var n=cc.Enum({Demon:-1,SkeletonKing:-1}),a=cc.Enum({Foe0:-1,Foe1:-1,Foe2:-1,Foe3:-1,Foe5:-1,Foe6:-1,Boss1:-1,Boss2:-1}),i=cc.Enum({Arrow:-1,Fireball:-1,None:999}),o=cc.Enum({BG0:-1,BG1:-1,BG2:-1,BG3:-1});t.exports={BossType:n,FoeType:a,ProjectileType:i,BGs:o},cc._RF.pop()},{}],WaveMng:[function(e,t){"use strict";cc._RF.push(t,"2709b0GKQpMn4dRodMMty4Z","WaveMng"),e("Foe"),e("Types").FoeType;var n=e("Types").BossType,a=e("Spawn"),i=cc.Class({name:"Wave",properties:{spawns:{default:[],type:a},bossType:{default:n.Demon,type:n}},init:function(){this.totalFoes=0,this.spawnIdx=0;for(var e=0;e<this.spawns.length;++e)!1===this.spawns[e].isCompany&&(this.totalFoes+=this.spawns[e].total)},getNextSpawn:function(){return this.spawnIdx++,this.spawnIdx<this.spawns.length?this.spawns[this.spawnIdx]:null}});cc.Class({extends:cc.Component,properties:{waves:{default:[],type:i},startWaveIdx:0,spawnMargin:0,killedFoe:{visible:!1,default:0,notify:function(){if(this.currentWave&&this.waveTotalFoes&&(this.waveTotalFoes&&this.killedFoe>=this.waveTotalFoes&&this.endWave(),this.waveProgress&&this.waveTotalFoes)){var e=Math.min(this.killedFoe/this.waveTotalFoes,1);this.waveProgress.updateProgress(e)}}},waveProgress:cc.Node,bossProgress:cc.Node},init:function(e){this.game=e,this.player=e.player,this.foeGroup=e.foeGroup,this.waveIdx=this.startWaveIdx,this.spawnIdx=0,this.currentWave=this.waves[this.waveIdx],this.waveProgress=this.waveProgress.getComponent("WaveProgress"),this.waveProgress.init(this),this.bossProgress=this.bossProgress.getComponent("BossProgress"),this.bossProgress.init(this)},startSpawn:function(){this.schedule(this.spawnFoe,this.currentSpawn.spawnInterval)},startBossSpawn:function(e){this.bossSpawn=e,this.waveTotalFoes=e.total,this.killedFoe=0,this.schedule(this.spawnBossFoe,e.spawnInterval)},endSpawn:function(){this.unschedule(this.spawnFoe);var e=this.currentWave.getNextSpawn();e&&(this.currentSpawn=e,this.startSpawn(),e.isCompany&&this.startBoss())},startWave:function(){this.unschedule(this.spawnFoe),this.currentWave.init(),this.waveTotalFoes=this.currentWave.totalFoes,this.killedFoe=0,this.currentSpawn=this.currentWave.spawns[this.currentWave.spawnIdx],this.startSpawn(),this.game.inGameUI.showWave(this.waveIdx+1)},startBoss:function(){this.bossProgress.show(),this.game.bossMng.startBoss()},endWave:function(){this.bossProgress.hide(),this.game.bossMng.endBoss(),this.waveIdx<this.waves.length-1?(this.waveIdx++,this.currentWave=this.waves[this.waveIdx],this.startWave()):cc.log("all waves spawned!")},spawnFoe:function(){if(this.currentSpawn.finished)this.endSpawn();else{var e=this.currentSpawn.spawn(this.game.poolMng);e&&(this.foeGroup.addChild(e),e.setPosition(this.getNewFoePosition()),e.getComponent("Foe").init(this))}},spawnBossFoe:function(){this.bossSpawn.finished&&this.unschedule(this.spawnBossFoe);var e=this.bossSpawn.spawn(this.game.poolMng);e&&(this.foeGroup.addChild(e),e.setPosition(this.getNewFoePosition()),e.getComponent("Foe").init(this))},spawnProjectile:function(e,t,n){var a=this.game.poolMng.requestProjectile(e);a?(this.foeGroup.addChild(a),a.setPosition(t),a.getComponent("Projectile").init(this,n)):cc.log("requesting too many projectiles! please increase size")},killFoe:function(){this.killedFoe++},hitFoe:function(){this.game.cameraShake()},despawnFoe:function(e){var t=e.foeType;this.game.poolMng.returnFoe(t,e.node)},despawnProjectile:function(e){var t=e.projectileType;this.game.poolMng.returnProjectile(t,e.node)},getNewFoePosition:function(){var e=2*(Math.random()-.5)*(this.foeGroup.width-this.spawnMargin)/2,t=2*(Math.random()-.5)*(this.foeGroup.height-this.spawnMargin)/2;return cc.v2(e,t)}}),cc._RF.pop()},{Foe:"Foe",Spawn:"Spawn",Types:"Types"}],WaveProgress:[function(e,t){"use strict";cc._RF.push(t,"a90aa7G1q5ANJGKlnUcA6SL","WaveProgress"),cc.Class({extends:cc.Component,properties:{bar:cc.ProgressBar,head:cc.Node,lerpDuration:0},onLoad:function(){},init:function(e){this.waveMng=e,this.bar.progress=0,this.curProgress=0,this.destProgress=0,this.timer=0,this.isLerping=!1},updateProgress:function(e){this.curProgress=this.bar.progress,this.destProgress=e,this.timer=0,this.isLerping=!0},update:function(e){if(!1!==this.isLerping){this.timer+=e,this.timer>=this.lerpDuration&&(this.timer=this.lerpDuration,this.isLerping=!1),this.bar.progress=cc.misc.lerp(this.curProgress,this.destProgress,this.timer/this.lerpDuration);var t=this.bar.barSprite.node.width*this.bar.progress;this.head.x=t}}}),cc._RF.pop()},{}],WaveUI:[function(e,t){"use strict";cc._RF.push(t,"389b4yNsLZD8oJXlec0Kfzr","WaveUI"),cc.Class({extends:cc.Component,properties:{labelWave:cc.Label,anim:cc.Animation},onLoad:function(){},show:function(e){this.labelWave.string=e,this.anim.play("wave-pop")},hide:function(){this.node.active=!1}}),cc._RF.pop()},{}],WeapSlot:[function(e,t){"use strict";cc._RF.push(t,"86ca6DzU4BIepk4juJIlIeV","WeapSlot"),cc.Class({extends:cc.Component,properties:{sfAttributes:{default:[],type:cc.SpriteFrame},sfBorders:{default:[],type:cc.SpriteFrame},labelLevel:{default:null,type:cc.Label},spAttribute:{default:null,type:cc.Sprite},spBorder:{default:null,type:cc.Sprite},dbhead:{default:null,type:cc.Node},dbbutton:{default:null,type:cc.Button},title:cc.Label,nftvalue:cc.Label},onLoad:function(){this.dbDisplay=this.dbhead.getComponent(dragonBones.ArmatureDisplay),this.dbArmature=this.dbDisplay.armature()},refresh:function(e){var t=e.level-1;t>=7&&(t=6);var n=e.category,a=e.level;this.labelLevel.string="LV."+a,this.spBorder.spriteFrame=this.sfBorders[t],this.spAttribute.spriteFrame=this.sfAttributes[n],this.title.string=e.token_name,this.nftvalue.string=e.nft_value},string_to_arr:function(e){for(var t=".12345abcdefghijklmnopqrstuvwxyz",n=new Array,a=0;a<6;++a){var i=t.indexOf(e.charAt(2*a)),o=t.indexOf(e.charAt(2*a+1));n[a]=32*i+o}return n},updateWeapslot:function(e){var t=this.string_to_arr(e);this.dbArmature.getSlot("jb").displayIndex=t[1],this.dbArmature.getSlot("jr").displayIndex=t[2],this.dbArmature.getSlot("jx").displayIndex=t[3],this.dbArmature.getSlot("jy").displayIndex=t[4],this.dbArmature.getSlot("jz").displayIndex=t[5]}}),cc._RF.pop()},{}],buybox:[function(e,t){"use strict";cc._RF.push(t,"994f8vZghNOmJ96EbbQ8cRs","buybox"),cc.Class({extends:cc.Component,properties:{boxlabel:{default:null,type:cc.Node}},start:function(){},setTXT1:function(e){this.boxlabel.active=!0,this.boxlabel.getComponent("DyLabel").setText(e),this.scheduleOnce(function(){this.boxlabel.active=!1}.bind(this),1)},setTXT5:function(e){this.boxlabel.active=!0,this.boxlabel.getComponent("DyLabel").setText(e),this.scheduleOnce(function(){this.boxlabel.active=!1}.bind(this),.5)}}),cc._RF.pop()},{}],camera:[function(e,t){"use strict";cc._RF.push(t,"76318cmQJZOdaCO3bT4ziCW","camera"),cc.Class({extends:cc.Component,properties:{mainCamera:cc.Camera},onLoad:function(){this.canvas=cc.find("Canvas")},updateCamera:function(){var e=this.mainCamera.node.x-this.node.x,t=this.mainCamera.node.y-this.node.y;e=Math.abs(e)>100?e:0,t=Math.abs(t)>100?t:0;var n=this.mainCamera.node.x-e/60,a=this.mainCamera.node.y-t/60;this.mainCamera.node.x=n,this.mainCamera.node.y=a},update:function(e){this.updateCamera(e)}}),cc._RF.pop()},{}],comPanelUI:[function(e,t){"use strict";cc._RF.push(t,"f397fDxNmVFGp2lz8tmo+3/","comPanelUI");var n={poolToken:"0.0001",defiToken:"0.0001",configs:null,userList:null,poolConfig:null,wh_ratio:null,drtotalpower2:null,userpower2:null,bal_ratio:null,ccc_price:null,players:null};cc.Class({extends:cc.Component,properties:{},init:function(){},show:function(){var e=cc.sys.localStorage.getItem("poolData");e&&(n=JSON.parse(e));var t=0;n.players[0].comtimes&&(t=n.players[0].comtimes),cc.find("Canvas/comPanel/num_time").getComponent(cc.Label).string=t,(t=0)&&(cc.find("Canvas/comPanel/btn_confirm").active=!1),this.node.active=!0,this.node.emit("fade-in")},send:function(){var e=cc.find("Canvas/comPanel/EditBox/TEXT_LABEL").getComponent(cc.Label).string;e&&cc.find("CCC").getComponent("CCCManager").sendCom(e)},hide:function(){this.node.emit("fade-out")}}),cc._RF.pop()},{}],"copy-text-to-clipboard":[function(e,t){"use strict";cc._RF.push(t,"4b0d18fhllElraeR6RaCKTm","copy-text-to-clipboard"),t.exports=function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.contain="strict",t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";var n=getSelection(),a=!1;n.rangeCount>0&&(a=n.getRangeAt(0)),document.body.appendChild(t),t.select(),t.selectionStart=0,t.selectionEnd=e.length;var i=!1;try{i=document.execCommand("copy")}catch(o){}return document.body.removeChild(t),a&&(n.removeAllRanges(),n.addRange(a)),i},cc._RF.pop()},{}],en:[function(e,t){"use strict";cc._RF.push(t,"46419NkJsNKuJo1gS4QALVU","en"),t.exports={current:"Current language: ",create_language:"New language",language:"Language",create:"Create",cancel:"Cancel",nav_home:"Home",nav_box:"Box",nav_nft:"NFT",nav_defi:"DeFi",nav_store:"Store",nav_risk:"Risk",tip_systoptit:"System suspended",tip_systop:"System suspended, please visit later.",tip_nonetit:"Under development",tip_none:"It has not been launched yet, please look forward to it.",tip_selltit:"Sell successfully",tip_sell:"The NFT has been sold successfully. The specific situation shall be based on the data on the chain.",tip_claimtit:"Claim successfully",tip_claim:"Has successfully received the earnings\u3002The specific situation shall be based on the data on the chain.",tip_staketit:"Stake successfully",tip_stake:"Has successfully staked the NFT\u3002The specific situation shall be based on the data on the chain.",tip_unstaketit:"Unstake successfully",tip_unstake:"Has successfully unstaked the NFT\u3002The specific situation shall be based on the data on the chain.",info_pricetit:"Blindbox price",info_price:"The first five thousand blind boxes are fixed as 5EOS, and then the price of the blind box will change linearly with the heat of the market. The rock bottom price is 5EOS, and every time one is sold, the price increases by 0.1EOS; if no one buys it, it lowers 0.1EOS every hour.",tip_failtit:"Transaction failed",tip_fail:"Make sure you have sufficient RAM, CPU, Net resources or EOS.Or change the node.",tip_pooltit:"Mining rules",tip_pool:"Cccpool will release 1/1000 cccdefi every day. Players will divide the CCC(cccdefi) according to the duration and NFT value. For the specific algorithm, please see the white paper.",tip_risktit:"Risk(PVE) rules",tip_risk:"When taking risks, you can get a blind box of weapons, but you need to meet three conditions before you can take risks. Among them, T Power can be obtained by staking the NFT of heroes and weapons, and accumulated according to the duration.When T Power is less than 1000000, the weapon blind box cannot be obtained.",tip_comtit:"Comment completed",tip_com:"Your comments will appear in the game.",tip_pomelotit:"CCC to the moon",tip_pomelo:"CCC currently receives donations on the Pomelo platform. Hope that players can participate in the donation, a small amount, can get a lot of donations from the platform, so as to better promote game development and promotion.       https://pomelo.io/grants/eosccc",refer_tit:"Share and earn",refer_des:"Friends buy the Hero Blind Box through your referral link, and you can get a 2% commission.",refer_link:"Copy referral link",referral_tit:"Referral rebate",referral_des:"Set the EOS account as referral. As long as the account buys the Hero Blind Box, both of you will get a 5% rebate. The number of referral can only be obtained by buying the Hero Blind Box.",btn_confirm:"Confirm",box_open:"Open all",hero_cate:"Cate:",hero_sell:"Sell",hero_buy:"Buy",hero_upgrade:"Upgrade",hero_merge:"Merge",hero_stake:"Stake",hero_uptip:"Need to destroy the same category of NFT, and it is lossy.",defi_claim:"Claim",defi_earnings:"Estimated earnings",defi_equip:"Equip",defi_remove:"Remove",defi_unstake:"Unstake",defi_stake:"Stake",comment_tit:"Post a comment"},cc._RF.pop()},{}],heroPanelUI:[function(e,t){"use strict";cc._RF.push(t,"e9705Nd5ppNQ5Gt7lKoW5yA","heroPanelUI");var n,a,i,o,s=[{zh_HK:"\u7a7a",en:"None"},{zh_HK:"\u91d1",en:"Gold"},{zh_HK:"\u6728",en:"Wood"},{zh_HK:"\u6c34",en:"Water"},{zh_HK:"\u706b",en:"Fire"},{zh_HK:"\u571f",en:"Ground"}];cc.Class({extends:cc.Component,properties:{title:cc.Label,nftid:cc.Label,nftvalue:cc.Label,nftprice:cc.Label,level:cc.Label,genes:cc.Label,att:cc.Label,des:cc.Label,mdata:cc.Label,sfAttributes:{default:[],type:cc.SpriteFrame},spAttribute:{default:null,type:cc.Sprite}},updatePanelDate:function(e){var t="en",n=cc.sys.localStorage.getItem("curLang");n&&(t=n);var r="en"==t?s[e.category].en:s[e.category].zh_HK;o=e,this.title.string=e.token_name,this.nftid.string=e.id,this.nftvalue.string=e.nft_value,this.level.string=e.level,this.genes.string=e.genes,this.att.string=r,this.des.string=e.token_summary,this.mdata.string=e.mdata,this.spAttribute.spriteFrame=this.sfAttributes[e.category],a=e.id,null!=e.price&&(i=e.price,this.nftprice.string=e.price),cc.sys.localStorage.setItem("HeroDataCurrent",JSON.stringify(e))},setSlot:function(e){this.slot=e,console.log("slot:"+this.slot)},buyHero:function(){i&&(n=1,cc.find("CCC").getComponent("CCCManager").buyHero(n,a,i))},sellHero:function(){i&&(n=1,cc.find("CCC").getComponent("CCCManager").sellHero(n,a,i))},stakeHero:function(){cc.find("CCC").getComponent("CCCManager").stakeHero(a)},unstakeHero:function(){cc.find("CCC").getComponent("CCCManager").unstakeHero(this.slot)},removeWeap:function(){cc.find("CCC").getComponent("CCCManager").removeWeap(this.slot)},equipWeap:function(){cc.sys.localStorage.setItem("curSlot",this.slot),cc.find("Canvas/backPack").getComponent("BackPackUI").turnType(this,"weap"),0!=o.category&&cc.find("Canvas/backPack").getComponent("BackPackUI").selectCate(this,o.category),cc.find("Canvas/backPack/tab/tab_hero").active=!1,cc.find("Canvas/backPack/tab/tab_weap").active=!1,cc.find("Canvas/weapPanel/btnPanMine/btn_equip").active=!0,cc.find("Canvas/heroPanel").getComponent("PanelUI").hide()}}),cc._RF.pop()},{}],hero:[function(e,t){"use strict";cc._RF.push(t,"74be9udA3FFSIKIjQf6NJQI","hero");var n=["att_1","att_2","att_3","att_4"],a=["player"];cc.Class({extends:cc.Component,properties:{leftButton:cc.Node,rightButton:cc.Node,hpBar:cc.Node,blackNode:cc.Node},onLoad:function(){this.dbDisplay=this.node.getComponent(dragonBones.ArmatureDisplay),this.dbArmature=this.dbDisplay.armature(),this.defSkinId=0,this.wepDisplay=cc.find("sword").getComponent(dragonBones.ArmatureDisplay),this.eyeDisplay=cc.find("eyes").getComponent(dragonBones.ArmatureDisplay),this.node.zIndex=2,this.node.isDie=!1,this._speed=0,this.moveSpeed=200,this._faceDir=1,this._onButton=!1,this.game=this.node.parent.getComponent("game"),this.attCount=0,this.node.cW={x:this.node.width/2,y:this.node.height},this.dbDisplay.on(dragonBones.EventObject.COMPLETE,this.aniComplete,this),this.dbDisplay.on(dragonBones.EventObject.FRAME_EVENT,this.frameEvent,this),this.setEvent(),this.init()},init:function(){this.ROLE={att:30,wepId:0,hp:200,totalHp:200,dodgeLen:200,dodgeSpeed:20},this.idleAni(),this.updateWep(),console.log(this.node.name),this.updateHandr()},updateHero:function(e){var t=this.string_to_arr(e.genes);this.updateSkin(t[0]),this.dbArmature.getSlot("slot_hair").displayIndex=t[2],this.dbArmature.getSlot("slot_item").displayIndex=t[4],this.updateHat(t[1]),this.updateEye(t[3]),this.updateBody(t[5]),this.updateArmL(t[6]),this.updateArmR(t[7]),this.updateHand(t[8]),this.updateLegL(t[9]),this.updateLegR(t[10]),this.updateFoot(t[11]),this.updateWing(e.category,e.level),this.updateWep({genes:"............",level:"1"})},string_to_arr:function(e){for(var t=new Array,n=0;n<12;++n)t[n]=".12345abcdefghijklmnopqrstuvwxyz".indexOf(e.charAt(n));return t},changeSkin:function(){if(!this.node.isDie){this.defSkinId=this.defSkinId<a.length-1?this.defSkinId+1:0;var e=a[this.defSkinId];this.dbDisplay.armatureName=e,this.dbArmature=this.dbDisplay.armature(),this.updateWep()}},changeWep:function(){if(0==this.defSkinId&&!this.node.isDie){var e=Math.floor(20*Math.random());this.ROLE.wepId=e,this.updateWep()}},updateWep:function(e){if(null!=e){var t=this.string_to_arr_weap(e.genes),n=this.wepDisplay.buildArmature("s_"+t[0]);n.armature().getSlot("jb").displayIndex=t[1],n.armature().getSlot("jr").displayIndex=t[2],n.armature().getSlot("jx").displayIndex=t[3],n.armature().getSlot("jy").displayIndex=t[4],n.armature().getSlot("jz").displayIndex=t[5],this.dbArmature.getSlot("weapon").childArmature=n.armature();var a="fx"+e.level;e.level>1?n.playAnimation(a):n.playAnimation("fx999")}},string_to_arr_weap:function(e){for(var t=".12345abcdefghijklmnopqrstuvwxyz",n=new Array,a=0;a<6;++a){var i=t.indexOf(e.charAt(2*a)),o=t.indexOf(e.charAt(2*a+1));n[a]=32*i+o}return n},updateHandr:function(){if(0==this.defSkinId){this.dbArmature.getSlot("slot_hair").displayIndex=Math.floor(31*Math.random()),this.dbArmature.getSlot("slot_item").displayIndex=Math.floor(31*Math.random()),this.dbArmature.getSlot("slot_body_1").displayIndex=0,this.dbArmature.getSlot("slot_body_2").displayIndex=0,this.dbArmature.getSlot("slot_foot_r").displayIndex=1,this.dbArmature.getSlot("slot_foot_l").displayIndex=1;var e=Math.floor(6*Math.random()),t=Math.floor(4*Math.random());this.updateEye(e),this.updateSkin(t),this.updateWing(0,6);var n=Math.floor(32*Math.random());this.updateHat(0),this.updateBody(n);var a=Math.floor(32*Math.random()),i=Math.floor(32*Math.random());this.updateArmL(a),this.updateArmR(i),this.updateLegL(a),this.updateLegR(i),this.updateFoot(i)}},updateSkin:function(e){for(var t=["skin_head","skin_ear","skin_body_1","skin_body_2","skin_neck","skin_arm_1_r","skin_arm_2_r","skin_hand_r","skin_arm_1_l","skin_arm_2_l","skin_hand_l","skin_hip","skin_leg_1_r","skin_leg_2_r","skin_foot_r","skin_leg_1_l","skin_leg_2_l","skin_foot_l"],n=0;n<t.length;n++)this.dbArmature.getSlot(t[n]).displayIndex=e},updateHat:function(e){this.dbArmature.getSlot("slot_hat").displayIndex=void 0,0!=e&&(this.dbArmature.getSlot("slot_hat").displayIndex=e-1,this.dbArmature.getSlot("slot_hair").displayIndex=void 0,this.dbArmature.getSlot("slot_item").displayIndex=void 0)},updateEye:function(e){var t=this.eyeDisplay.buildArmature("e_"+e);t.timeScale=(e+1)/3,this.dbArmature.getSlot("skin_eyes").childArmature=t.armature()},updateBody:function(e){0==e?(this.dbArmature.getSlot("slot_body_1").displayIndex=void 0,this.dbArmature.getSlot("slot_body_2").displayIndex=void 0):e<=8?(this.dbArmature.getSlot("slot_body_1").displayIndex=e-1,this.dbArmature.getSlot("slot_body_2").displayIndex=e-1):(this.dbArmature.getSlot("slot_body_1").displayIndex=Math.floor(e/4),this.dbArmature.getSlot("slot_body_2").displayIndex=e%8)},updateArmL:function(e){0==e?(this.dbArmature.getSlot("slot_arm_1_l").displayIndex=void 0,this.dbArmature.getSlot("slot_arm_2_l").displayIndex=void 0):e<=8?(this.dbArmature.getSlot("slot_arm_1_l").displayIndex=e-1,this.dbArmature.getSlot("slot_arm_2_l").displayIndex=e-1):(this.dbArmature.getSlot("slot_arm_1_l").displayIndex=Math.floor(e/4),this.dbArmature.getSlot("slot_arm_2_l").displayIndex=e%8)},updateArmR:function(e){0==e?(this.dbArmature.getSlot("slot_arm_1_r").displayIndex=void 0,this.dbArmature.getSlot("slot_arm_2_r").displayIndex=void 0):e<=8?(this.dbArmature.getSlot("slot_arm_1_r").displayIndex=e-1,this.dbArmature.getSlot("slot_arm_2_r").displayIndex=e-1):(this.dbArmature.getSlot("slot_arm_1_r").displayIndex=Math.floor(e/4),this.dbArmature.getSlot("slot_arm_2_r").displayIndex=e%8)},updateHand:function(e){0==e?(this.dbArmature.getSlot("slot_hand_l").displayIndex=void 0,this.dbArmature.getSlot("slot_hand_r").displayIndex=void 0):e<=8?(this.dbArmature.getSlot("slot_hand_l").displayIndex=e-1,this.dbArmature.getSlot("slot_hand_r").displayIndex=e-1):(this.dbArmature.getSlot("slot_hand_l").displayIndex=Math.floor(e/4),this.dbArmature.getSlot("slot_hand_r").displayIndex=e%8)},updateLegL:function(e){e<8?(this.dbArmature.getSlot("slot_hip").displayIndex=e,this.dbArmature.getSlot("slot_leg_1_l").displayIndex=e,this.dbArmature.getSlot("slot_leg_2_l").displayIndex=e):e<16?(this.dbArmature.getSlot("slot_hip").displayIndex=Math.floor(e/4),this.dbArmature.getSlot("slot_leg_1_l").displayIndex=Math.floor(e/4),this.dbArmature.getSlot("slot_leg_2_l").displayIndex=void 0):(this.dbArmature.getSlot("slot_hip").displayIndex=Math.floor(e/4),this.dbArmature.getSlot("slot_leg_1_l").displayIndex=Math.floor(e/4),this.dbArmature.getSlot("slot_leg_2_l").displayIndex=e%8)},updateLegR:function(e){e<8?(this.dbArmature.getSlot("slot_leg_1_r").displayIndex=e,this.dbArmature.getSlot("slot_leg_2_r").displayIndex=e):e<16?(this.dbArmature.getSlot("slot_leg_1_r").displayIndex=Math.floor(e/4),this.dbArmature.getSlot("slot_leg_2_r").displayIndex=void 0):(this.dbArmature.getSlot("slot_leg_1_r").displayIndex=Math.floor(e/4),this.dbArmature.getSlot("slot_leg_2_r").displayIndex=e%8)},updateFoot:function(e){0==e?(this.dbArmature.getSlot("slot_foot_l").displayIndex=void 0,this.dbArmature.getSlot("slot_foot_r").displayIndex=void 0):e<=8?(this.dbArmature.getSlot("slot_foot_l").displayIndex=e-1,this.dbArmature.getSlot("slot_foot_r").displayIndex=e-1):(this.dbArmature.getSlot("slot_foot_l").displayIndex=Math.floor(e/4),this.dbArmature.getSlot("slot_foot_r").displayIndex=e%8)},updateWing:function(e,t){for(var n=["slot_wing_1_r","slot_wing_1_l","slot_wing_2_r","slot_wing_2_l","slot_wing_3_r","slot_wing_3_l"],a=0;a<n.length;a++)this.dbArmature.getSlot(n[a]).displayIndex=e;if(t<5)for(var i=5-t,o=0;o<i;o++)this.dbArmature.getSlot(n[o]).displayIndex=void 0},aniComplete:function(){this.node.isDie||(this._onButton?this.attackAni():this.idleAni())},frameEvent:function(e){this.node.isDie||e.name},setEvent:function(){this.node.parent.on("touchstart",this.touchStart,this),this.node.parent.on("touchend",this.touchEnd,this),this.node.parent.on("touchcancel",this.touchCancel,this)},offEvent:function(){this.node.parent.off("touchstart",this.touchStart,this),this.node.parent.off("touchend",this.touchEnd,this),this.node.parent.off("touchcancel",this.touchCancel,this)},touchStart:function(e){this._onButton=!0;var t="left"==e.target.name?1:-1;this.dbDisplay.playAnimation("die"),this._faceDir=t,this._speed=this.moveSpeed*t,this.node.scaleX=t,this.dbArmature.animation.fadeIn("move",-1,-1,0,"normal")},dodge:function(e){var t=this;this.dbArmature.animation.fadeIn("avoid",-1,-1,0,"normal"),this.blackNode.active=!0;var n=cc.Vec2.distance(this.node.position,cc.v2(this.boundary*e,0));n=n<this.ROLE.dodgeLen?n:this.ROLE.dodgeLen,cc.tween(this.node).by(.2,{position:cc.v2(n*e,0)}).call(function(){t.blackNode.active=!1,t.idleAni()}).start()},touchEnd:function(){this._onButton=!1,this._speed=0},touchCancel:function(e){this._onButton=!1;var t=e.getStartLocation().y-e.getLocation().y;console.log(t),t>0?console.log("down"):(console.log("up"),this.lv=this.node.getComponent(cc.RigidBody).linearVelocity,this.lv.y=300,this.node.getComponent(cc.RigidBody).linearVelocity=this.lv),this._speed=0},idleAni:function(){this.node.isDie||this.dbArmature.animation.fadeIn("idle",-1,-1,0,"normal",dragonBones.AnimationFadeOutMode.All)},attackAni:function(){if(!this.node.isDie){var e=n[this.attCount];this.dbArmature.animation.fadeIn(e,-1,-1,0,"normal"),this.attCount=this.attCount<3?this.attCount+1:0}},attackAni2:function(e){if(!this.node.isDie){var t=n[e];this.dbDisplay.playAnimation(t)}},uatt:function(e){if(!this.node.isDie){var t=this.ROLE.hp-e;if(this.game.showHit(e,cc.v2(this.node.x,this.node.y+this.node.height)),t<=0)return this.node.isDie=!0,this.offEvent(this.leftButton),this.offEvent(this.rightButton),this.dbDisplay.off(dragonBones.EventObject.COMPLETE,this.aniComplete,this),this.dbDisplay.off(dragonBones.EventObject.FRAME_EVENT,this.frameEvent,this),this.ROLE.hp=0,this.hpBar.width=0,void this.dbDisplay.playAnimation("die");this.hpBar.width=t/this.ROLE.totalHp*200,this.ROLE.hp=t}},damage:function(){this.dbDisplay.playAnimation("damage")},invincible:function(e){this.node.getComponents(cc.Collider)[0].enabled=e},move:function(){this.dbArmature.animation.fadeIn("move",-1,-1,0,"normal")},facedir:function(e){this._faceDir!=e&&(this._faceDir=e,this.node.scaleX=.3*e)},update:function(){this.node.isDie||0!=this._speed&&this.move()}}),cc._RF.pop()},{}],lang:[function(e,t){"use strict";cc._RF.push(t,"9c976I235RPkKlUSj0oxbVx","lang"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},changeLanguage:function(t,n){this.i18n=e("LanguageData"),n!==window.i18n.curLang&&(this.i18n.init(n),this.i18n.updateSceneRenderers(),window.i18n.curLang=n,cc.sys.localStorage.setItem("curLang",n))}}),cc._RF.pop()},{LanguageData:"LanguageData"}],message:[function(e,t){"use strict";cc._RF.push(t,"95574VrxSdPEp3OvmCe+y4K","message"),cc.Class({extends:cc.Component,properties:{marqueeLabel:cc.Label,mask:cc.Node},onLoad:function(){this.descs=[],this.marqeeIndex=0,this.marqueeBg=this.node,this.marqueeBg.opacity=0},setMsg:function(e){this.descs=e},update:function(){try{var e=this.descs.length-1,t=this.descs[e];t&&(this.runMarqeeBar(t),this.descs[e]=null)}catch(n){}},runMarqeeBar:function(e){var t=this;this.marqueeBg.opacity=255,this.marqueeLabel.node.x=this.mask.width,this.marqueeLabel.string=e,this.marqueeLabel.node.runAction(cc.sequence(cc.moveTo(30,-this.marqueeLabel.node.width,0),cc.callFunc(function(){t.descs.pop(),t.isExistContent()||t.descs.unshift(t.desc1)},this,this)))},isExistContent:function(){return!!this.descs[this.descs.length-1]}}),cc._RF.pop()},{}],"polyglot.min":[function(e,t,n){"use strict";cc._RF.push(t,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min"),function(e,a){"function"==typeof define&&define.amd?define([],function(){return a(e)}):"object"==typeof n?t.exports=a(e):e.Polyglot=a(e)}(void 0,function(e){function t(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||c}function n(e){var t,n,a,i={};for(t in e)if(e.hasOwnProperty(t))for(a in n=e[t])i[n[a]]=t;return i}function a(e){return e.replace(/^\s+|\s+$/g,"")}function i(e,t,n){var i;return null!=n&&e?a((i=e.split(h))[s(t,n)]||i[0]):e}function o(e){var t=n(p);return t[e]||t.en}function s(e,t){return u[o(e)](t)}function r(e,t){for(var n in t)"_"!==n&&t.hasOwnProperty(n)&&(e=e.replace(new RegExp("%\\{"+n+"\\}","g"),t[n]));return e}function c(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function l(e){var t={};for(var n in e)t[n]=e[n];return t}t.VERSION="0.4.3",t.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},t.prototype.extend=function(e,t){var n;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],t&&(a=t+"."+a),"object"==typeof n?this.extend(n,a):this.phrases[a]=n)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(e){this.clear(),this.extend(e)},t.prototype.t=function(e,t){var n,a;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?n=this.phrases[e]:"string"==typeof t._?n=t._:this.allowMissing?n=e:(this.warn('Missing translation for key: "'+e+'"'),a=e),"string"==typeof n&&(t=l(t),a=r(a=i(n,this.currentLocale,t.smart_count),t)),a},t.prototype.has=function(e){return e in this.phrases};var h="||||",u={chinese:function(){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},p={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t}),cc._RF.pop()},{}],referPanelUI:[function(e,t){"use strict";cc._RF.push(t,"ea8e4BlyhpN3JyqX+PdyG6K","referPanelUI");var n={name:"",eosToken:"0.0000 EOS",cccToken:"0.0000 CCC"},a="";cc.Class({extends:cc.Component,properties:{},init:function(){},show:function(){var e=cc.sys.localStorage.getItem("userData");e&&(n=JSON.parse(e)),-1!=(a=window.location.href).indexOf("?")&&(a=a.split("?")[0]),a=a+"?referral="+n.name,cc.find("Canvas/referPanel/error").getComponent(cc.Label).string=a,this.node.active=!0,this.node.emit("fade-in")},copy:function(){e("copy-text-to-clipboard")(a)&&(cc.find("Canvas/referPanel/error").getComponent(cc.Label).string="\u590d\u5236\u6210\u529f!")},hide:function(){this.node.emit("fade-out")}}),cc._RF.pop()},{"copy-text-to-clipboard":"copy-text-to-clipboard"}],stage:[function(e,t){"use strict";cc._RF.push(t,"b6ca4pR0ONBW4CRZlCs+d8d","stage"),cc.Class({extends:cc.Component,properties:{bg:{default:null,type:cc.Sprite},title:{default:null,type:cc.Label},num:{default:null,type:cc.Label},bgs:{default:[],type:cc.SpriteFrame},titles:{default:[],type:cc.String},dbbutton:{default:null,type:cc.Button}},onLoad:function(){},updateStage:function(e){this.bg.spriteFrame=this.bgs[e],this.num.string=e+1,this.title.string=this.titles[e]}}),cc._RF.pop()},{}],swordMax:[function(e,t){"use strict";cc._RF.push(t,"641b75uQ59JUKBVXG2CVdxP","swordMax");var n=["s_0"];cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.dbDisplay=this.node.getComponent(dragonBones.ArmatureDisplay),this.dbArmature=this.dbDisplay.armature(),this._onButton=!1,this.dbDisplay.on(dragonBones.EventObject.COMPLETE,this.aniComplete,this),this.dbDisplay.on(dragonBones.EventObject.FRAME_EVENT,this.frameEvent,this),this.setEvent(),this.init()},init:function(){this.ROLE={damage:30,crit:200,accuracy:200,impale:200},this.updateWeap2(),this.getComponent("swordMax").schedule(function(){this.drift()},13)},updateWeap:function(e){var t=this.string_to_arr(e.genes),a=n[t[0]];this.dbDisplay.armatureName=a,this.dbArmature=this.dbDisplay.armature(),this.dbArmature.getSlot("jb").displayIndex=t[1],this.dbArmature.getSlot("jr").displayIndex=t[2],this.dbArmature.getSlot("jx").displayIndex=t[3],this.dbArmature.getSlot("jy").displayIndex=t[4],this.dbArmature.getSlot("jz").displayIndex=t[5],this.updateFix(e.level)},updateWeap2:function(){var e=n[0];this.dbDisplay.armatureName=e,this.dbArmature=this.dbDisplay.armature(),this.dbArmature.getSlot("jb").displayIndex=Math.floor(63*Math.random()),this.dbArmature.getSlot("jr").displayIndex=Math.floor(127*Math.random()),this.dbArmature.getSlot("jx").displayIndex=Math.floor(63*Math.random()),this.dbArmature.getSlot("jy").displayIndex=Math.floor(31*Math.random()),this.dbArmature.getSlot("jz").displayIndex=Math.floor(127*Math.random()),this.updateFix(Math.floor(9*Math.random()+1))},updateFix:function(e){var t="fx"+e;e>1&&this.dbDisplay.playAnimation(t)},string_to_arr:function(e){for(var t=".12345abcdefghijklmnopqrstuvwxyz",n=new Array,a=0;a<6;++a){var i=t.indexOf(e.charAt(2*a)),o=t.indexOf(e.charAt(2*a+1));n[a]=32*i+o}return n},drift:function(){cc.tween(this.node).to(1,{scale:1.8,position:cc.v2(18.681,98.618)}).to(.6,{scale:1.3,position:cc.v2(236.681,98.618)}).to(1,{scale:1.5,position:cc.v2(186.681,98.618)}).delay(2).by(.1,{position:cc.v2(0,10)},{easing:"sineOutIn"}).by(.2,{position:cc.v2(0,-20)},{easing:"sineOutIn"}).by(.1,{position:cc.v2(0,10)},{easing:"sineOutIn"}).by(.2,{position:cc.v2(0,-10)},{easing:"sineOutIn"}).by(.1,{position:cc.v2(0,20)},{easing:"sineOutIn"}).by(.2,{position:cc.v2(0,-10)},{easing:"sineOutIn"}).start()},shake:function(){cc.tween(this.node).by(.1,{position:cc.v2(0,10)},{easing:"sineOutIn"}).by(.1,{position:cc.v2(0,-20)},{easing:"sineOutIn"}).by(.1,{position:cc.v2(0,10)},{easing:"sineOutIn"}).by(.1,{position:cc.v2(0,-10)},{easing:"sineOutIn"}).by(.1,{position:cc.v2(0,20)},{easing:"sineOutIn"}).by(.1,{position:cc.v2(0,-10)},{easing:"sineOutIn"}).start()},frameEvent:function(e){this.node.isDie||e.name},setEvent:function(){this.node.parent.on("touchstart",this.touchStart,this),this.node.parent.on("touchend",this.touchEnd,this),this.node.parent.on("touchcancel",this.touchCancel,this)},offEvent:function(){this.node.parent.off("touchstart",this.touchStart,this),this.node.parent.off("touchend",this.touchEnd,this),this.node.parent.off("touchcancel",this.touchCancel,this)},touchStart:function(e){this._onButton=!0,e.target.name,this.shake()},touchEnd:function(){this._onButton=!1,this._speed=0},touchCancel:function(){this._onButton=!1,this._speed=0},move:function(){},update:function(){}}),cc._RF.pop()},{}],upgradePanel:[function(e,t){"use strict";cc._RF.push(t,"b2938IN11dAPLuPK5tVh07/","upgradePanel");var n,a,i,o,s,r=[],c=[],l=[],h=999,u=[],p=[],d=[],f="hero",m=[];cc.Class({extends:cc.Component,properties:{slotPrefab:{default:null,type:cc.Prefab},slotPrefabWeap:{default:null,type:cc.Prefab},scrollView:{default:null,type:cc.ScrollView},mainHero:cc.Node,btnPre:cc.Node,btnNext:cc.Node},addMidHeroSlot:function(e){var t=cc.instantiate(this.slotPrefab);return this.mainHero.addChild(t),t.getComponent("HeroSlot").updateHeroslot(e.genes),t.getComponent("HeroSlot").refresh(e),t},addMidWeapSlot:function(e){var t=cc.instantiate(this.slotPrefabWeap);return this.mainHero.addChild(t),t.getComponent("WeapSlot").updateWeapslot(e.genes),t.getComponent("WeapSlot").refresh(e),t},addHeroSlot:function(e){var t=cc.instantiate(this.slotPrefab);this.scrollView.content.addChild(t),t.getComponent("HeroSlot").updateHeroslot(r[e].genes),t.getComponent("HeroSlot").refresh(r[e]);var n=new cc.Component.EventHandler;return n.target=this.node,n.component="upgradePanel",n.handler="onClickItem",n.customEventData={index:e},t.getComponent("HeroSlot").dbbutton.clickEvents.push(n),t},addWeapSlot:function(e){var t=cc.instantiate(this.slotPrefabWeap);this.scrollView.content.addChild(t),t.getComponent("WeapSlot").updateWeapslot(u[e].genes),t.getComponent("WeapSlot").refresh(u[e]);var n=new cc.Component.EventHandler;return n.target=this.node,n.component="upgradePanel",n.handler="onClickItem",n.customEventData={index:e},t.getComponent("WeapSlot").dbbutton.clickEvents.push(n),t},onClickItem:function(e,t){e.target;var n=t.index;"hero"==f?m.includes(r[n].id)?(this.heroSlots[n].getChildByName("btn_dot").active=!1,m=m.filter(function(e){return e!=r[n].id})):m.length<16&&(this.heroSlots[n].getChildByName("btn_dot").active=!0,m.push(r[n].id)):"weap"==f&&(m.includes(u[n].id)?(this.heroSlots[n].getChildByName("btn_dot").active=!1,m=m.filter(function(e){return e!=u[n].id})):m.length<16&&(this.heroSlots[n].getChildByName("btn_dot").active=!0,m.push(u[n].id))),console.log(m)},show:function(){f="hero",m=[];var e=cc.sys.localStorage.getItem("HeroDataCurrent");n=JSON.parse(e),h=n.category,i=n.id;var t=this.addMidHeroSlot(n);this.heroSlotCur=t;var a=cc.sys.localStorage.getItem("HeroData");a&&(c=JSON.parse(a)),l=(l=c.filter(function(e){return e.category==h})).filter(function(e){return e.id!=i}),o=1,s=parseInt(l.length/36)+1,r=l.slice(0,36),this.checkPage(),this.heroSlots=[];for(var u=0;u<r.length;++u){var p=this.addHeroSlot(u);m.includes(r[u].id)&&(p.getChildByName("btn_dot").active=!0),this.heroSlots.push(p)}this.node.active=!0,this.node.emit("fade-in")},showWeap:function(){f="weap",m=[];var e=cc.sys.localStorage.getItem("WeapDataCurrent");a=JSON.parse(e),h=a.category,i=a.id;var t=this.addMidWeapSlot(a);this.heroSlotCur=t;var n=cc.sys.localStorage.getItem("WeapData");n&&(p=JSON.parse(n)),d=(d=p.filter(function(e){return e.category==h})).filter(function(e){return e.id!=i}),o=1,s=parseInt(d.length/36)+1,u=d.slice(0,36),this.checkPage(),this.heroSlots=[];for(var r=0;r<u.length;++r){var c=this.addWeapSlot(r);m.includes(u[r].id)&&(c.getChildByName("btn_dot").active=!0),this.heroSlots.push(c)}this.node.active=!0,this.node.emit("fade-in")},hide:function(){if(this.heroSlots){for(var e=0;e<this.heroSlots.length;++e)this.heroSlots[e].destroy();this.heroSlotCur.destroy()}this.node.emit("fade-out")},checkPage:function(){this.btnPre.active=o>1,this.btnNext.active=s>o},goToNext:function(){for(var e=0;e<this.heroSlots.length;++e)this.heroSlots[e].destroy();if(o+=1,this.checkPage(),this.heroSlots=[],"hero"==f){r=l.slice(36*(o-1),36*o);for(var t=0;t<r.length;++t){var n=this.addHeroSlot(t);m.includes(r[t].id)&&(n.getChildByName("btn_dot").active=!0),this.heroSlots.push(n)}}else if("weap"==f){u=d.slice(36*(o-1),36*o);for(var a=0;a<u.length;++a){var i=this.addWeapSlot(a);m.includes(u[a].id)&&(i.getChildByName("btn_dot").active=!0),this.heroSlots.push(i)}}},goToPre:function(){for(var e=0;e<this.heroSlots.length;++e)this.heroSlots[e].destroy();if(o-=1,this.checkPage(),this.heroSlots=[],"hero"==f){r=l.slice(36*(o-1),36*o);for(var t=0;t<r.length;++t){var n=this.addHeroSlot(t);m.includes(r[t].id)&&(n.getChildByName("btn_dot").active=!0),this.heroSlots.push(n)}}else if("weap"==f){u=d.slice(36*(o-1),36*o);for(var a=0;a<u.length;++a){var i=this.addWeapSlot(a);m.includes(u[a].id)&&(i.getChildByName("btn_dot").active=!0),this.heroSlots.push(i)}}},upgrade:function(){"hero"==f?cc.find("CCC").getComponent("CCCManager").upgrade("herobox.ccc",i,m):"weap"==f&&cc.find("CCC").getComponent("CCCManager").upgrade("weapbox.ccc",i,m)}}),cc._RF.pop()},{}],use_reversed_rotateBy:[function(e,t){"use strict";cc._RF.push(t,"84a69TC3olAWputa74dQNL5","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}],use_reversed_rotateTo:[function(e,t){"use strict";cc._RF.push(t,"175723Wd0hF54LTbMzfvy4J","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"717fdCQYqVNlqoEU50uXboH","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}],"use_v2.1.x_cc.Action":[function(e,t){"use strict";cc._RF.push(t,"70014gVuQ1IMLvafpl/+4a9","use_v2.1.x_cc.Action"),cc.macro.ROTATE_ACTION_CCW=!0,cc._RF.pop()},{}],weapPanelUI:[function(e,t){"use strict";cc._RF.push(t,"f3d9c0Z/ctIo7GnyJPz3wm0","weapPanelUI");var n,a,i,o=[{zh_HK:"\u7a7a",en:"None"},{zh_HK:"\u91d1",en:"Gold"},{zh_HK:"\u6728",en:"Wood"},{zh_HK:"\u6c34",en:"Water"},{zh_HK:"\u706b",en:"Fire"},{zh_HK:"\u571f",en:"Ground"}];cc.Class({extends:cc.Component,properties:{title:cc.Label,nftid:cc.Label,nftvalue:cc.Label,nftprice:cc.Label,level:cc.Label,genes:cc.Label,att:cc.Label,des:cc.Label,mdata:cc.Label,sfAttributes:{default:[],type:cc.SpriteFrame},spAttribute:{default:null,type:cc.Sprite}},updatePanelDate:function(e){var t="en",n=cc.sys.localStorage.getItem("curLang");n&&(t=n);var s="en"==t?o[e.category].en:o[e.category].zh_HK;this.title.string=e.token_name,this.nftid.string=e.id,this.nftvalue.string=e.nft_value,this.level.string=e.level,this.genes.string=e.genes,this.att.string=s,this.des.string=e.token_summary,this.mdata.string=e.mdata,this.spAttribute.spriteFrame=this.sfAttributes[e.category],a=e.id,null!=e.price&&(i=e.price,this.nftprice.string=e.price),cc.sys.localStorage.setItem("WeapDataCurrent",JSON.stringify(e))},setSlot:function(e){this.slot=e,console.log("slot:"+this.slot)},buyWeap:function(){i&&(n=2,cc.find("CCC").getComponent("CCCManager").buyWeap(n,a,i))},sellWeap:function(){i&&(n=2,cc.find("CCC").getComponent("CCCManager").sellWeap(n,a,i))},equipWeap:function(){cc.find("CCC").getComponent("CCCManager").equipWeap(a)},removeWeap:function(){cc.find("CCC").getComponent("CCCManager").removeWeap(this.slot)}}),cc._RF.pop()},{}],zh:[function(e,t){"use strict";cc._RF.push(t,"01b0a3AYrJCRKUQX2C/M3Gf","zh"),t.exports={current:"\u5f53\u524d\u8bed\u8a00\uff1a",create_language:"\u521b\u5efa\u65b0\u8bed\u8a00",language:"\u8bed\u8a00\u540d\u79f0",create:"\u521b\u5efa",cancel:"\u53d6\u6d88",nav_home:"\u9996\u9875",nav_box:"\u76f2\u76d2",nav_nft:"NFT",nav_defi:"DeFi",nav_store:"\u5e02\u573a",nav_risk:"\u5192\u9669",tip_systoptit:"\u7cfb\u7edf\u6682\u505c",tip_systop:"\u7cfb\u7edf\u6682\u505c\uff0c\u8bf7\u7a0d\u5019\u8bbf\u95ee\u3002",tip_nonetit:"\u5f00\u53d1\u4e2d",tip_none:"\u6682\u672a\u63a8\u51fa\uff0c\u656c\u8bf7\u671f\u5f85\u3002",tip_selltit:"\u9500\u552e\u6210\u529f",tip_sell:"\u8be5NFT\u5df2\u7ecf\u6210\u529f\u9500\u552e\u3002\u5177\u4f53\u60c5\u51b5\u4ee5\u94fe\u4e0a\u6570\u636e\u4e3a\u51c6\u3002",tip_claimtit:"\u9886\u53d6\u6210\u529f",tip_claim:"\u5df2\u7ecf\u6210\u529f\u9886\u53d6\u6536\u76ca\u3002\u5177\u4f53\u60c5\u51b5\u4ee5\u94fe\u4e0a\u6570\u636e\u4e3a\u51c6\u3002",tip_staketit:"\u8d28\u62bc\u6210\u529f",tip_stake:"\u5df2\u7ecf\u6210\u529f\u8d28\u62bcNFT\u3002\u5177\u4f53\u60c5\u51b5\u4ee5\u94fe\u4e0a\u6570\u636e\u4e3a\u51c6\u3002",tip_unstaketit:"\u89e3\u9664\u8d28\u62bc",tip_unstake:"\u5df2\u7ecf\u6210\u529f\u53d6\u56deNFT\u3002\u5177\u4f53\u60c5\u51b5\u4ee5\u94fe\u4e0a\u6570\u636e\u4e3a\u51c6\u3002",info_pricetit:"\u76f2\u76d2\u4ef7\u683c",info_price:"\u524d\u4e94\u5343\u4e2a\u76f2\u76d2\u56fa\u5b9a\u4e3a5EOS\uff0c\u4e4b\u540e\u76f2\u76d2\u4ef7\u683c\u4f1a\u968f\u7740\u5e02\u573a\u70ed\u5ea6\u800c\u7ebf\u6027\u53d8\u5316\u3002\u5e95\u4ef7\u662f5EOS\uff0c\u6bcf\u5356\u51fa\u4e00\u4e2a\uff0c\u4ef7\u683c\u589e\u52a00.1EOS\uff1b\u5982\u679c\u65e0\u4eba\u8d2d\u4e70\uff0c\u6bcf\u96941\u5c0f\u65f6\u4f1a\u964d\u4f4e0.1EOS\u3002",tip_failtit:"\u63d0\u4ea4\u4e8b\u52a1\u5931\u8d25",tip_fail:"\u8bf7\u786e\u4fdd\u6709\u8db3\u591f\u7684RAM\u3001CPU\u3001Net\u8d44\u6e90\u6216EOS\u3002\u6216\u66f4\u6362\u8282\u70b9\u3002",tip_pooltit:"\u8d28\u62bc\u6316\u77ff\u89c4\u5219",tip_pool:"cccpool \u6bcf\u5929\u5c06\u6709\u5343\u5206\u4e4b\u4e00\u91ca\u653ecccdefi\u3002\u73a9\u5bb6\u6839\u636e\u65f6\u957f\u548cNFT\u8d28\u62bc\u503c\u6765\u5206cccdefi\u7684CCC\u4ee3\u5e01\u3002\u5177\u4f53\u7b97\u6cd5\u8bf7\u770b\u767d\u76ae\u4e66\u3002",tip_risktit:"\u5192\u9669\uff08PVE\uff09\u89c4\u5219",tip_risk:"\u5192\u9669\u53ef\u5f97\u6b66\u5668\u76f2\u76d2\uff0c\u4f46\u9700\u6ee1\u8db33\u4e2a\u6761\u4ef6\u624d\u53ef\u8fdb\u884c\u5192\u9669\u3002\u5176\u4e2d\uff0cT Power\u53ef\u901a\u8fc7\u8d28\u62bc\u82f1\u96c4\u548c\u6b66\u5668NFT\u6765\u83b7\u5f97\uff0c\u5e76\u6839\u636e\u8d28\u62bc\u65f6\u957f\u8fdb\u884c\u7d2f\u52a0\u3002\u5f53T Power\u5c0f\u4e8e100000\u65f6\uff0c\u5c06\u65e0\u6cd5\u83b7\u5f97\u6b66\u5668\u76f2\u76d2\u3002",tip_comtit:"\u8bc4\u8bba\u6210\u529f",tip_com:"\u4f60\u7684\u8bc4\u8bba\u5c06\u5728\u6e38\u620f\u4e2d\u51fa\u73b0\u3002",tip_pomelotit:"CCC to the moon",tip_pomelo:"CCC\u76ee\u524d\u5728Pomelo\u5e73\u53f0\u63a5\u6536\u6350\u52a9\u3002\u5e0c\u671b\u73a9\u5bb6\u80fd\u53c2\u4e0e\u6350\u52a9\uff0c\u5c11\u91cf\u91d1\u989d\uff0c\u5c31\u80fd\u83b7\u5f97\u5f88\u591a\u6765\u81ea\u5e73\u53f0\u7684\u914d\u6350\uff0c\u4ece\u800c\u66f4\u597d\u5730\u63a8\u52a8\u6e38\u620f\u5f00\u53d1\u548c\u63a8\u5e7f\u3002       https://pomelo.io/grants/eosccc",refer_tit:"\u5206\u4eab\u8d5a\u5e01",refer_des:"\u597d\u53cb\u901a\u8fc7\u4f60\u7684\u9080\u8bf7\u94fe\u63a5\u8d2d\u4e70\u82f1\u96c4\u76f2\u76d2\uff0c\u4f60\u53ef\u83b7\u5f972%\u7684\u4f63\u91d1\u3002",refer_link:"\u590d\u5236\u9080\u8bf7\u94fe\u63a5",referral_tit:"\u63a8\u8350\u8fd4\u5229",referral_des:"\u5c06EOS\u8d26\u6237\u8bbe\u7f6e\u4e3a\u63a8\u8350\u3002\u53ea\u8981\u8be5\u8d26\u53f7\u8d2d\u4e70\u82f1\u96c4\u76f2\u76d2\uff0c\u4f60\u4eec\u53cc\u65b9\u90fd\u53ef\u4ee5\u83b7\u5f975%\u7684\u8fd4\u5229\u3002\u63a8\u8350\u6b21\u6570\uff0c\u4ec5\u80fd\u901a\u8fc7\u62bd\u82f1\u96c4\u76f2\u76d2\u83b7\u53d6",btn_confirm:"\u786e\u8ba4",box_open:"\u4e00\u952e\u6253\u5f00",hero_cate:"\u5c5e\u6027\uff1a",hero_sell:"\u51fa\u552e",hero_buy:"\u8d2d\u4e70",hero_upgrade:"\u5347\u7ea7",hero_merge:"\u7194\u70bc",hero_stake:"\u8d28\u62bc",hero_uptip:"\u5347\u7ea7NFT\uff0c\u9700\u9500\u6bc1\u540c\u7c7b\u522b\u7684NFT\uff0c\u5e76\u6709\u635f\u8017",defi_claim:"\u9886\u53d6",defi_earnings:"\u9884\u4f30\u6536\u76ca",defi_equip:"\u88c5\u5907",defi_remove:"\u5378\u4e0b",defi_unstake:"\u53d6\u56de",defi_stake:"\u8d28\u62bc",comment_tit:"\u53d1\u5e03\u5f39\u5e55"},cc._RF.pop()},{}]},{},["DyLabel","ItemList","ItemTemplate","en","zh","use_reversed_rotateBy","use_reversed_rotateTo","use_v2.1-2.2.1_cc.Toggle_event","use_v2.1.x_cc.Action","LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min","BossMng","Foe","Move","Player","Projectile","Spawn","WaveMng","hero","swordMax","AnimHelper","BGPool","BackPackUI","BoxUI","BulletScreen","ButtonScaler","CCCManager","ChargeUI","DefiUI","EnergyCounter","Game","HeroSlot","HomeUI","NodePool","PanelTransition","PanelUI","PoolMng","ComboDisplay","KillDisplay","PlayerFX","SortMng","RiskUI","ShopUI","ShowMask","SubBtnsUI","TipPanelUI","Types","BossProgress","ButtonScaler1","DeathUI","GameOverUI","HomeUI1","InGameUI","WaveProgress","WaveUI","WeapSlot","buybox","camera","comPanelUI","copy-text-to-clipboard","heroPanelUI","lang","message","referPanelUI","stage","MainMenu","MenuSidebar","TabCtrl","upgradePanel","weapPanelUI"]);